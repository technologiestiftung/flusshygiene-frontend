(this["webpackJsonp@tsb/cms-spa"]=this["webpackJsonp@tsb/cms-spa"]||[]).push([[25],{1031:function(e,t,a){},1039:function(e,t){},1089:function(e,t){},1094:function(e,t){},1226:function(e,t,a){var n={"./":[306,9],"./Frage-1.1.1.-gew2":[763,3,0],"./Frage-1.1.1.-gew2.json":[763,3,0],"./Frage-10.1.1.-gew2":[764,3,1],"./Frage-10.1.1.-gew2.json":[764,3,1],"./Frage-10.2.1.-gew2":[765,3,2],"./Frage-10.2.1.-gew2.json":[765,3,2],"./Frage-10.3.1.-gew2":[766,3,3],"./Frage-10.3.1.-gew2.json":[766,3,3],"./Frage-2.1.1.-gew4":[767,3,4],"./Frage-2.1.1.-gew4.json":[767,3,4],"./Frage-2.2.1.-gew4":[768,3,5],"./Frage-2.2.1.-gew4.json":[768,3,5],"./Frage-2.3.1.-gew4":[769,3,6],"./Frage-2.3.1.-gew4.json":[769,3,6],"./Frage-2.4.1.-gew4":[770,3,7],"./Frage-2.4.1.-gew4.json":[770,3,7],"./Frage-3.1.1.-gew1":[771,3,8],"./Frage-3.1.1.-gew1.json":[771,3,8],"./Frage-3.2.2.-gew2":[772,3,9],"./Frage-3.2.2.-gew2.json":[772,3,9],"./Frage-3.2.3.-gew4":[773,3,10],"./Frage-3.2.3.-gew4.json":[773,3,10],"./Frage-3.3.2.-gew3":[774,3,11],"./Frage-3.3.2.-gew3.json":[774,3,11],"./Frage-4.1.1.-gew3":[775,3,12],"./Frage-4.1.1.-gew3.json":[775,3,12],"./Frage-4.2.1.-gew3":[776,3,13],"./Frage-4.2.1.-gew3.json":[776,3,13],"./Frage-4.3.1.-gew3":[777,3,14],"./Frage-4.3.1.-gew3.json":[777,3,14],"./Frage-4.4.1.-gew3":[778,3,15],"./Frage-4.4.1.-gew3.json":[778,3,15],"./Frage-5.1.1.-gew3":[779,3,16],"./Frage-5.1.1.-gew3.json":[779,3,16],"./Frage-6.1.1.-gew2":[780,3,17],"./Frage-6.1.1.-gew2.json":[780,3,17],"./Frage-7.1.1.-gew4":[781,3,18],"./Frage-7.1.1.-gew4.json":[781,3,18],"./Frage-8.1.1.-gew4":[782,3,19],"./Frage-8.1.1.-gew4.json":[782,3,19],"./Frage-8.2.1.-gew4":[783,3,20],"./Frage-8.2.1.-gew4.json":[783,3,20],"./Frage-8.3.1.-gew4":[784,3,21],"./Frage-8.3.1.-gew4.json":[784,3,21],"./Frage-8.4.1.-gew4":[785,3,22],"./Frage-8.4.1.-gew4.json":[785,3,22],"./Frage-9.1.1.-gew3":[786,3,23],"./Frage-9.1.1.-gew3.json":[786,3,23],"./Frage-9.2.1.-gew3":[787,3,24],"./Frage-9.2.1.-gew3.json":[787,3,24],"./index":[306,9],"./index.ts":[306,9],"./old-questions-2019-09-24.zip":[1424,7,28],"./old-questions-2019-10-22.zip":[1425,7,29],"./old-questions-2020-01-17.zip":[1426,7,30]};function r(e){if(!a.o(n,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=n[e],r=t[0];return Promise.all(t.slice(2).map(a.e)).then((function(){return a.t(r,t[1])}))}r.keys=function(){return Object.keys(n)},r.id=1226,e.exports=r},1229:function(e,t){},1231:function(e,t){},1268:function(e,t){},1269:function(e,t){},1411:function(e,t,a){e.exports=a.p+"static/media/open-sans-v16-latin-600.8f712814.ttf"},1412:function(e,t,a){e.exports=a.p+"static/media/open-sans-v16-latin-300.73a1b98b.ttf"},1413:function(e,t,a){e.exports=a.p+"static/media/open-sans-v16-latin-300italic.a6045fa7.ttf"},1414:function(e,t,a){"use strict";a.r(t);a(793),a(842),a(1026),a(597);var n,r=a(0),l=a.n(r),i=a(724),c=a.n(i),s=(a(1031),a(725)),o=a(25),u=a.n(o),d=a(39),m=a(11);function p(e){var t=e.url,a=e.type,r=e.method,l=e.resource,i=e.token,c=e.body,s={type:a||n.START_API_REQUEST,payload:{config:{body:JSON.stringify(c),method:r,headers:{"content-type":"application/json",Authorization:"Bearer ".concat(i)},credentials:"include"},url:t,requestType:{type:r,resource:l}}};return"GET"===r&&delete s.payload.config.body,s}!function(e){e.START_API_REQUEST="START_API_REQUEST",e.FINISH_API_REQUEST="FINISH_API_REQUEST",e.FAIL_API_REQUEST="FAIL_API_REQUEST"}(n||(n={}));var h,g,E,f,b,v,y;!function(e){e.bathingspot="badestellen",e.editor="bearbeiten",e.index="",e.info="info",e.questionnaire="standortbewertung",e.report="standortbewertung/auswertung",e.login="login",e.logout="logout",e.user="user",e.passwordreset="user/password-reset",e.callback="callback",e.imprint="impressum",e.profile="profil",e.privacy="datenschutz",e.helpdesk="support"}(h||(h={})),function(e){e.bathingspotId=":spotId([0-9]+)",e.questionId=":qId([0-9]+)"}(g||(g={})),function(e){e.red="rot",e.green="gr\xfcn",e.orange="orange"}(E||(E={})),function(e){e.button="button",e.submit="submit",e.reset="reset"}(f||(f={})),function(e){e.dev="DEV",e.prod="PROD"}(b||(b={})),function(e){e.bathingspots="bathingspots",e.users="users",e.measurements="measurements",e.discharges="discharges",e.globalIrradiances="globalIrradiances",e.rains="rains",e.purificationPlants="purificationPlants",e.genericInputs="genericInputs",e.models="models",e.predictions="predictions"}(v||(v={})),function(e){e.v1="api/v1"}(y||(y={}));var w=a(728),k=a.n(w),S=function(){return l.a.createElement("span",{className:"spinner"},l.a.createElement("div",{className:"bounce1"}),l.a.createElement("div",{className:"bounce2"}),l.a.createElement("div",{className:"bounce3"}))};S.displayName="Spinner";var N=function(e){return!0===e.isLoading&&void 0===e.name?l.a.createElement(S,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"is-title is-1"},e.name," ",!0===e.isLoading&&l.a.createElement(S,null)),function(){if(e.nameLong)return l.a.createElement("div",{className:"content"},l.a.createElement("p",{className:"subtitle"},e.nameLong," ",l.a.createElement("span",{className:"district"},e.district)))}(),function(){if(e.water)return l.a.createElement("h3",{className:"is-subtitle is-3"},"Gew\xe4sser: ",e.water)}())};function O(e){var t=Object(r.useState)({width:100,height:100}),a=Object(m.a)(t,2),n=a[0],l=a[1];return Object(r.useLayoutEffect)((function(){if(e&&e.current){var t={width:e.current.offsetWidth,height:e.current.offsetHeight};l(t)}var a=function(){if(e&&e.current){var t={width:e.current.offsetWidth,height:e.current.offsetHeight};l(t)}};return window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}}),[e]),n}var j=a(49),I=a(209),T=a(34),C=a(731),D=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AUTH0_AUDIENCE,x=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AUTH0_CLIENTID,A=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_AUTH0_DOMAIN,_=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_MAPBOX_API_TOKEN,P=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DOMAIN_URL,F=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DOMAIN_NICE_NAME;var z=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_API_HOST,R=function(e){return window.history.replaceState({},document.title,window.location.pathname)},M=l.a.createContext({}),B=function(){return Object(r.useContext)(M)},U=function(e){var t=e.children,a=e.onRedirectCallback,n=void 0===a?R:a,i=Object(I.a)(e,["children","onRedirectCallback"]),c=Object(r.useState)(),s=Object(m.a)(c,2),o=s[0],p=s[1],h=Object(r.useState)(),g=Object(m.a)(h,2),E=g[0],f=g[1],b=Object(r.useState)(),w=Object(m.a)(b,2),k=w[0],S=w[1],N=Object(r.useState)(!0),O=Object(m.a)(N,2),j=O[0],T=O[1],D=Object(r.useState)(!1),x=Object(m.a)(D,2),A=x[0],_=x[1];Object(r.useEffect)((function(){var e=new AbortController;return function(){var t=Object(d.a)(u.a.mark((function t(){var a,r,l,c,s,o,d,m,h,g,E;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(C.a)(i);case 2:if(a=t.sent,S(a),!window.location.search.includes("code=")){t.next=10;break}return t.next=7,a.handleRedirectCallback();case 7:r=t.sent,l=r.appState,n(l);case 10:return t.next=12,a.isAuthenticated();case 12:if(c=t.sent,p(c),!c){t.next=39;break}return t.next=17,a.getUser();case 17:return s=t.sent,t.next=20,a.getTokenSilently();case 20:return o=t.sent,d={"content-type":"application/json",Authorization:"Bearer ".concat(o)},m=e.signal,h={method:"GET",headers:d,signal:m},t.next=26,fetch("".concat(z,"/").concat(y.v1,"/").concat(v.users,"?auth0Id=").concat(s.sub),h);case 26:return g=t.sent,t.prev=27,t.next=30,g.json();case 30:E=t.sent,s.pgapiData=E.data[0],f(s),t.next=39;break;case 35:throw t.prev=35,t.t0=t.catch(27),console.error(t.t0),t.t0;case 39:T(!1);case 40:case"end":return t.stop()}}),t,null,[[27,35]])})));return function(){return t.apply(this,arguments)}}()(),function(){return e.abort()}}),[]);var P=function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,n=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},_(!0),e.prev=2,e.next=5,null===k||void 0===k?void 0:k.loginWithPopup(t);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:return e.prev=10,_(!1),e.finish(10);case 13:return e.next=15,null===k||void 0===k?void 0:k.getUser();case 15:a=e.sent,f(a),p(!0);case 18:case"end":return e.stop()}}),e,null,[[2,7,10,13]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(!0),e.next=3,null===k||void 0===k?void 0:k.handleRedirectCallback();case 3:return e.next=5,null===k||void 0===k?void 0:k.getUser();case 5:t=e.sent,T(!1),p(!0),f(t);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return l.a.createElement(M.Provider,{value:{isAuthenticated:o,user:E,loading:j,popupOpen:A,loginWithPopup:P,handleRedirectCallback:F,getIdTokenClaims:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return null===k||void 0===k?void 0:k.getIdTokenClaims.apply(k,t)},loginWithRedirect:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return null===k||void 0===k?void 0:k.loginWithRedirect.apply(k,t)},getTokenSilently:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return null===k||void 0===k?void 0:k.getTokenSilently.apply(k,t)},getTokenWithPopup:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return null===k||void 0===k?void 0:k.getTokenWithPopup.apply(k,t)},logout:function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return null===k||void 0===k?void 0:k.logout.apply(k,t)}}},t)};U.displayName="Auth0Provider";var L=function(e){var t=e.title,a=e.children;return l.a.createElement("div",{className:"",style:{paddingTop:"2rem"}},l.a.createElement("fieldset",null,l.a.createElement("legend",{className:"title is-5"},t),a))};L.displayName="SpotEditorBox";var H=function(e){var t=e.name,a=e.label,n=e.type,r=e.children;return l.a.createElement("div",{className:"field is-horizontal"},l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{htmlFor:t,className:"label"},a)),l.a.createElement("div",{className:"field-body"},l.a.createElement("div",{className:"field ".concat(void 0!==r?"is-grouped":"")},l.a.createElement("div",{className:"control ".concat(void 0!==r?"is-expanded":"")},l.a.createElement(T.b,{type:n,name:t,className:"input is-small",id:t,"data-testid":"test-input-".concat(t)}),l.a.createElement(T.a,{name:t,component:"div",className:"help is-danger"})),void 0!==r&&r)))};H.displayName="SpotEditorInput";var V=function(e){var t=e.name,a=e.label,n=e.value;return l.a.createElement("div",{className:"field is-horizontal"},l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("div",{className:"label"})),l.a.createElement("div",{className:"field-body"},l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"control"},l.a.createElement("label",{htmlFor:t,className:"checkbox"},l.a.createElement(T.b,{type:"checkbox",name:t,checked:n,id:t}),l.a.createElement("span",{className:"form__checkbox--distance"},a)),l.a.createElement(T.a,{name:t,component:"div",className:"help is-danger"})))))};V.displayName="SpotEditorCheckbox";var W=function(e){var t=e.name,a=e.label,n=e.options,r=e.value;return l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:t,className:"label"},a),l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:"select is-small"},l.a.createElement(T.b,{name:t,as:"select",value:r,id:t},n.map((function(e,t){return l.a.createElement("option",{value:e.value,key:t},e.text)}))))))};W.displayName="SpotEditorSelect";var G=function(e,t){return e.map((function(e,t){switch(e.type){case"text":case"number":case"email":return l.a.createElement(H,{key:t,name:e.name,type:e.type,label:e.label});case"checkbox":return l.a.createElement(V,{key:t,name:e.name,type:e.type,label:e.label,value:e.value});case"select":return l.a.createElement(W,{key:t,name:e.name,label:e.label,value:e.value,options:e.options});default:return}}))},q=function(e,t,a){return t.forEach((function(t,n,r){if("checkbox"===t.type&&!0===e.hasOwnProperty(t.name)&&(r[n].value=void 0!==e[t.name]&&e[t.name]),"select"===t.type&&!0===e.hasOwnProperty(t.name)){if(void 0===a)throw new Error("You need to define a defaultSelect value for the patch function ");r[n].value=void 0===e[t.name]?a:e[t.name]}})),t},K=[{text:"Ja",value:"yes"},{text:"Unbekannt",value:"unknown"},{text:"Nein",value:"no"}],Q=[{type:"select",name:"influencePurificationPlant",label:"kommunale Kl\xe4rwerke",value:void 0,options:K},{type:"select",name:"influenceCombinedSewerSystem",label:"Mischwassereinleitungen aus urbanen Gebieten",value:void 0,options:K},{type:"select",name:"influenceRainwater",label:"Regenwassereileitung aus urbanen Gebieten",value:void 0,options:K},{type:"select",name:"influenceAgriculture",label:"Einleitungen aus der Landwirtschaft",value:void 0,options:K}],Z=[{name:"waterRescue",type:"text",label:"Wasserrettung"},{name:"waterRescueThroughDLRGorASB",type:"checkbox",label:"Wasserrettung durch DLRG oder ASB?",value:void 0},{name:"lifeguard",type:"checkbox",label:"Rettungschwimmer vor Ort",value:void 0},{name:"disabilityAccess",type:"checkbox",label:"Barrierefreie",value:void 0},{name:"disabilityAccessBathrooms",type:"checkbox",label:"Barrierefreie Waschr\xe4ume",value:void 0},{name:"hasDisabilityAccesableEntrence",type:"checkbox",label:"Barrierefreier Eingang",value:void 0},{name:"restaurant",type:"checkbox",label:"Restaurant",value:void 0},{name:"snack",type:"checkbox",label:"Snack",value:void 0},{name:"parkingSpots",type:"checkbox",label:"Parkpl\xe4tze",value:void 0},{name:"bathrooms",type:"checkbox",label:"Waschr\xe4ume",value:void 0},{name:"bathroomsMobile",type:"checkbox",label:"Mobile Toiletten",value:void 0},{name:"dogban",type:"checkbox",label:"Hundeverbot",value:void 0}],J=[{name:"healthDepartment",type:"text",label:"Name"},{name:"healthDepartmentAddition",type:"text",label:"Zusatz"},{name:"healthDepartmentStreet",type:"text",label:"Stra\xdfe"},{name:"healthDepartmentPostalCode",type:"number",label:"Postleitzahl"},{name:"healthDepartmentCity",type:"text",label:"Stadt"},{name:"healthDepartmentMail",type:"email",label:"E-Mail"},{name:"healthDepartmentPhone",type:"text",label:"Telefonnummer"}],Y=a(21),X=a(1442),$=a(732),ee=a(408),te=a(317),ae=a(54),ne=a(55),re="questionnaire__color",le=function(e){switch(e.toLowerCase()){case"gr\xfcn":return"".concat(re,"--green");case"t\xfcrkis":return"".concat(re,"--turquoise");case"gelb":return"".concat(re,"--yellow");case"orange":return"".concat(re,"--orange");case"rot":return"".concat(re,"--red");default:return""}};te.b.add(ne.u,ne.l,ne.w,ne.k,ne.a,ne.p,ne.r,ne.d,ne.s,ne.B,ne.H,ne.c,ne.m,ne.v,ne.h,ne.b,ne.D,ne.G,ne.E,ne.q,ne.o,ne.i,ne.f,ne.j,ne.x,ne.g,ne.C,ne.e,ne.F,ne.A,ne.z,ne.y,ne.t,ne.n);var ie=function(e){var t=e.toLowerCase();switch(t){case"gr\xfcn":return l.a.createElement(se,{className:le(t)});case"t\xfcrkis":return l.a.createElement(oe,{className:le(t),rotate:-45});case"gelb":return l.a.createElement(oe,{className:le(t)});case"orange":return l.a.createElement(oe,{className:le(t),rotate:45});case"rot":return l.a.createElement(me,{className:le(t)});default:throw new Error("Unhandled colorname for icons")}},ce=function(e,t){switch(e){case"infrastruktur":return l.a.createElement(Ne,{className:le(t)});case"verhandlung":return l.a.createElement(Se,{className:le(t)});default:throw new Error("not defined questionType")}},se=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"check-circle",className:t})};se.displayName="IconCheckCircle";var oe=function(e){var t=e.className,a=e.rotate;return l.a.createElement(ae.a,{icon:"arrow-circle-right",className:t,transform:{rotate:a}})};oe.displayName="IconArrowCircleRight";var ue=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"file-pdf",className:t})};ue.displayName="IconPDF";var de=function(e){var t=e.className,a=e.handleClick;return l.a.createElement(ae.a,{icon:"file-code",className:t,onClick:function(e){e.preventDefault(),null===a||void 0===a||a()}})};de.displayName="IconCode";var me=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"times",className:t})};me.displayName="IconTimes";var pe=function(){return l.a.createElement(ae.a,{icon:"info"})};pe.displayName="IconInfo";var he=function(){return l.a.createElement(ae.a,{icon:"window-close"})};he.displayName="IconCloseWin";var ge=function(){return l.a.createElement(ae.a,{icon:"angle-down"})};ge.displayName="IconAngleDown";var Ee=function(){return l.a.createElement(ae.a,{icon:"edit"})};Ee.displayName="IconEdit";var fe=function(){return l.a.createElement(ae.a,{icon:"file-csv"})};fe.displayName="IconCSV";var be=function(){return l.a.createElement(ae.a,{icon:"file-upload"})};be.displayName="IconFileUplad";var ve=function(){return l.a.createElement(ae.a,{icon:"backward"})};ve.displayName="IconPrev";var ye=function(){return l.a.createElement(ae.a,{icon:"forward"})};ye.displayName="IconNext";var we=function(){return l.a.createElement(ae.a,{icon:"save"})};we.displayName="IconSave";var ke=function(){return l.a.createElement(ae.a,{icon:"link"})};ke.displayName="IconLink";var Se=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"users-cog",className:t})};Se.displayName="IconUsersCog";var Ne=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"tools",className:t})};Ne.displayName="Icontools";var Oe=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"cloud-rain",className:t})};Oe.displayName="IconRain";var je=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"calculator",className:t})};je.displayName="IconCalc";var Ie=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"comment-alt",className:t})};Ie.displayName="IconComment";var Te=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"map-pin",className:t})};Te.displayName="IconMapPin";var Ce=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"chart-bar",className:t})};Ce.displayName="IconChart";var De=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"thumbs-up",className:t})};De.displayName="IconThumbsUp";var xe=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"bug",className:t})};xe.displayName="IconBug";var Ae=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"trash",className:t})};Ae.displayName="IconTrash";var _e=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"question",className:t})};_e.displayName="IconHelp";var Pe=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"plus",className:t})};Pe.displayName="IconPlus";var Fe=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"minus",className:t})};Fe.displayName="IconMinus";var ze=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"industry",className:t})};ze.displayName="IconIndustry";var Re=function(e){var t=e.className;return l.a.createElement(ae.a,{icon:"file-alt",className:t})};Re.displayName="IconFileAlt";var Me={bearing:0,latitude:52,longitude:13,pitch:0,zoom:4},Be={view:{text:" Anzeige"},modify:{text:"Modifizieren"},translate:{text:"Bewegen"},drawPoint:{text:"Position Zeichnen"},drawPolygon:{text:"Regeneinzugsgebiet Zeichnen"}},Ue=function(e){var t=e.width,a=e.height,n=e.data,i=e.zoom,c=e.lat,s=e.lon,o=e.activeEditor,u=e.newSpot,d=(e.defaultFormikSetFieldValues,e.handleUpdates,Object(T.f)()),p=d.values,h=d.setFieldValue,g=d.handleChange,E=Object(r.useRef)(null),f=O(E),b=Object(r.useState)("view"),v=Object(m.a)(b,2),y=v[0],w=v[1],k=Object(r.useState)(),S=Object(m.a)(k,2),N=S[0],j=S[1],I=Object(r.useState)([]),C=Object(m.a)(I,2),D=C[0],x=C[1],A=function(e){var t=e.lat,a=e.lon;if(void 0!==N){var n=N.features.map((function(e,n,r){switch(e.geometry.type){case"Polygon":return e;case"Point":return r[n].geometry.coordinates=[a,t],r[n]}}));j(Object(Y.a)(Object(Y.a)({},N),{},{features:n}))}};Object(r.useEffect)((function(){if(void 0!==N&&void 0!==N.features){var e=N.features.filter((function(e){return"Point"===e.geometry.type?e:null})),t=N.features.filter((function(e){return"Polygon"===e.geometry.type?e:null}));t.length>0&&h("area",t[0].geometry),e.length>0&&(h("location",e[0].geometry),h("latitude",e[0].geometry.coordinates[1]),h("longitude",e[0].geometry.coordinates[0]))}}),[N,h]),Object(r.useEffect)((function(){if(void 0!==n&&void 0!==n[0]){var e=[];if(n[0].location){var t={type:"Feature",geometry:n[0].location,properties:{fhType:"primary"}};e.push(t)}if(void 0!==n[0].area){var a={type:"Feature",geometry:n[0].area,properties:{fhType:"primary"}};e.push(a)}j({type:"FeatureCollection",features:e})}}),[j]),void 0!==i&&(Me.zoom=i,void 0!==n&&void 0!==n[0]&&void 0!==c&&void 0!==s&&(Me.latitude=n[0].latitude,Me.longitude=n[0].longitude));var P={lineWidthMinPixels:2,editHandlePointRadiusMinPixels:4,editHandlePointRadiusScale:200,lineDashJustified:!0,pickingRadius:20,pickingDepth:1,radiusMaxPixels:20,radiusMinPixels:5},F=new $.EditableGeoJsonLayer(Object(Y.a)(Object(Y.a)({},P),{},{selectedFeatureIndexes:D,id:"location",data:N,mode:y,onStopDragging:function(){},onEdit:function(e){var t=e.updatedData,a=(e.editContext,t.features.filter((function(e){return"Point"===e.geometry.type}))),n=t.features.filter((function(e){return"Polygon"===e.geometry.type})),r={type:"FeatureCollection",features:[a[a.length-1],n[n.length-1]]};j(r)}},P)),z=Object(r.useState)(!1),R=Object(m.a)(z,2),M=R[0],B=R[1],U=function(e){!function(e){switch(e.preventDefault(),e.currentTarget.id){case"view":case"modify":case"translate":case"drawPoint":case"drawPolygon":["modify","translate"].includes(e.currentTarget.id)&&x([0]),w(e.currentTarget.id)}}(e),B(!1)},L=function(e){return y===e?"is-active":""};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"buttons formik__buttons--size"},l.a.createElement("div",{className:"dropdown ".concat(M?"is-active":""," is-small")},l.a.createElement("div",{className:"dropdown-trigger","aria-haspopup":"true","aria-controls":"dropdown-menu"},l.a.createElement("button",{className:"button is-small","aria-haspopup":"true","aria-controls":"dropdown-menu",onClick:function(e){e.preventDefault(),B(!M)}},l.a.createElement("span",{style:{paddingRight:"0.5em"}},"Bearbeitungs Modus: ".concat(void 0!==Be[y]?Be[y].text:"")),l.a.createElement("span",null,l.a.createElement(ge,null)))),l.a.createElement("div",{className:"dropdown-menu",id:"dropdown-menu",role:"menu"},l.a.createElement("div",{className:"dropdown-content"},l.a.createElement("a",{href:"#/",className:"dropdown-item ".concat(L("view")),onClick:U,id:"view"},"anzeigen"),l.a.createElement("a",{href:"#/",className:"dropdown-item ".concat(L("modify")," ").concat(!0===u?"is-hidden":""),onClick:U,id:"modify"},"modifizieren"),l.a.createElement("a",{href:"#/",className:"dropdown-item ".concat(L("translate")," ").concat(!0===u?"is-hidden":""),onClick:U,id:"translate"},"bewegen"),l.a.createElement("a",{href:"#/",className:"dropdown-item ".concat(L("drawPoint")),onClick:U,id:"drawPoint"},"Punkt zeichnen"),l.a.createElement("a",{href:"#/",className:"dropdown-item ".concat(L("drawPolygon")),onClick:U,id:"drawPolygon"},"Polygon zeichnen")))),l.a.createElement("div",{className:"formik__field--wrapper"},l.a.createElement("label",{className:"button is-small",htmlFor:"latitude",style:{border:"none"}}," ","Latitude"),l.a.createElement(T.b,{name:"latitude",value:p.latitude},(function(e){var t=e.field;return l.a.createElement("input",Object.assign({type:"number",step:"any",min:"-90",max:"90",className:"button is-small"},t,{onChange:function(e){g(e);var t=p.location;if(t&&p.latitude&&p.longitude){var a=parseFloat(e.target.value);t.coordinates[1]=a,h("location",Object(Y.a)({},t)),A({lat:a,lon:p.longitude})}}}))}))),l.a.createElement("div",{className:"formik__field--wrapper"},l.a.createElement("label",{className:"button is-small",htmlFor:"longitude",style:{border:"none"}}," ","Longitude"),l.a.createElement(T.b,{name:"longitude",value:p.longitude},(function(e){var t=e.field;return l.a.createElement("input",Object.assign({type:"number",step:"any",min:"-180",max:"180",className:"button is-small"},t,{onChange:function(e){g(e);var t=p.location;if(t&&p.latitude&&p.longitude){var a=parseFloat(e.target.value);t.coordinates[0]=a,h("location",Object(Y.a)({},t)),A({lat:p.latitude,lon:a})}}}))})))),l.a.createElement("div",{ref:E,id:"map__container"},l.a.createElement(X.a,{width:f.width,height:f.height,effects:[],initialViewState:{bearing:0,latitude:52,longitude:13,pitch:0,zoom:4},controller:!0,layers:[F],getCursor:"location"===o?F.getCursor.bind(F):void 0,onClick:function(e){"view"!==y&&"drawPolygon"!==y&&(e?e.index>=0&&x([e.index]):x([]))}},l.a.createElement(ee.a,{width:t,height:a,mapboxApiAccessToken:_,mapStyle:"mapbox://styles/fmoronzirfas/ck21m3k446h8g1cp9zj67nw4m"}))))},Le=a(418);function He(e){var t=Object(Le.a)(/bathingspots\/([0-9]+)/,{spotId:1}),a=e.payload.url.match(t);if(null===a||void 0===a.groups)throw new Error("Can't match spotId in ".concat(e.payload.url));return parseInt(a.groups.spotId,10)}var Ve=["genericInputs","purificationPlants","gInputMeasurements","pplantMeasurements"],We=Object(r.createContext)(void 0),Ge=Object(r.createContext)(void 0),qe='You need to define the request type opject on the payload. See "IApiActionRequestType" in interface.ts',Ke=function(e,t){switch(t.type){case n.START_API_REQUEST:return Object(Y.a)(Object(Y.a)({},e),{},{loading:!0});case n.FINISH_API_REQUEST:if(void 0===(t=t).payload.requestType)throw new Error(qe);if(void 0===t.payload.response)throw new Error("The action.payload.response from the API is missing");var a;if("bathingspots"!==t.payload.requestType.resource&&(a=He(t)),"GET"===t.payload.requestType.type)switch(t.payload.requestType.resource){case"bathingspots":var r=t.payload.response.data;return r.sort((function(e,t){return e.id>t.id?-1:1})),Object(Y.a)(Object(Y.a)({},e),{},{loading:!1,truncated:t.payload.response.truncated,spots:Object(j.a)(r)});case"bathingspot":if(e.spots.some((function(e){return e.id===a}))){var l=e.spots.map((function(e){return e.id===a?t.payload.response.data[0]:e}));return Object(Y.a)(Object(Y.a)({},e),{},{loading:!1,spots:l})}return Object(Y.a)(Object(Y.a)({},e),{},{loading:!1,spots:[].concat(Object(j.a)(e.spots),[t.payload.response.data[0]])});case"genericInputs":var i=e.reloadSubItems,c=e.spots.map((function(n){return n.id===a&&(n.genericInputs=t.payload.response.data,i=e.reloadSubItems+1),n}));return Object(Y.a)(Object(Y.a)({},e),{},{spots:Object(j.a)(c),reloadSubItems:i,loading:!1});case"gInputMeasurements":var s=Object(Le.a)(/genericInputs\/([0-9]+)/,{pplantId:1}),o=t.payload.url.match(s);if(null===o||void 0===o.groups)throw new Error("Can't match genericInputs id in ".concat(t.payload.url));var u=parseInt(o.groups.pplantId,10),d=e.spots.map((function(e){if(e.id===a&&void 0!==e.genericInputs){var n=e.genericInputs.map((function(e){return e.id===u&&(e.measurements=t.payload.response.data),e}));e.genericInputs=n}return e}));return Object(Y.a)(Object(Y.a)({},e),{},{spots:Object(j.a)(d),loading:!1});case"purificationPlants":var m=e.reloadSubItems,p=e.spots.map((function(n){return n.id===a&&(n.purificationPlants=t.payload.response.data,m=e.reloadSubItems+1),n}));return Object(Y.a)(Object(Y.a)({},e),{},{spots:Object(j.a)(p),reloadSubItems:m,loading:!1});case"pplantMeasurements":var h=Object(Le.a)(/purificationPlants\/([0-9]+)/,{pplantId:1}),g=t.payload.url.match(h);if(null===g||void 0===g.groups)throw new Error("Can't match purificationPlant id in ".concat(t.payload.url));var E=parseInt(g.groups.pplantId,10),f=e.spots.map((function(e){if(e.id===a&&void 0!==e.purificationPlants){var n=e.purificationPlants.map((function(e){return e.id===E&&(e.measurements=t.payload.response.data),e}));e.purificationPlants=n}return e}));return Object(Y.a)(Object(Y.a)({},e),{},{spots:Object(j.a)(f),loading:!1});case"predictions":var b=e.spots.map((function(e){return e.id===a&&(e.predictions=t.payload.response.data),e}));return Object(Y.a)(Object(Y.a)({},e),{},{spots:Object(j.a)(b),loading:!1});case"models":var v=e.spots.map((function(e){return e.id===a&&(e.models=t.payload.response.data),e}));return Object(Y.a)(Object(Y.a)({},e),{},{spots:Object(j.a)(v),loading:!1});case"measurements":var y=He(t),w=e.spots.map((function(e){return e.id===y&&(e.measurements=t.payload.response.data),e}));return Object(Y.a)(Object(Y.a)({},e),{},{spots:Object(j.a)(w),loading:!1});case"discharges":var k=e.spots.map((function(e){return e.id===a&&(e.discharges=t.payload.response.data),e}));return Object(Y.a)(Object(Y.a)({},e),{},{spots:Object(j.a)(k),loading:!1});case"globalIrradiances":var S=e.spots.map((function(e){return e.id===a&&(e.globalIrradiances=t.payload.response.data),e}));return Object(Y.a)(Object(Y.a)({},e),{},{spots:Object(j.a)(S),loading:!1});case"rains":var N=e.spots.map((function(e){return e.id===a&&(e.rains=t.payload.response.data),e}));return Object(Y.a)(Object(Y.a)({},e),{},{spots:Object(j.a)(N),loading:!1});default:throw new Error("no default GET case defined")}else if("POST"===t.payload.requestType.type)switch(t.payload.requestType.resource){case"purificationPlants":case"genericInputs":case"bathingspots":case"measurements":case"discharges":case"gInputMeasurements":case"pplantMeasurements":case"globalIrradiances":var O=e.reload+1,I=e.reloadSubItems;return!0===Ve.includes(t.payload.requestType.resource)&&(I=e.reloadSubItems+1),Object(Y.a)(Object(Y.a)({},e),{},{reload:O,reloadSubItems:I,loading:!1});default:throw new Error("no default POST case defined")}else if("PUT"===t.payload.requestType.type)switch(t.payload.requestType.resource){case"bathingspot":case"bathingspots":case"discharges":case"globalIrradiances":case"purificationPlants":case"genericInputs":case"measurements":var T=e.reload+1,C=e.reloadSubItems;return!0===Ve.includes(t.payload.requestType.resource)&&(C=e.reloadSubItems+1),Object(Y.a)(Object(Y.a)({},e),{},{reload:T,reloadSubItems:C,loading:!1});default:throw new Error("no default PUT case defined")}else{if("DELETE"!==t.payload.requestType.type)return Object(Y.a)(Object(Y.a)({},e),{},{loading:!1});switch(t.payload.requestType.resource){case"bathingspot":case"bathingspots":case"discharges":case"globalIrradiances":case"purificationPlants":case"gInputMeasurements":case"pplantMeasurements":case"genericInputs":case"models":case"rains":case"predictions":case"measurements":var D=e.reloadSubItems;"genericInputs"!==t.payload.requestType.resource&&"purificationPlants"!==t.payload.requestType.resource||(D+=1);var x=e.reload+1;return Object(Y.a)(Object(Y.a)({},e),{},{loading:!1,reload:x,reloadSubItems:D});default:throw new Error("no default DELETE case defined")}}case n.FAIL_API_REQUEST:return Object(Y.a)(Object(Y.a)({},e),{},{loading:!1,error:t.payload.error});default:throw new Error("Unhandled action type: ".concat(t.type))}},Qe=function(e){var t=e.children,a=Object(r.useReducer)(Ke,{spots:[],loading:!1,truncated:!1,reload:0,reloadSubItems:0}),n=Object(m.a)(a,2),i=n[0],c=n[1];return l.a.createElement(We.Provider,{value:i},l.a.createElement(Ge.Provider,{value:c},t))};Qe.displayName="ApiProvider";var Ze=function(){var e=Object(r.useContext)(We);if(void 0===e)throw new Error("useApiState must be used within a QuestionsProvider");return e},Je=function(){var e=Object(r.useContext)(Ge);if(void 0===e)throw new Error("useApiDispatch must be used within a ApiProvider");return e},Ye=function(){return[Ze(),Je()]},Xe=function(){var e=Object(d.a)(u.a.mark((function e(t,a){var r,l,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t({type:n.START_API_REQUEST,payload:a.payload}),void 0!==(l=a.payload.requestType)){e.next=4;break}throw new Error(qe);case 4:return e.prev=4,e.next=7,fetch(a.payload.url,a.payload.config);case 7:if(!0!==(r=e.sent).ok){e.next=22;break}return e.prev=9,e.next=12,r.json();case 12:i=e.sent,e.next=19;break;case 15:throw e.prev=15,e.t0=e.catch(9),e.t0;case 19:t({type:n.FINISH_API_REQUEST,payload:{response:i,url:a.payload.url,requestType:l}}),e.next=23;break;case 22:throw new Error("Network fetch response not ok");case 23:e.next=38;break;case 25:return e.prev=25,e.t1=e.catch(4),e.prev=28,e.next=31,r.json();case 31:c=e.sent,e.next=37;break;case 34:e.prev=34,e.t2=e.catch(28),c={message:"error in parsing response from error "};case 37:t({type:n.FAIL_API_REQUEST,payload:Object(Y.a)(Object(Y.a)({},a.payload),{},{error:c,response:c})});case 38:case"end":return e.stop()}}),e,null,[[4,25],[9,15],[28,34]])})));return function(t,a){return e.apply(this,arguments)}}(),$e=function(e){var t=e.props,a=e.handleCancelClick,n=e.infoModalClickHandler;return l.a.createElement("div",{className:"buttons  buttons__--size"},l.a.createElement("button",{className:"button is-primary is-small",type:"submit",disabled:t.isSubmitting},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(we,null)),l.a.createElement("span",null,"Speichern")," "),l.a.createElement("button",{className:"button is-small",type:"button",disabled:t.isSubmitting,onClick:a,"data-testid":"handle-edit-mode-button"},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(he,null)),l.a.createElement("span",null,"Abbrechen")," "),l.a.createElement("button",{className:"button is-small",type:"button",onClick:n,"data-testid":"handle-info-mode-button"},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(pe,null)),l.a.createElement("span",null,"Info")," "))};$e.displayName="FormikButtons";var et=function(){return l.a.createElement("div",{className:"content"},l.a.createElement("h1",null,"Hilfe zur Plattform"),l.a.createElement("p",null,"Eine ausf\xfchrliche Dokumentation finden Sie in diesem"," ",l.a.createElement("a",{href:"https://docs.google.com/document/d/1-_5ObrwQGtX03ZrIyXCgoDTpG-JEK216MaAeLZbwRWE/edit?usp=sharing",target:"_blank",rel:"noopener noreferrer"},"Google Doc.")," ","Dort haben Sie auch die M\xf6glichkeit zu kommentieren. Oder schreiben Sie eine E-Mail an:"," ",l.a.createElement("a",{href:"mailto:".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_ADMIN_MAIL,"?subject=[Flussbaden]")},Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_ADMIN_MAIL)))};et.displayName="HelpText";var tt=function(e){var t=e.isActive,a=e.clickHandler;return l.a.createElement("div",{className:"modal ".concat(!0===t?"is-active":"")},l.a.createElement("div",{className:"modal-background",onClick:a}),l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"box"},l.a.createElement(et,null)),l.a.createElement("button",{className:"modal-close is-large","aria-label":"close",onClick:a})))};tt.displayName="SpotEditorInfoModal";var at=function(e){var t=e.initialSpot,a=e.handleEditModeClick,i=(e.handleInfoShowModeClick,e.newSpot),c=Ye(),s=Object(m.a)(c,2),o=s[0],h=s[1],g=Object(r.useState)(!1),E=Object(m.a)(g,2),f=E[0],b=E[1],w=Object(r.useState)("view"),k=Object(m.a)(w,1)[0],S=B(),N=S.user,O=S.getTokenSilently,C=function(e){var t={hasPrediction:{type:"boolean"},detailId:{type:"number"},oldId:{type:"number"},measuringPoint:{type:"string"},name:{type:"string"},nameLong:{type:"string"},nameLong2:{type:"string"},water:{type:"string"},district:{type:"string"},street:{type:"string"},postalCode:{type:"number"},category:{type:"string"},city:{type:"string"},website:{type:"string"},cyanoPossible:{type:"boolean"},healthDepartment:{type:"string"},healthDepartmentAddition:{type:"string"},healthDepartmentStreet:{type:"string"},healthDepartmentPostalCode:{type:"number"},healthDepartmentCity:{type:"string"},healthDepartmentMail:{type:"string"},healthDepartmentPhone:{type:"string"},waterRescueThroughDLRGorASB:{type:"boolean"},waterRescue:{type:"string"},lifeguard:{type:"boolean"},hasDisabilityAccesableEntrence:{type:"boolean"},disabilityAccess:{type:"boolean"},disabilityAccessBathrooms:{type:"boolean"},restaurant:{type:"boolean"},snack:{type:"boolean"},parkingSpots:{type:"boolean"},bathrooms:{type:"boolean"},bathroomsMobile:{type:"boolean"},dogban:{type:"boolean"},lastClassification:{type:"string"},image:{type:"string"},apiEndpoints:{type:"string"},state:{type:"string"},latitude:{type:"number"},longitude:{type:"number"},elevation:{type:"number"},region:{type:"string"},location:{type:"point"},area:{type:"polygon"},isPublic:{type:"boolean"},csvFile:{type:"file"}},a={type:"Feature",geometry:{coordinates:[],type:"Point"}};for(var n in e)for(var r in t)if(n===r&&null===e[n])switch(t[r].type){case"file":e[n]=null;break;case"boolean":case"number":e[n]=void 0;break;case"string":e[n]="";break;case"point":a.geometry.type="Point",e[n]=a.geometry;break;case"polygon":a.geometry.type="Polygon",e[n]=a.geometry}return e}(t),D=function(e){b((function(e){return!e}))},x=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,r,l,c,s,o,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:l=e.sent,t.id,t.createdAt,t.version,t.updatedAt,c=Object(I.a)(t,["id","createdAt","version","updatedAt"]),e.t0=u.a.keys(c);case 5:if((e.t1=e.t0()).done){e.next=16;break}if("csvFile"===(s=e.t1.value)&&delete c[s],"isPublic"!==s){e.next=10;break}return e.abrupt("continue",5);case 10:if("location"!==s&&"area"!==s){e.next=12;break}return e.abrupt("continue",5);case 12:null!==c[s]&&void 0!==c[s]||delete c[s],c[s]===C[s]&&delete c[s],e.next=5;break;case 16:c.location&&"Polygon"===c.location.type&&(c.location.type="Point"),0===(null===(a=c.location)||void 0===a?void 0:a.coordinates.length)&&delete c.location,0===(null===(r=c.area)||void 0===r?void 0:r.coordinates.length)&&delete c.area,o=!0===i?"".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(N.pgapiData.id,"/").concat(v.bathingspots):"".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(N.pgapiData.id,"/").concat(v.bathingspots,"/").concat(t.id),d=p({method:!0===i?"POST":"PUT",type:n.START_API_REQUEST,token:l,url:o,resource:!0===i?"bathingspots":"bathingspot",body:c}),Xe(h,d);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(tt,{isActive:f,clickHandler:D}),l.a.createElement(T.e,{enableReinitialize:!0,initialValues:C,onSubmit:function(e,t){var n=t.setSubmitting;x(e).catch((function(e){console.error(e)})),n(o.loading),a()}},(function(e){e.registerField("location",{}),e.registerField("area",{});var t=q(e.values,[{name:"name",type:"text",label:"Name"},{name:"isPublic",type:"checkbox",label:"\xd6ffentlich einsehbar (erlaubt Lesezugriff auf alle Informationen der Badestelle ohne Authentifizierung)",value:void 0}]),n=q(e.values,(e.values,[{name:"cyanoPossible",type:"checkbox",label:"Cyanobakterien m\xf6glich",value:void 0},{name:"nameLong",type:"text",label:"Langer Name"},{name:"water",type:"text",label:"Gew\xe4sser"},{name:"district",type:"text",label:"Distrikt"},{name:"street",type:"text",label:"Stra\xdfe"},{name:"postalCode",type:"number",label:"Postleitzahl"},{name:"city",type:"text",label:"Stadt"},{name:"website",type:"text",label:"Website URL"},{name:"lastClassification",type:"text",label:"Letzte Klassifizierung"},{name:"image",type:"text",label:"Bild URL"},{name:"elevation",type:"number",label:"H\xf6he \xfcber NN"},{name:"apiEndpoints",type:"text",label:"API Endpoints"}])),r=q(e.values,Z),c=q(e.values,Q,"unknown");return l.a.createElement(l.a.Fragment,null,l.a.createElement(T.d,null,l.a.createElement($e,{props:!0,handleCancelClick:a,infoModalClickHandler:D}),l.a.createElement(L,{title:"Basis Daten*"},G(t,e.handleChange)),void 0!==e.values&&l.a.createElement(L,{title:"Geo Daten *"},l.a.createElement(Ue,{width:800,height:600,data:[e.values],editMode:k,newSpot:i,handleUpdates:function(t,a,n){void 0!==n&&e.setFieldValue("area",n),void 0!==a&&e.setFieldValue("location",a),e.handleChange(t)},defaultFormikSetFieldValues:e.setFieldValue})),!1===i||void 0===i&&l.a.createElement(l.a.Fragment,null,l.a.createElement(L,{title:"Hygienische Beeintr\xe4chtigung durch:"},G(c,e.handleChange)),l.a.createElement(L,{title:"Zusatz Daten"},G([].concat(Object(j.a)(n),Object(j.a)(r)),e.handleChange)),l.a.createElement(L,{title:"Zust\xe4ndiges Gesundheitsamt"},G(J,e.handleChange)))))})))},nt=function(e){var t=e.children,a=e.containerClassName,n=e.columnClassName;return l.a.createElement("div",{className:void 0!==a?"container ".concat(a):"container"},l.a.createElement("div",{className:"columns is-centered"},l.a.createElement("div",{className:"column ".concat(void 0!==n?n:"is-10")},t)))};nt.displayName="Container";var rt=function(e){var t=e.children;return l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"columns is-centered"},t))};rt.displayName="ContainerNoColumn";var lt=function(e){var t=e.imageUrl,a=e.title,n=e.description,r=e.id;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"column is-5"},l.a.createElement("h3",{className:"is-title is-3",id:"plotfile-".concat(r)},l.a.createElement("span",null,l.a.createElement(Ce,null))," ",l.a.createElement("span",null,a)),l.a.createElement("div",null,l.a.createElement("figure",{className:"image is-4by3"},l.a.createElement("img",{src:t,alt:a}))),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,n))))},it=function(e){for(var t=e.plotfiles.sort((function(e,t){return e.id>t.id?1:-1})),a=[],n=0;n<t.length&&1!==t.length&&(n!==t.length-1||n%2!==0);n+=2)a.push(l.a.createElement(rt,{key:n},l.a.createElement(lt,{key:n,imageUrl:t[n].url,title:"".concat(t[n].title),description:t[n].description,id:t[n].id}),l.a.createElement(lt,{key:n+1,imageUrl:t[n+1].url,title:"".concat(t[n+1].title),description:t[n+1].description,id:t[n+1].id})));return l.a.createElement(l.a.Fragment,null,a)},ct=Object(r.createContext)(void 0),st=Object(r.createContext)(void 0),ot=function(e,t){switch(t.type){case"START_OCPU_REQUEST":var a=t;return Object(Y.a)(Object(Y.a)({},e),{},{processing:a.payload.processingType});case"FINISH_OCPU_REQUEST":var n=t;return Object(Y.a)(Object(Y.a)({},e),{},{processing:void 0,responses:[n.payload.response]});case"FAIL_OCPU_REQUEST":var r=t;return Object(Y.a)(Object(Y.a)({},e),{},{processing:void 0,errors:[r.payload.error]});default:throw new Error("Unhandled action type: ".concat(t.type))}},ut=function(e){var t=e.children,a=Object(r.useReducer)(ot,{sessionId:"",responses:[],errors:[],processing:void 0}),n=Object(m.a)(a,2),i=n[0],c=n[1];return l.a.createElement(ct.Provider,{value:i},l.a.createElement(st.Provider,{value:c},t))};ut.displayName="OcpuProvider";var dt=function(){var e=Object(r.useContext)(ct);if(void 0===e)throw new Error("useOcpuState must be used within a OcpuProvider");return e},mt=function(){var e=Object(d.a)(u.a.mark((function e(t,a){var n,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(r=a),e.prev=2,e.next=5,fetch(r.payload.url,r.payload.config);case 5:if(!0!==(n=e.sent).ok){e.next=21;break}return e.prev=7,e.next=10,n.json();case 10:l=e.sent,e.next=17;break;case 13:throw e.prev=13,e.t0=e.catch(7),console.error("Error parsing response from fetch call to json",e.t0),e.t0;case 17:t({type:"FINISH_OCPU_REQUEST",payload:{response:l}}),e.next=22;break;case 21:throw new Error("Network fetch response not ok");case 22:e.next=29;break;case 24:e.prev=24,e.t1=e.catch(2),console.error("Error while making fetch call",e.t1),t({type:"FAIL_OCPU_REQUEST",payload:{error:n}});case 29:case"end":return e.stop()}}),e,null,[[2,24],[7,13]])})));return function(t,a){return e.apply(this,arguments)}}(),pt=function(){var e=Object(r.useContext)(st);if(void 0===e)throw new Error("useOcpuDispatch must be used within a OcpuProvider");return e},ht=function(){return[dt(),pt()]},gt=Object(r.createContext)(void 0),Et=function(e,t){switch(t.type){case"INCOMING":var a=JSON.parse(t.event.data);return"response"===a.event?{events:[a]}:e;case"SET_URL":var n=t.url;return void 0===n?e:Object(Y.a)(Object(Y.a)({},e),{},{url:n});case"PING_RECEIVED":var r=0;return void 0!==e.pings&&(r=e.pings),r+=1,Object(Y.a)(Object(Y.a)({},e),{},{pings:r});case"INTERNAL_ERROR":return console.error(t.event),Object(Y.a)(Object(Y.a)({},e),{},{events:["INTERNAL_ERROR"]});default:throw new Error("Unhandled action type: ".concat(t.type))}},ft=function(e){var t=e.children,a=e.url;a=void 0===a?void 0===Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_EVENT_SOURCE_URL?"http://localhost:8888/middlelayer/stream":Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_EVENT_SOURCE_URL:a;var n=Object(r.useReducer)(Et,{events:[],url:a}),i=Object(m.a)(n,2),c=i[0],s=i[1],o=Object(r.useRef)(new EventSource(void 0===c.url?a:c.url));return Object(r.useEffect)((function(){void 0!==c.url&&(o.current.close(),o.current=new EventSource(c.url))}),[c.url]),Object(r.useEffect)((function(){return o.current.addEventListener("passthrough",(function(e){s({type:"INCOMING",event:e})})),o.current.addEventListener("ping",(function(e){console.log("ping",e),s({type:"PING_RECEIVED",event:e})})),o.current.addEventListener("error",(function(e){console.error("eventsource error",e),s({type:"INTERNAL_ERROR",event:e})})),o.current.addEventListener("close",(function(e){})),function(){o.current.close()}}),[o]),l.a.createElement(gt.Provider,{value:c},t)};ft.displayName="EventSourceProvider";var bt=function(){return function(){var e=Object(r.useContext)(gt);if(void 0===e)throw new Error("useEventSourceState must be used within a EventSource Provider");return e}()},vt=a(270),yt=a(403),wt=function(){function e(t,a){Object(vt.a)(this,e),this.timerId=void 0,this.callback=void 0,this.startTime=void 0,this.remaining=void 0,this.callback=t,this.remaining=a}return Object(yt.a)(e,[{key:"pause",value:function(){clearTimeout(this.timerId),this.remaining-=Date.now()-this.startTime}},{key:"resume",value:function(){this.startTime=Date.now(),clearTimeout(this.timerId),this.timerId=setTimeout(this.callback,this.remaining)}},{key:"start",value:function(){this.resume()}}]),e}(),kt=Object(r.createContext)(void 0),St=Object(r.createContext)(void 0),Nt=function(e,t){switch(t.type){case"ADD_MESSAGE":if("number"===typeof t.payload)throw new Error("ADD_MESSAGE action needs message and type on payload");return{messages:[].concat(Object(j.a)(e.messages),[t.payload])};case"REMOVE_MESSAGE":if("number"!==typeof t.payload)throw new Error("REMOVE_MESSAGE action needs number as payload");return{messages:e.messages.filter((function(e,a){return a!==t.payload}))};default:throw new Error("No default action defined")}},Ot=function(e){var t=e.children,a=Object(r.useReducer)(Nt,{messages:[]}),n=Object(m.a)(a,2),i=n[0],c=n[1];return l.a.createElement(kt.Provider,{value:i},l.a.createElement(St.Provider,{value:c},i.messages.map((function(e,t){return void 0!==e.message&&e.message.length>0?l.a.createElement(jt,{data:e,dispatch:c,id:t,key:t}):null})),t))};Ot.displayName="MessageProvider";var jt=function(e){var t,a=e.data,n=e.dispatch,i=e.id,c=e.time,s=void 0===c?6e4:c,o=Object(r.useState)(i),u=Object(m.a)(o,2),d=u[0],p=u[1];switch(a.type){case"normal":t="is-primary";break;case"warning":t="is-warning";break;case"error":t="is-danger";break;default:t=""}var h=Object(r.useCallback)((function(){n({type:"REMOVE_MESSAGE",payload:d})}),[n,d]),g=new wt((function(){n({type:"REMOVE_MESSAGE",payload:i})}),s);return Object(r.useEffect)((function(){p(i),g.start()}),[p]),l.a.createElement("div",{className:"notification notification--margin-bottom ".concat(t)},l.a.createElement("button",{className:"delete",onClick:function(){h()}}),a.message)};jt.displayName="Banner";var It=function(){var e=Object(r.useContext)(kt);if(void 0===e)throw new Error("useMessageState must be used within a MessageProvider");return e},Tt=function(){var e=Object(r.useContext)(St);if(void 0===e)throw new Error("useMessageDispatch must be used within a MessageProvider");return e},Ct=function(){return[It(),Tt()]},Dt=l.a.createContext(void 0),xt=l.a.createContext(void 0),At=function(e,t){switch(t.type){case"SET_SPOT":return Object(Y.a)(Object(Y.a)({},e),{},{spot:t.payload});default:throw new Error("No default state defined for helpdesk reducer")}},_t=function(e){var t=e.children,a=l.a.useReducer(At,{}),n=Object(m.a)(a,2),r=n[0],i=n[1];return l.a.createElement(Dt.Provider,{value:r},l.a.createElement(xt.Provider,{value:i},t))};_t.displayName="HelpDeskProvider";var Pt=function(){var e=l.a.useContext(Dt);if(void 0===e)throw new Error("useHelpDeskState must be used within a HelpDeskProvider");return e},Ft=function(){var e=l.a.useContext(xt);if(void 0===e)throw new Error("useHelpDeskDispatch must be used within a HelpDeskProvider");return e},zt=function(){return[Pt(),Ft()]},Rt=function(e){var t=e.isActive,a=e.handleClick,n=e.cssId,r=e.children,i=e.dataTestId,c=e.additionalClassNames,s=e.isSubmitting,o=void 0!==s&&s,u=e.type,d=void 0===u?"button":u,m=e.text,p=e.isDisabled,h=e.dataTooltipText;return l.a.createElement("button",{type:d,"data-testid":i,"data-tooltip":h,className:"button is-small is-badge-small ".concat(t?"is-active":""," ").concat(void 0!==c?c:""),onClick:a,id:n,disabled:o||p},l.a.createElement("span",{className:"icon is-small"},r),void 0!==m&&l.a.createElement("span",null,m))};Rt.displayName="ButtonIcon";var Mt=function(e){var t=e.handleBasisEditModeClick,a=(e.handleDataEditModeClick,e.handleInfoShowModeClick);e.handleCalibratePredictClick,e.handlePPEditModeClick,e.handleGIEditModeClock,e.ocpuState;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"buttons buttons__--size"},l.a.createElement(Rt,{cssId:"info",handleClick:a,text:"Hilfe"},l.a.createElement(_e,null)),l.a.createElement(Rt,{cssId:"edit",handleClick:t,text:"Basisdaten"},l.a.createElement(Ee,null))))},Bt=function(e){var t=e.text,a=e.status;return l.a.createElement("div",{className:"control"},l.a.createElement("div",{className:"tags has-addons"},l.a.createElement("span",{className:"tag is-dark"},t),l.a.createElement("span",{className:!0===a?"tag is-success":"tag is-danger"},!0===a?" Ja ":"Nein")))};Bt.displayName="SpotAddonTag";var Ut={bathrooms:"Waschr\xe4ume",bathroomsMobile:"Mobile Waschr\xe4ume",cyanoPossible:"Cyanobakterien m\xf6glich",disabilityAccess:"Barrierefrei",disabilityAccessBathrooms:"Barrierefreie Waschr\xe4ume",dogban:"Hundeverbot",hasDisabilityAccesableEntrence:"Barrierefreier Eingang",lifeguard:"Rettungschwimmer",parkingSpots:"Parkpl\xe4tze",restaurant:"Restaurant",snack:"Imbiss",waterRescue:"Wasserrettung"},Lt=function(e){return l.a.createElement("div",{className:"field is-grouped is-grouped-multiline"},Object.keys(e).map((function(t,a){return!0===e.hasOwnProperty(t)?void 0!==e[t]&&l.a.createElement(Bt,{text:Ut[t],status:e[t],key:a}):null})))};function Ht(e){return l.a.createElement("div",{className:"bathingspot__body-addon"},l.a.createElement("h3",null,"Weitere Angaben zur Badesstelle"),l.a.createElement(Lt,{cyanoPossible:e.cyanoPossible,lifeguard:e.lifeguard,disabilityAccess:e.disabilityAccess,hasDisabilityAccesableEntrence:e.hasDisabilityAccesableEntrence,restaurant:e.restaurant,snack:e.snack,parkingSpots:e.parkingSpots,bathrooms:e.bathrooms,disabilityAccessBathrooms:e.disabilityAccessBathrooms,bathroomsMobile:e.bathroomsMobile,dogban:e.dogban}))}Lt.displayName="SpotBodyAddonTagGroup",Ht.displayName="SpotAdditionalTags";var Vt=function(e){return l.a.createElement("figure",{className:"image is-16by9"},l.a.createElement("img",{src:null===e.image||void 0===e.image||0===e.image.length?"/placeholder16-9.svg":e.image,alt:"".concat(e.nameLong),title:"".concat(e.name)}),l.a.createElement("figcaption",null,"Bildquelle:"," ",void 0!==e.imageAuthor?"".concat(e.imageAuthor):"Unbekannt"))};Vt.displayName="SpotImage";var Wt=function(e){var t;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"is-title is-3"},l.a.createElement("span",null,l.a.createElement(Te,null))," ",l.a.createElement("span",null,"Anschrift")),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,void 0!==e.nameLong?e.nameLong:e.name),l.a.createElement("p",null,e.street),l.a.createElement("p",null,e.postalCode," ",e.city),null!==e.website&&void 0!==e.website&&e.website.length>0?l.a.createElement("p",null,l.a.createElement("a",{href:"".concat(e.website)},e.website.replace(/^https?:\/\//g,"").replace(/\/$/,""))):null,void 0!==(null===(t=e.location)||void 0===t?void 0:t.coordinates)&&l.a.createElement("p",null,l.a.createElement("a",{"data-testid":"google-link",href:"https://maps.google.com/maps?daddr=".concat(e.location.coordinates[1],",").concat(e.location.coordinates[0]),target:"_blank",rel:"noopener noreferrer"},"Route Berechnen mit Google Maps ","->"))))};var Gt=a(386),qt={id:999999999,createdAt:new Date(2525),updatedAt:new Date(2525),name:"",location:{coordinates:[],type:"Point"},area:{coordinates:[],type:"Polygon"},isPublic:!1},Kt=(a(1090),a(112)),Qt=Object(Kt.a)(),Zt={bearing:0,latitude:52,longitude:13,pitch:0,zoom:4},Jt=function(e){var t=e.message,a=e.pointer;return l.a.createElement("div",{className:"is-size-7",style:{position:"absolute",zIndex:10,pointerEvents:"none",left:a[0],top:a[1]}},l.a.createElement("span",{style:{backgroundColor:"#ffffff",padding:"0.2rem 1rem 0.2rem 1rem",boxShadow:"1px 2px 1px rgba(51,51,102, .5)"}},t))};Jt.displayName="HoverObject";var Yt=function(e){var t=e.width,a=e.height,n=e.data,i=e.zoom,c=e.lat,s=e.lon,o=Object(r.useState)(!1),u=Object(m.a)(o,2),d=u[0],p=u[1],g=Object(r.useState)([]),E=Object(m.a)(g,2),f=E[0],b=E[1],v=Object(r.useState)(""),y=Object(m.a)(v,2),w=y[0],k=y[1];void 0!==i&&(Zt.zoom=i,void 0!==n&&void 0!==n[0]&&void 0!==c&&void 0!==s&&(Zt.latitude=n[0].latitude,Zt.longitude=n[0].longitude));var S=[];if(void 0!==n&&void 0!==n[0]&&999999999!==n[0].id){var N=n.filter((function(e){return null===e.location||void 0===e.location?null:e})),O=new Gt.a({id:"scatterplot",data:N,filled:!0,getFillColor:function(e){return[51,51,102]},getLineColor:function(e){return[255,255,255]},getPosition:function(e){if(null!==e.location)return void 0!==e.location&&void 0!==e.location.coordinates?[e.location.coordinates[0],e.location.coordinates[1]]:void 0},getRadius:15,lineWidthMinPixels:2,opacity:.5,pickable:!0,radiusMaxPixels:20,radiusMinPixels:5,radiusScale:6,stroked:!0,onClick:function(e){Qt.push("".concat(h.bathingspot,"/").concat(e.object.id))},onHover:function(e){void 0!==e.object?(p(!0),k(e.object.name),b([e.x,e.y])):p(!1)}});S.push(O)}return l.a.createElement(l.a.Fragment,null,d&&l.a.createElement(Jt,{message:w,pointer:f}),l.a.createElement(X.a,{width:t,height:a,initialViewState:Zt,controller:!0,layers:S,effects:[]},l.a.createElement(ee.a,{width:t,height:a,mapboxApiAccessToken:_,mapStyle:"mapbox://styles/fmoronzirfas/ck21m3k446h8g1cp9zj67nw4m"})))},Xt=function(e){var t=e.mapDims,a=e.spot;return l.a.createElement(Yt,{width:t.width,height:t.height,data:!0===Array.isArray(a)?a:[a],zoom:4})};Xt.displayName="MapWrapper";var $t=function(e,t){return e.slice(Math.max(e.length-t,0))},ea=function(e,t){return new Date(e.date)-new Date(t.date)},ta=function(e){var t=e.children,a=e.className;return l.a.createElement("table",{className:"".concat(void 0!==a?a:""," table")},t)};ta.displayName="Table";var aa=function(e){var t=e.children,a=e.className;return l.a.createElement("tbody",{className:"".concat(void 0!==a?a:"")},t)};aa.displayName="TableBody";var na=function(e){var t=e.th,a=e.tds;return l.a.createElement("tr",null,l.a.createElement("th",null,t),a.map((function(e,t){return l.a.createElement("td",{key:t},e)})))};na.displayName="TableRow";var ra=function(e){var t=e.th,a=e.url,n=e.content;return l.a.createElement("tr",null,l.a.createElement("th",null,t),l.a.createElement("td",null,l.a.createElement("a",{href:a,target:"_blank",rel:"noopener noreferrer"},n)))};ra.displayName="TableRowWithUrl";var la=function(e){var t=e.th,a=e.tds,n=e.handleEditClick,r=e.disabled,i=e.editButtonText;return l.a.createElement("tr",null,l.a.createElement("th",null,t),a.map((function(e,t){return l.a.createElement("td",{key:t},e)})),l.a.createElement("td",null,l.a.createElement(Rt,{isDisabled:r,text:i,handleClick:n},l.a.createElement(Ee,null))))};function ia(e){return l.a.createElement(ta,null,l.a.createElement(aa,null,void 0!==e&&void 0!==e.predictions&&function(){var t,a,n={day:"numeric",month:"short",weekday:"short",year:"numeric"},r=e.predictions.sort((function(e,t){return new Date(e.updatedAt)-new Date(t.updatedAt)})),i=(a=5,(t=r).slice(Math.max(t.length-a,0))).reverse().map((function(e,t){var a=[e.prediction];return l.a.createElement(na,{key:t,th:new Date(e.date).toLocaleDateString("de-DE",n),tds:a})}));return 0===i.length?l.a.createElement(na,{th:"k. A.",tds:[""]}):i}()))}la.displayName="TableRowWithButton",ia.displayName="PredictionTable";var ca=function(e,t){return new Date(e).toLocaleDateString("de-DE",t)},sa=function(e,t){var a=Math.pow(10,t);return Math.round((e+Number.EPSILON)*a)/a};function oa(e){return l.a.createElement(ta,null,l.a.createElement(aa,null,void 0!==e&&function(){if(void 0===e.rains||0===e.rains.length)return l.a.createElement(na,{th:"k. A.",tds:[""]});var t={day:"numeric",month:"short",weekday:"short",year:"numeric"},a=e.rains.sort(ea);return $t(a,5).reverse().map((function(e,a){var n=["".concat(sa(e.value,2)," mm")];return l.a.createElement(na,{key:a,th:ca(e.date,t),tds:n})}))}()))}function ua(e,t,a){return!0===a?e?" \u2713":" \u2718":"".concat(t?"Autom.":"Automatisierte Datenagregation",":").concat(e?" \u2713":" \u2718")}oa.displayName="RainTable";var da="k. A.",ma=function(e,t){return new Date(e.date)-new Date(t.date)},pa=function(e){var t=e.measurements.sort(ma),a=t[t.length-1];for(var n in a)null===a[n]&&(a[n]=void 0);return a=void 0!==a?a:{},l.a.createElement(l.a.Fragment,null,l.a.createElement(ga,{measurements:t,hasAutoData:e.hasAutoData}),e.children)},ha=function(e){return l.a.createElement("tr",null,l.a.createElement("th",null,e.rowKey),l.a.createElement("td",null,e.rowValue))};ha.displayName="MeasurementTableRow";var ga=function(e){var t=e.measurements.sort(ma),a=t[t.length-1];a=void 0!==a?a:{};return l.a.createElement("table",{className:"table bathingspot__measurement-table"},l.a.createElement("tbody",null,l.a.createElement(ha,{rowKey:"Datum",rowValue:void 0!==a.date?new Date(a.date).toLocaleDateString("de-DE",{day:"numeric",month:"long",weekday:"long",year:"numeric"}):da}),l.a.createElement(ha,{rowKey:"Sichttiefe",rowValue:void 0!==a.sichtTxt?"".concat(a.sichtTxt," cm"):da}),l.a.createElement(ha,{rowKey:"Escherichia coli",rowValue:void 0!==a.conc_ec?"".concat(a.conc_ec," pro 100 ml"):da}),l.a.createElement(ha,{rowKey:"Intestinale Enterokokken",rowValue:void 0!==a.conc_ie?"".concat(a.conc_ie," pro 100 ml"):da}),l.a.createElement(ha,{rowKey:"Wassertemperatur",rowValue:void 0!==a.tempTxt?"".concat(a.tempTxt.replace(".",",")," \u2103"):da}),l.a.createElement(ha,{rowKey:"Coliforme Bakterien",rowValue:void 0!==a.cb?"".concat(a.cb," pro 100 ml"):da}),l.a.createElement(ha,{rowKey:"Automatisiert",rowValue:ua(void 0!==e.hasAutoData,void 0,!0)})))};function Ea(e){var t=e.title,a=e.iconType;return l.a.createElement("h3",{className:"is-title is-3"},l.a.createElement("span",null,function(){switch(a){case"IconComment":return l.a.createElement(Ie,null);case"IconCSV":return l.a.createElement(fe,null);case"IconRain":return l.a.createElement(Oe,null);case"IconCalc":return l.a.createElement(je,null);case"IconIndustry":return l.a.createElement(ze,null);default:throw new Error("No default icon defiend")}}())," ",l.a.createElement("span",null,t))}ga.displayName="MeasurementTable",Ea.displayName="SpotTableTitle";var fa=function(e){var t=e.title,a=e.Table,n=e.handleEditClick,r=(e.hasData,e.editButtonText);return l.a.createElement("div",{className:"column is-5"},Ea(t),a(),l.a.createElement(Rt,{handleClick:n,text:r},l.a.createElement(Ee,null)))};function ba(){return l.a.createElement(nt,null,l.a.createElement("hr",null))}fa.displayName="SpotTableBlock",ba.displayName="SpotHr";var va=function(e){var t=e.name,a=e.label,n=(e.type,e.onChange),r=e.disabled,i=e.handleClearClick;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"file is-small"},l.a.createElement("label",{className:"file-label"},l.a.createElement("input",{className:"file-input",type:"file",name:t,onChange:n,disabled:r}),l.a.createElement("span",{className:"file-cta"},l.a.createElement("span",{className:"file-icon"},l.a.createElement(fe,null)),l.a.createElement("span",{className:"file-label"},a))),l.a.createElement("div",{className:"buttons"},l.a.createElement(Rt,{text:"Zwischenspeicher l\xf6schen",handleClick:i},l.a.createElement(Ae,null)))))},ya=a(741),wa=a.n(ya),ka=a(742),Sa=a(743),Na=new ka.a,Oa=Sa.a;Na.use(Oa);var ja=function(e){var t=e.csvValidationRef,a=e.buttonId,n=Object(r.useState)(""),i=Object(m.a)(n,2),c=i[0],s=i[1],o=Object(r.useState)(!1),u=Object(m.a)(o,2),d=u[0],p=u[1];return Object(r.useEffect)((function(){!1!==d&&setTimeout((function(){p(!1)}),3e3)}),[d]),l.a.createElement(wa.a,{text:c,onCopy:function(){null!==t&&null!==t.current&&(document.getElementById(a).click(),p(!0),s((function(e){return Na.turndown("<table>".concat(t.current.innerHTML,"</table>"))})))}},l.a.createElement("button",{className:"button is-small is-light",type:"button",id:a},"In die Zwischenablage",!0===d?"!":""))};ja.displayName="SpotEditorToClipboard";var Ia=function(e){var t=e.csvValidationErrors,a=e.csvValidationRef;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"CSV Daten Report"),l.a.createElement(ja,{buttonId:"csv-data-clip",csvValidationRef:a}),l.a.createElement("table",{className:"table",ref:a},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Fehler Nummer"),l.a.createElement("th",null,"In Zeile"),l.a.createElement("th",null,"Beschreibung"))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,t),l.a.createElement("td",null,e.row),l.a.createElement("td",null,e.message))})))))};var Ta=function(e){var t=e.papaParseValidationRef,a=e.parsingErrors;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"CSV Struktur Report"),l.a.createElement(ja,{buttonId:"csv-structure-clip",csvValidationRef:t}),l.a.createElement("table",{className:"table",ref:t},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Fehler Nummer"),l.a.createElement("th",null,"Zeile"),l.a.createElement("th",null,"Beschreibung"),l.a.createElement("th",null,"Fehler Code"),l.a.createElement("th",null,"Type"))),l.a.createElement("tbody",null,a.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,t),l.a.createElement("td",null,e.row+1),l.a.createElement("td",null,e.message),l.a.createElement("td",null,e.code),l.a.createElement("td",null,e.type))})))))};function Ca(e,t){return l.a.createElement("div",{className:""},l.a.createElement("h3",null,"CSV Struktur Report"),l.a.createElement(ja,{buttonId:"csv-structure-clip",csvValidationRef:e}),l.a.createElement("table",{className:"table",ref:e},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Fehler Nummer"),l.a.createElement("th",null,"Zeile"),l.a.createElement("th",null,"Beschreibung"),l.a.createElement("th",null,"Fehler Code"),l.a.createElement("th",null,"Type"))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,t),l.a.createElement("td",null,e.row+1),l.a.createElement("td",null,e.message),l.a.createElement("td",null,e.code),l.a.createElement("td",null,e.type))})))))}Ca.displayName="CSVparsing";var Da=a(744),xa=a.n(Da);function Aa(e,t){return new Promise((function(a,n){xa.a.parse(e,Object(Y.a)(Object(Y.a)({},t),{},{complete:a,error:n}))}))}var _a=function(){return l.a.createElement("div",{className:"content",style:{paddingTop:"1rem"}},l.a.createElement("h3",{className:"is-title is-3"},"Automatisierte Datenaggregation "),l.a.createElement("p",null,"Um Daten automatisiert f\xfcr ihre Badestelle bereit zu stellen, m\xfcssen sie eine \xf6ffentlich zug\xe4ngliche http URL eintragen, die t\xe4glich um 09:00 abgeholt werden kann. F\xfcr E.C. und I.C. Messwerte m\xfcssen die Daten im Format JSON bereit stehen und ben\xf6tigen folgende Formatierung."),l.a.createElement("pre",null,l.a.createElement("code",null,JSON.stringify({data:[{date:"2020-02-05 10:00:00",conc_ec:1,conc_ic:1}]}))),l.a.createElement("p",null,"F\xfcr alle anderen Messwerte ist folgende Formatierung notwendig"),l.a.createElement("pre",null,l.a.createElement("code",null,JSON.stringify({data:[{date:"2020-02-05 10:00:00",value:1}]}))))};_a.displayName="InfoAutoData";var Pa=function(e){var t=e.type,a=e.showDataAggregationText,n=e.title;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",{className:"is-title is-3"},"CSV Daten Upload f\xfcr ",n),l.a.createElement("div",{className:"content"},l.a.createElement("p",null," ","Innerhalb der Plattform werden die folgenden Trennzeichen verwendet:"),l.a.createElement("div",{className:"columns"},l.a.createElement("div",{className:"column is-5"},l.a.createElement("table",{className:"table is-narrow"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Art des Trennzeichens"),l.a.createElement("th",null,"Zeichen "))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"Dezimaltrennzeichen "),l.a.createElement("td",null,"Punkt ")),l.a.createElement("tr",null,l.a.createElement("td",null,"Spaltentrennzeichen"),l.a.createElement("td",null,"Komma")))))),l.a.createElement("p",null,"Alle Spaltennamen und Werte m\xfcssen ohne Anf\xfchrungszeichen angegeben werden. Die Datentabelle muss des Weiteren die folgenden Spalten enthalten:"),l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Spaltenname"),l.a.createElement("th",null,"Information"),l.a.createElement("th",null,"Format"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",null,"date"),l.a.createElement("td",null,"Datum der Probenname "),l.a.createElement("td",null,"YYYY-MM-DD HH:MM:SS ",l.a.createElement("br",null),"(Beispiel: 2016-04-15 13:15:13 = 15. April 2006 um 13 Uhr 15 und 15 Sekunden)")),function(){switch(t){case"measurements":return l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",null,"conc_ec"),l.a.createElement("td",null,"Messwert von E.coli [MPN/100mL]"),l.a.createElement("td",null,"Ganze Zahlen, keine Dezimalstellen")),l.a.createElement("tr",null,l.a.createElement("td",null,"conc_ie"),l.a.createElement("td",null,"Messwert von intestinalen Enterokokken [MPN/100mL]"),l.a.createElement("td",null,"Ganze Zahlen, keine Dezimalstellen")));case"discharges":case"pplantMeasurements":case"gInputMeasurements":case"globalIrradiances":return l.a.createElement(l.a.Fragment,null,l.a.createElement("tr",null,l.a.createElement("td",null,"value"),l.a.createElement("td",null,"Messwert f\xfcr ",{discharges:"Durchfluss",globalIrradiances:"Global Strahlung",pplantMeasurements:"Kl\xe4rwerk",gInputMeasurements:"Generischer Eingabe"}[t]),l.a.createElement("td",null,"Flie\xdfkommazahlen gr\xf6\xdfer gleich 0")));default:throw new Error("No default case defined")}}())),l.a.createElement("p",null,"Fehlende Messwerte m\xfcssen mit ",l.a.createElement("code",null,"-1")," eingef\xfcgt werden.")),(void 0===a||!0===a)&&l.a.createElement(_a,null))},Fa=function(e){var t=e.type,a=l.a.useState(!1),n=Object(m.a)(a,2),r=n[0],i=n[1];return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"buttons"},l.a.createElement(Rt,{text:"Mehr erfahren",handleClick:function(e){e.preventDefault(),i((function(e){return!e}))}},l.a.createElement(pe,null))),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"Die Dateneingabe muss \xfcber eine CSV.-Datei (Comma Seperated Value) erfolgen, dass wiederum einem bestimmten Format gen\xfcgen muss, um von der Plattform eingelesen werden zu k\xf6nnen.")),r?l.a.createElement(Pa,{type:t,title:"\xaf\\_(\u30c4)_/\xaf"}):null)},za=function(e){var t=e.dataIsValid,a=e.title,n=e.unboxed;return l.a.createElement("div",{className:"".concat(!0===n?"":"box box__info")},l.a.createElement("div",{className:"content"},l.a.createElement("p",null,!0===t?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,l.a.createElement(De,null))," ",l.a.createElement("strong",null,a,": Alle Daten sind valide und bereit f\xfcr den Upload")):!1===t?l.a.createElement(l.a.Fragment,null,l.a.createElement("span",null,l.a.createElement(xe,null))," ",l.a.createElement("strong",null,a,": Fehler in ihren Daten. Bitte \xfcberpr\xfcfen sie diese nochmals.")):l.a.createElement("span",null,"Laden Sie ihre Daten hier hoch"))))};function Ra(e){return new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}function Ma(e,t){return e.filter((function(e,a,n){return n.map((function(e){return e[t]})).indexOf(e[t])===a}))}za.displayName="DataValidationInfoBox";var Ba=new Date,Ua=Ba.getFullYear(),La=Ba.getMonth()+1,Ha=Ba.getDate(),Va=Ba.getHours(),Wa=Ba.getMinutes(),Ga=Ba.getSeconds(),qa=function(e){var t=e.type;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"CSV Einzigartige Werte Report"),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"In Ihrem CSV sind Duplikate enthalten. F\xfcr die Zeile"," ",l.a.createElement("code",null,'"date"')," (YYY-MM-DD) d\xfcrfen nur einzigeartige Daten eingetragen sein. Falls sie mehrere Messwerte pro Tag angeben m\xf6chten m\xfcssen Sie einen Zeitstempel im Format HH:MM:SS enthalten sein.",l.a.createElement("br",null),l.a.createElement("strong",null,"Zum Beispiel:")),l.a.createElement("table",{className:"table"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"date"),"measurements"===t?l.a.createElement(l.a.Fragment,null,l.a.createElement("th",null,"conc_ec"),l.a.createElement("th",null,"conc_ie")):l.a.createElement("th",null,"value"))),l.a.createElement("tbody",null,[0,1,2].map((function(e){return l.a.createElement("tr",{key:e},l.a.createElement("td",null,function(e){return"".concat(Ua,"-").concat(La.toString().padStart(2,"0"),"-").concat(Ha.toString().padStart(2,"0")," ").concat(Va.toString().padStart(2,"0"),":").concat(Wa.toString().padStart(2,"0"),":").concat(((Ga+e)%60).toString().padStart(2,"0"))}(e)),"measurements"===t?l.a.createElement(l.a.Fragment,null,l.a.createElement("td",null,Math.floor(1e3*Math.random())),l.a.createElement("td",null,Math.floor(1e3*Math.random()))):l.a.createElement("td",null,Math.floor(1e3*Math.random())))}))))))},Ka=function(){return l.a.createElement("div",{className:"content",style:{paddingTop:"1rem"}},l.a.createElement("p",null,"Automatisierte Datenaggregation ",l.a.createElement("br",null),"Um Daten automatisiert f\xfcr ihre Badestelle bereit zu stellen, m\xfcssen sie eine \xf6ffentlich zug\xe4ngliche http URL eintragen, die t\xe4glich um 09:00 abgeholt werden kann."))};Ka.displayName="InfoDataAggregation";var Qa=function(e){var t=e.title,a=e.schema,n=e.props,i=e.fieldNameFile,c=e.fieldNameUrl,s=e.type,o=e.unboxed,p=e.addionalClassNames,h=e.hasNoUrlField,g=n.setFieldValue,E=Object(r.useState)(void 0),f=Object(m.a)(E,2),b=f[0],v=f[1],y=Object(r.useState)([]),w=Object(m.a)(y,2),k=w[0],S=w[1],N=Object(r.useState)(void 0),O=Object(m.a)(N,2),I=O[0],C=O[1],D=Object(r.useState)(void 0),x=Object(m.a)(D,2),A=x[0],_=x[1],P=Object(r.useState)(void 0),F=Object(m.a)(P,2),z=F[0],R=F[1],M=Object(r.useState)(),B=Object(m.a)(M,2),U=B[0],H=B[1],V=Object(r.useState)(void 0),W=Object(m.a)(V,2),G=W[0],q=W[1],K=Object(r.createRef)(),Q=Object(r.createRef)();Object(r.useEffect)((function(){void 0!==A&&(A.length<=0||g(i,A))}),[A,i,g]),Object(r.useEffect)((function(){void 0!==z&&!0===Ra(z)&&g(c,z)}),[z,c,g]),Object(r.useEffect)((function(){void 0!==U&&function(){var e=Object(d.a)(u.a.mark((function e(){var t,n,r,l,i;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={delimiter:"",dynamicTyping:!0,header:!0,skipEmptyLines:!0},e.next=4,Aa(U,t);case 4:n=e.sent,v(n.errors),r=!0,q(0===n.errors.length),l=0;case 9:if(!(l<n.data.length)){e.next=23;break}return i=n.data[l],e.prev=11,e.next=14,a.validate(i);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(11),function(){r=!1;var t={row:l+1,message:e.t0.message};S((function(e){return[].concat(Object(j.a)(e),[t])}))}();case 19:l===n.data.length-1&&!0===r&&(_(n.data),q(!0));case 20:l++,e.next=9;break;case 23:q(r),Ma(n.data,"date").length<n.data.length?(C(!1),q(!1)):(C(void 0),q(!0)),e.next=31;break;case 28:throw e.prev=28,e.t1=e.catch(0),e.t1;case 31:case"end":return e.stop()}}),e,null,[[0,28],[11,16]])})));return function(){return e.apply(this,arguments)}}()().catch((function(e){console.error(e)}))}),[U,a]);var Z=l.a.createElement("div",{className:"".concat(p||"")},l.a.createElement(Fa,{type:s}),l.a.createElement(va,{name:i,type:"file",label:"Datei ausw\xe4hlen\u2026",disabled:!1,handleClearClick:function(e){e.preventDefault(),q(void 0),H(void 0),_(void 0),g(i,[]),S([]),v([]),C(void 0)},onChange:function(e){if(S([]),v([]),C(void 0),!(null===e.currentTarget.files||e.currentTarget.files.length<1)){var t=e.currentTarget.files[0];H(t)}}}),k.length>0&&function(e,t){return l.a.createElement(l.a.Fragment,null,l.a.createElement("h3",null,"CSV Daten Report"),l.a.createElement(ja,{buttonId:"csv-data-clip",csvValidationRef:e}),l.a.createElement("table",{className:"table",ref:e},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,"Fehler Nummer"),l.a.createElement("th",null,"In Zeile"),l.a.createElement("th",null,"Beschreibung"))),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement("tr",{key:t},l.a.createElement("td",null,t),l.a.createElement("td",null,e.row),l.a.createElement("td",null,e.message))})))))}(K,k),void 0!==b&&b.length>0&&Ca(Q,b),(void 0!==I||!0===I)&&l.a.createElement(qa,{type:s}),!0===h?null:l.a.createElement(l.a.Fragment,null,l.a.createElement(Ka,null),l.a.createElement("div",{className:"field is-horizontal"},l.a.createElement("div",{className:"field-label is-normal"},l.a.createElement("label",{htmlFor:c,className:"label"},"http(s) url:")),l.a.createElement("div",{className:"field-body"},l.a.createElement("div",{className:"field has-addons"},l.a.createElement("div",{className:"control is-expanded"},l.a.createElement(T.b,{type:"input",name:c,className:"input is-small",id:c,"data-testid":"test-input-".concat(c),onChange:function(e){R(e.currentTarget.value),n.setFieldValue(c,e.currentTarget.value)}}),l.a.createElement(T.a,{name:c,component:"div",className:"help is-danger"})),l.a.createElement("div",{className:"control"}),l.a.createElement("div",{className:"control"},l.a.createElement("button",{className:"button is-small",onClick:function(e){e.preventDefault(),R(void 0),g(c,"")}},"URL entfernen")))))));return l.a.createElement(l.a.Fragment,null,void 0!==G&&l.a.createElement(za,{title:t,dataIsValid:G,unboxed:o}),!0===o?Z:l.a.createElement(L,{title:t},Z))},Za=a(30),Ja=(Za.object().shape({name:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").required("Nicht optional"),nameLong:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),water:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),district:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),street:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),postalCode:Za.number().positive().integer().nullable(),city:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),healthDepartment:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),healthDepartmentAddition:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),healthDepartmentStreet:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),healthDepartmentPostalCode:Za.number().positive().integer().nullable(),healthDepartmentCity:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),healthDepartmentMail:Za.string().email("Bitte geben Sie eine valide E-Mail an").nullable(),healthDepartmentPhone:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),waterRescueThroughDLRGorASB:Za.boolean().nullable(),waterRescue:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),lifeguard:Za.boolean().nullable(),hasDisabilityAccesableEntrence:Za.boolean().nullable(),disabilityAccess:Za.boolean().nullable(),disabilityAccessBathrooms:Za.boolean().nullable(),restaurant:Za.boolean().nullable(),snack:Za.boolean().nullable(),parkingSpots:Za.boolean().nullable(),cyanoPossible:Za.boolean().nullable(),bathrooms:Za.boolean().nullable(),bathroomsMobile:Za.boolean().nullable(),dogban:Za.boolean().nullable(),website:Za.string().url("Bitte geben Sie eine valide url ein").nullable(),lastClassification:Za.string().nullable(),image:Za.string().url("Bitte geben Sie eine valide url ein").nullable(),apiEndpoints:Za.string().nullable(),latitude:Za.number().min(-90,"Kleiner als -90").max(90,"Gr\xf6\xdfer als 90").required("Bitte geben sie einen Wert f\xfcr Latitide ein (z.B. 13.0123)"),longitude:Za.number().min(-180,"Kleiner als -180").max(180,"Gr\xf6\xdfer als 180").required("Bitte geben sie einen Wert f\xfcr Longitude ein (z.B. 52.0123)"),elevation:Za.number().nullable(),region:Za.string().min(3,"Mehr als drei Buchstaben").max(255,"Nicht mehr als 255 Buchstaben").nullable(),influencePurificationPlant:Za.string().default("unknown"),influenceCombinedSewerSystem:Za.string().default("unknown"),influenceRainwater:Za.string().default("unknown"),influenceAgriculture:Za.string().default("unknown")}),Za.object().shape({date:Za.date().required("Kein valides datum"),conc_ie:Za.number().required("Kein integer >= -1"),conc_ec:Za.number().required("Kein integer >= -1")})),Ya=Za.object().shape({date:Za.date().required("Kein valides datum"),value:Za.number().required("Kein Flie\xdfkommawert >= -1")}),Xa=Za.object().shape({name:Za.string().min(3,"Der Name ist zu kurz.").max(50,"Der Name ist zu lang.").required("Required"),url:Za.string().url("Keine valide URL.").nullable()}),$a=Za.object().shape({purificationPlants:Za.array().of(Za.object().shape({name:Za.string().min(3,"Der Name ist zu kurz.").max(50,"Der Name ist zu lang.").required("Required"),url:Za.string().url("Keine valide URL.").nullable()}))}),en=function(e){var t=e.initialValues,a=e.handeCloseClick,n=e.handleInfoClick,r=e.spotId,i=e.uploadType,c=e.resourceTitle,s=Ye(),o=Object(m.a)(s,2),h=o[0],g=o[1],E=B(),f=E.user,b=E.getTokenSilently,w=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,l,i,c,s,o,d,m,h,E,w,k;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.measurements,n=t.measurementsUrl,l=t.globalIrradiance,i=t.globalIrradianceUrl,c=t.discharges,s=t.dischargesUrl,e.next=4,b();case 4:o=e.sent,d="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(f.pgapiData.id,"/").concat(v.bathingspots,"/").concat(r),m="".concat(d,"/").concat(v.globalIrradiances),h="".concat(d,"/").concat(v.discharges),E="".concat(d,"/").concat(v.measurements),w=[],a.length>0&&w.push(p({body:a,token:o,url:E,method:"POST",resource:"measurements"})),l.length>0&&w.push(p({body:l,token:o,url:m,method:"POST",resource:"globalIrradiances"})),c.length>0&&w.push(p({body:c,token:o,url:h,method:"POST",resource:"discharges"})),k={},void 0!==n&&!0===Ra(n)&&(k=Object(Y.a)(Object(Y.a)({},k),{},{measurementsUrl:n})),void 0!==i&&!0===Ra(i)&&(k=Object(Y.a)(Object(Y.a)({},k),{},{globalIrradianceUrl:i})),void 0!==s&&!0===Ra(s)&&(k=Object(Y.a)(Object(Y.a)({},k),{},{dischargesUrl:s})),Object.keys(k).length>0&&w.push(p({body:{apiEndpoints:k},url:d,token:o,method:"PUT",resource:"bathingspot"})),w.length>0&&w.forEach((function(e){Xe(g,e)})),e.next=24;break;case 21:throw e.prev=21,e.t0=e.catch(0),e.t0;case 24:case"end":return e.stop()}}),e,null,[[0,21]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,c&&l.a.createElement("h1",null,c),l.a.createElement(T.e,{initialValues:t,enableReinitialize:!0,onSubmit:function(e,t){var n=t.setSubmitting;w(e).catch((function(e){throw e})),n(h.loading),a()}},(function(e){return l.a.createElement(T.d,null,l.a.createElement($e,{props:e,handleCancelClick:a,infoModalClickHandler:n}),function(){switch(i){case"measurements":return l.a.createElement(Qa,{unboxed:!0,fieldNameFile:"measurements",fieldNameUrl:"measurementsUrl",props:e,schema:Ja,title:"Messwerte EC/IC",type:"measurements"});case"globalIrradiances":return l.a.createElement(Qa,{unboxed:!0,fieldNameFile:"globalIrradiance",fieldNameUrl:"globalIrradianceUrl",props:e,schema:Ya,title:"Messwerte Global Strahlung",type:"globalIrradiances"});case"discharges":return l.a.createElement(Qa,{unboxed:!0,fieldNameFile:"discharges",fieldNameUrl:"dischargesUrl",props:e,schema:Ya,title:"Messwerte Durchfluss",type:"discharges"});default:throw new Error("Upload type needs to be one of 'measurements' | 'discharges' | 'globalIrradiances'")}}())})))},tn=function(e){var t=e.measurements,a=e.unit,n=e.hasAutoData;return l.a.createElement(ta,null,l.a.createElement(aa,null,function(){if(void 0===t||0===t.length)return l.a.createElement(na,{th:"k. A.",tds:[""]});var e={day:"numeric",month:"short",weekday:"short",year:"numeric"},r=t.sort(ea),i=$t(r,5).reverse().map((function(t,n){var r=["".concat(sa(t.value,2)," ").concat(a)];return l.a.createElement(na,{key:n,th:ca(t.date,e),tds:r})}));return i.push(l.a.createElement(na,{key:6,th:"Automatisiert",tds:[ua(void 0!==n,void 0,!0)]})),i}()))};tn.displayName="DefaultTable";var an=a(145),nn=a(519),rn=function(e){var t=e.initialValues,a=e.spotId,n=e.handeCloseClick,i=e.handleInfoClick,c=e.title,s=e.uploadBoxResourceType,o=e.resourceType,h=e.validationSchema,g=B(),E=g.user,f=g.getTokenSilently,b=Ye(),w=Object(m.a)(b,2)[1],k=Object(r.useState)(!1),S=Object(m.a)(k,2),N=S[0],O=S[1],j=Object(r.useState)({collection:[]}),I=Object(m.a)(j,2),C=I[0],D=I[1];Object(r.useEffect)((function(){var e=JSON.parse(JSON.stringify(t));e.collection.forEach((function(e){e.measurements&&e.measurements.length>0&&(e.measurements=[])})),D(e)}),[]);var x=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r,l,i,c,s,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!1!==N){e.next=2;break}return e.abrupt("return");case 2:return a=t.values.collection,n=t.spotId,e.next=6,f();case 6:r=e.sent,l="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(E.pgapiData.id,"/").concat(v.bathingspots,"/").concat(n,"/").concat(o),i=[],C.collection.filter((function(e){var t,n=!1,r=Object(an.a)(a);try{for(r.s();!(t=r.n()).done;){var l=t.value;if(e.id===l.id){n=!0;break}}}catch(i){r.e(i)}finally{r.f()}return!0===n?null:e})).forEach((function(e){i.push(p({body:{},token:r,url:"".concat(l,"/").concat(e.id),method:"DELETE",resource:o}))})),C.collection.forEach((function(e,t){a.forEach((function(t,a){if(t.id===e.id){var n={};Object(nn.observableDiff)(e,t,(function(e){void 0!==e.path&&Object(nn.applyChange)(n,t,e)})),Object.keys(n).length>0&&i.push(p({body:n,token:r,url:"".concat(l,"/").concat(e.id),method:"PUT",resource:o}))}}))})),c=Object(an.a)(a),e.prev=13,c.s();case 15:if((s=c.n()).done){e.next=22;break}if(void 0===(d=s.value).id){e.next=19;break}return e.abrupt("continue",20);case 19:i.push(p({body:d,token:r,url:l,method:"POST",resource:o}));case 20:e.next=15;break;case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(13),c.e(e.t0);case 27:return e.prev=27,c.f(),e.finish(27);case 30:i.length>0&&i.forEach((function(e){Xe(w,e)}));case 31:case"end":return e.stop()}}),e,null,[[13,24,27,30]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(T.e,{initialValues:C,validationSchema:h,enableReinitialize:!0,onSubmit:function(e,t){t.setSubmitting(!0),x({values:e,spotId:a}),n()}},(function(e){return O(e.dirty),l.a.createElement(T.d,null,l.a.createElement($e,{props:e,handleCancelClick:n,infoModalClickHandler:i}),l.a.createElement(T.c,{name:"collection",render:function(t){if(e.values.collection&&e.values.collection.length>0){var a=e.values.collection.map((function(a,n){return null===a.url&&(a.url=""),l.a.createElement("div",{key:n},l.a.createElement(H,{label:"Name",type:"text",name:"collection[".concat(n,"].name")},l.a.createElement(Rt,{text:"".concat(c," entfernen"),handleClick:function(){return t.remove(n)}},l.a.createElement(Fe,null))),l.a.createElement(H,{label:"http (s) url",type:"text",name:"collection[".concat(n,"].url")},l.a.createElement(Rt,{text:"".concat(c," entfernen"),additionalClassNames:"is-invisible"}," ",l.a.createElement(Fe,null))),l.a.createElement(Qa,{addionalClassNames:"add-padding-top",hasNoUrlField:!0,unboxed:!0,title:"Messdaten hochladen",fieldNameFile:"collection[".concat(n,"].measurements"),fieldNameUrl:"url",type:s,props:e,schema:Ya}),function(){if(n!==e.values.collection.length-1)return l.a.createElement("hr",null)}())}));return l.a.createElement(L,{title:c},l.a.createElement("div",{className:"buttons"}," ",l.a.createElement(Rt,{text:"".concat(c," hinzuf\xfcgen"),handleClick:function(){return t.insert(e.values.collection.length,{name:"",url:""})}},l.a.createElement(Pe,null))),l.a.createElement("hr",null),a)}return l.a.createElement(l.a.Fragment,null,l.a.createElement(L,{title:c},l.a.createElement("div",{className:"buttons"},l.a.createElement(Rt,{text:"".concat(c," hinzuf\xfcgen"),type:"button",handleClick:function(){return t.push({name:"",url:""})}},l.a.createElement(Pe,null)))))}}))})))},ln=function(e){var t=e.items,a=e.setData,n=e.setTitle,r=e.setSubItemId,i=e.handleEditClick,c=e.editButtonText;return void 0===t?l.a.createElement(ta,null,l.a.createElement(aa,null,l.a.createElement(na,{th:"k. A.",tds:[""]}))):l.a.createElement(ta,null,l.a.createElement(aa,null,t.map((function(e,t){return l.a.createElement(la,{editButtonText:c,key:t,th:e.name.length>17?"".concat(e.name.substring(0,16),"\u2026"):e.name,handleEditClick:function(t){null===t||void 0===t||t.preventDefault(),n("".concat(e.name).concat(e.url?" || "+e.url.replace(/http(s)?:\/\//,"").substring(0,13)+"\u2026":"")),a(e.measurements),r(e.id),i()},tds:["Daten",e.measurements?"".concat(e.measurements.length):"k. A.","Autom.: ".concat(e.url?"\u2713":"\u2718")]})}))))},cn=a(419);var sn=l.a.forwardRef((function(e,t){var a=e.indeterminate,n=Object(I.a)(e,["indeterminate"]),r=l.a.useRef(),i=t||r;return l.a.useEffect((function(){i.current.indeterminate=a}),[i,a]),l.a.createElement(l.a.Fragment,null,l.a.createElement("input",Object.assign({type:"checkbox",ref:i},n)))})),on=function(e){var t=e.handleCancelClick,a=e.handleConfirmClick,n=e.isActive;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:n?"modal is-active":"modal"},l.a.createElement("div",{className:"modal-background"}),l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"box"},l.a.createElement("h3",{className:"is-title is-3"},"Daten l\xf6schen"),l.a.createElement("p",{className:"is-subtitle"},"Sind Sie sicher, dass sie diese Daten l\xf6schen wollen?"),l.a.createElement("div",{className:"content"},l.a.createElement("p",{className:"is-small"},l.a.createElement("em",null,"(Dieser Vorgang kann nicht r\xfcckg\xe4ngig gemacht werden)")),l.a.createElement("div",{className:"buttons"},l.a.createElement("button",{onClick:t,"aria-label":"close",className:"modal-close"}),l.a.createElement("button",{onClick:t,className:"button is-small"}," ","Ups. Besser nicht."),l.a.createElement("button",{onClick:a,className:"button is-small is-danger"},"Ja sicher!")))))))},un=function(e){var t=e.handleCancelClick,a=e.intitalValues,n=e.reqType,i=e.resourceType,c=e.spotId,s=e.userId,o=e.subItemId,h=e.handleSubmitClose,g=e.resourceTitle;if(void 0===n)throw new Error("Request type needs to be POST or PUT");if(void 0===o&&"PUT"===n)throw new Error("subItemId needs to be defined");var E=Ye(),f=Object(m.a)(E,2)[1],b=B().getTokenSilently,w=Object(r.useState)(!0),k=Object(m.a)(w,2),S=k[0],N=k[1],O="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(s,"/").concat(v.bathingspots,"/").concat(c,"/").concat("genericInputs"===i||"gInputMeasurements"===i?"genericInputs":"purificationPlants"),j=function(){var e=Object(d.a)(u.a.mark((function e(t,a){var r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b();case 3:r=e.sent,l=p({url:O,method:n,resource:i,body:{url:a,name:t},token:r}),Xe(f,l),h(),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),I=function(){var e=Object(d.a)(u.a.mark((function e(t,a){var r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b();case 3:r=e.sent,l=p({url:"".concat(O,"/").concat(o),method:n,resource:"gInputMeasurements"===i?"genericInputs":"purificationPlants",body:{url:a,name:t},token:r}),Xe(f,l),h(),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),C=a||{url:"",name:""};return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt,null,g&&l.a.createElement("h1",null,g),l.a.createElement(T.e,{initialValues:C,validationSchema:Xa,onSubmit:function(e,t){t.setSubmitting(!1),"POST"===n&&j(e.name,e.url).then((function(){})).catch((function(e){console.error(e)})),"PUT"===n&&I(e.name,e.url).then((function(){})).catch((function(e){console.error(e)}))}},(function(e){return l.a.createElement(T.d,null,l.a.createElement($e,{props:e,handleCancelClick:t,infoModalClickHandler:function(){N((function(e){return!e}))}}),l.a.createElement(H,{label:"Name *",type:"text",name:"name"}),l.a.createElement(H,{label:"http(s) URL",type:"text",name:"url"}),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,l.a.createElement("em",null,"* Ist ben\xf6tigt"))))}))),l.a.createElement(nt,null,S&&l.a.createElement(_a,null)))},dn=function(e){e.title;var t=e.schema,a=e.props,n=e.fieldNameFile,i=e.fieldNameUrl,c=e.type,s=(e.unboxed,e.addionalClassNames,e.hasNoUrlField,e.existingData),o=a.setFieldValue,p=Object(r.useState)(void 0),h=Object(m.a)(p,2),g=h[0],E=h[1],f=Object(r.useState)(void 0),b=Object(m.a)(f,2),v=b[0],y=b[1],w=Object(r.useState)(void 0),k=Object(m.a)(w,2),S=k[0],N=k[1],O=Object(r.useState)(void 0),I=Object(m.a)(O,2),T=I[0],C=I[1],D=Object(r.useState)(void 0),x=Object(m.a)(D,1)[0],A=Object(r.useState)(),_=Object(m.a)(A,2),P=_[0],F=_[1],z=Object(r.useState)(void 0),R=Object(m.a)(z,2),M=R[0],B=R[1],U=Object(r.createRef)(),L=Object(r.createRef)();return Object(r.useEffect)((function(){void 0!==T&&(T.length<=0||o(n,T))}),[T,n,o]),Object(r.useEffect)((function(){void 0!==x&&!0===Ra(x)&&o(i,x)}),[x,i,o]),Object(r.useEffect)((function(){void 0!==P&&function(){var e=Object(d.a)(u.a.mark((function e(){var a,n,r,l,i,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={delimiter:"",dynamicTyping:!0,header:!0,trimHeaders:!0,skipEmptyLines:!0,transform:function(e){return e.trim()},transformHeader:function(e){return e.trim()}},e.next=4,Aa(P,a);case 4:n=e.sent,console.log(n,"parsing result"),E(n.errors),r=!0,l=0;case 9:if(!(l<n.data.length)){e.next=23;break}return i=n.data[l],e.prev=11,e.next=14,t.validate(i);case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(11),function(){r=!1;var t={row:l+1,message:e.t0.message};y((function(e){var a=e||[];return[].concat(Object(j.a)(a),[t])}))}();case 19:l===n.data.length-1&&!0===r&&(C(n.data),B(!0));case 20:l++,e.next=9;break;case 23:B(0===n.errors.length),Ma(n.data,"date").length<n.data.length?(N(!1),B(!1)):(N(void 0),B(!0),void 0!==s&&(s.forEach((function(e,t,a){a[t].date=e.date.replace("T"," ").replace(/\.\d\d\dZ$/,"")})),c=[].concat(Object(j.a)(n.data),Object(j.a)(s)),Ma(c,"date").length<c.length&&(N(!1),B(!1)))),e.next=31;break;case 28:throw e.prev=28,e.t1=e.catch(0),e.t1;case 31:case"end":return e.stop()}}),e,null,[[0,28],[11,16]])})));return function(){return e.apply(this,arguments)}}()().catch((function(e){console.error(e)}))}),[P,t,s]),l.a.createElement(l.a.Fragment,null,void 0!==M&&l.a.createElement(nt,{columnClassName:""},l.a.createElement(za,{title:"",dataIsValid:M,unboxed:!0})),l.a.createElement(nt,{columnClassName:""},l.a.createElement(va,{name:n,type:"file",label:"Datei ausw\xe4hlen\u2026",disabled:!1,handleClearClick:function(e){e.preventDefault(),B(void 0),F(void 0),C(void 0),o(n,[]),y([]),E([]),N(void 0)},onChange:function(e){if(y([]),E([]),N(void 0),!(null===e.currentTarget.files||e.currentTarget.files.length<1)){var t=e.currentTarget.files[0];F(t)}}})),l.a.createElement(nt,{columnClassName:""},void 0!==v&&v.length>0&&l.a.createElement(Ia,{csvValidationRef:U,csvValidationErrors:v}),void 0!==g&&g.length>0&&l.a.createElement(Ta,{papaParseValidationRef:L,parsingErrors:g}),(void 0!==S||!0===S)&&l.a.createElement(qa,{type:c})))},mn=function(e){var t=e.userId,a=e.spotId,n=e.subItemId,i=e.resourceType,c=e.handleCancelClick,s=e.handleSubmitClose,o=e.resourceTitle;if(void 0===n)throw new Error("subItemId needs to be defined");var h="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(t,"/").concat(v.bathingspots,"/").concat(a),g="gInputMeasurements"===i?"Genrische Messungen":"Kl\xe4rwerk Messungen",E="".concat(h,"/").concat("gInputMeasurements"===i?"genericInputs":"purificationPlants","/").concat(n,"/").concat(v.measurements),f=Ye(),b=Object(m.a)(f,2),w=b[0],k=b[1],S=Object(r.useState)([]),N=Object(m.a)(S,2),O=N[0],j=N[1],I=Object(r.useState)(!0),C=Object(m.a)(I,2),D=C[0],x=C[1],A=B().getTokenSilently;Object(r.useEffect)((function(){var e=w.spots.filter((function(e){return e.id===a}));if(0!==e.length){var t,r=e[0];switch(i){case"gInputMeasurements":var l;if(void 0===(t=null===(l=r.genericInputs)||void 0===l?void 0:l.filter((function(e){return e.id===n})))||0===t.length)return;break;case"pplantMeasurements":var c;if(void 0===(t=null===(c=r.purificationPlants)||void 0===c?void 0:c.filter((function(e){return e.id===n})))||0===t.length)return}var s=t[0].measurements;void 0!==s&&0!==s.length&&j(s)}}),[w,n,i,a]);var _=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,A();case 3:a=e.sent,n=p({url:E,method:"POST",body:t,token:a,resource:i}),Xe(k,n),s(),e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt,null,o&&l.a.createElement("h1",null,o),l.a.createElement(T.e,{initialValues:{measurements:[]},onSubmit:function(e,t){t.setSubmitting(!1),_(e.measurements).catch((function(e){console.error(e)}))}},(function(e){return l.a.createElement(T.d,null,l.a.createElement($e,{props:e,handleCancelClick:c,infoModalClickHandler:function(){x((function(e){return!e}))}}),D?l.a.createElement(Pa,{type:"gInputMeasurements"===i?"gInputMeasurements":"pplantMeasurements",title:g,showDataAggregationText:!1}):l.a.createElement("h3",{className:"is-title is-3"},"CSV Daten Upload f\xfcr ",g),l.a.createElement(dn,{existingData:O,unboxed:!0,type:"gInputMeasurements"===i?"gInputMeasurements":"pplantMeasurements",title:"Messwerte",fieldNameFile:"measurements",fieldNameUrl:"url",props:e,schema:Ya}))}))))},pn=function(e){var t=e.userId,a=e.spotId,n=e.resourceType,i=e.linkType,c=e.initialValues,s=e.handleCancelClick,o=e.handleSubmitClose,h=e.resourceTitle;if(void 0===i)throw new Error("linktype in MGDEditor is undefiend");var g=Ye(),E=Object(m.a)(g,2)[1],f=B().getTokenSilently,b=Object(r.useState)(!0),w=Object(m.a)(b,2),k=w[0],S=w[1],N="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(t,"/").concat(v.bathingspots,"/").concat(a);c=c||{};var O=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=Object(Y.a)({},c))[i]=t,e.prev=2,e.next=5,f();case 5:r=e.sent,l=p({url:N,method:"PUT",resource:n,body:{apiEndpoints:a},token:r}),Xe(E,l),o(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt,null,h&&l.a.createElement("h1",null,h),l.a.createElement(T.e,{initialValues:c,onSubmit:function(e,t){t.setSubmitting(!1);var a=e[i];void 0!==a?O(a):console.error("url not defiend in m-g-d-editor")}},(function(e){return l.a.createElement(T.d,null,l.a.createElement($e,{props:e,handleCancelClick:s,infoModalClickHandler:function(){S((function(e){return!e}))}}),l.a.createElement(H,{label:"http(s) URL",type:"text",name:i}))}))),l.a.createElement(nt,null,k&&l.a.createElement(_a,null)))},hn=function(e){var t,a=e.userId,n=e.spotId,i=e.dataType,c=e.resourceType,s=e.handleCancelClick,o=e.handleSubmitClose,h=e.title,g=e.resourceTitle,E="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(a,"/").concat(v.bathingspots,"/").concat(n),f=Object(r.useState)(!0),b=Object(m.a)(f,2),w=b[0],k=b[1],S=Ye(),N=Object(m.a)(S,2),O=N[0],j=N[1],I=Object(r.useState)([]),C=Object(m.a)(I,2),D=C[0],x=C[1],A=B().getTokenSilently,_=function(){var e=Object(d.a)(u.a.mark((function e(a){var n,r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,e.t0=i,e.next="discharges"===e.t0?4:"globalIrradiances"===e.t0?6:"measurements"===e.t0?8:9;break;case 4:return t="".concat(E,"/").concat(v.discharges),e.abrupt("break",9);case 6:return t="".concat(E,"/").concat(v.globalIrradiances),e.abrupt("break",9);case 8:t="".concat(E,"/").concat(v.measurements);case 9:return e.next=11,A();case 11:n=e.sent,r=p({url:t,method:"POST",resource:i,token:n,body:a}),Xe(j,r),o(),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(0),console.error(e.t1);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){var e=O.spots.filter((function(e){return e.id===n}));if(0!==e.length){var t,a=e[0];switch(i){case"discharges":if(void 0===(t=a.discharges)||0===t.length)return;break;case"globalIrradiances":if(void 0===(t=a.globalIrradiances)||0===t.length)return;break;case"measurements":if(void 0===(t=a.measurements)||0===t.length)return}x(t)}}),[O,c,n,i]),l.a.createElement(l.a.Fragment,null,l.a.createElement(nt,null,g&&l.a.createElement("h1",null,g),l.a.createElement(T.e,{initialValues:{measurements:[]},onSubmit:function(e,t){t.setSubmitting(!1),_(e.measurements).catch((function(e){console.error(e)}))}},(function(e){return l.a.createElement(T.d,null,l.a.createElement($e,{props:e,handleCancelClick:s,infoModalClickHandler:function(){k((function(e){return!e}))}}),w?l.a.createElement(Pa,{type:i,showDataAggregationText:!1,title:h}):l.a.createElement("h3",{className:"is-title is-3"},"CSV Daten Upload f\xfcr ",h),l.a.createElement(dn,{existingData:D,unboxed:!0,type:i,title:h,fieldNameFile:"measurements",fieldNameUrl:"url",props:e,schema:function(){switch(i){case"measurements":return Ja;case"discharges":case"globalIrradiances":return Ya}}()}))}))))},gn=a(745),En=function(e){var t=e.handleCloseClick,a=e.inData,i=e.resourceType,c=e.headerTitle,s=e.spotId,o=e.subItemId,h=e.setEditMode,g=(e.setDataEditMode,e.spotApiEndpoints),E=e.handleCalibratePredictClick,f=Ye(),b=Object(m.a)(f,2),w=b[0],k=b[1],S=ht(),N=Object(m.a)(S,1)[0],O=Object(r.useState)(void 0),I=Object(m.a)(O,2),T=I[0],C=I[1],D=Object(r.useState)(void 0),x=Object(m.a)(D,2),A=x[0],_=x[1],P=Object(r.useState)(void 0),F=Object(m.a)(P,2),R=F[0],M=F[1],U=Object(r.useState)(void 0),L=Object(m.a)(U,2),H=L[0],V=L[1],W=Object(r.useState)(void 0),G=Object(m.a)(W,2),q=G[0],K=G[1];Object(r.useEffect)((function(){if(void 0!==w&&0!==w.spots.length){var e=w.spots.filter((function(e){return e.id=s}));if(0!==e.length){var t=e[0];switch(C(t),i){case"gInputMeasurements":if(void 0===t.genericInputs||0===t.genericInputs.length)return;var a=t.genericInputs.filter((function(e){return e.id===o}));if(0===a.length)return;var n=a[0];_(n);break;case"pplantMeasurements":if(void 0===t.purificationPlants||0===t.purificationPlants.length)return;var r=t.purificationPlants.filter((function(e){return e.id===o}));if(0===r.length)return;var l=r[0];M(l)}}}}),[w,i,o,s]);var Q=function(e,t,a){var n=[],r=[];switch(t){case"models":n=[{Header:a||"DEFINE ME",columns:[{Header:"id",accessor:"id"},{Header:"createdAt",accessor:"createdAt"},{Header:"comment",accessor:"comment"},{Header:"evaluation",accessor:"evaluation"}]}],e.forEach((function(e){r.push({id:e.id,date:e.createdAt,evaluation:e.evaluation,comment:null===e.comment?"":e.comment})}));break;case"measurements":n=[{Header:a||"DEFINE ME",columns:[{Header:"id",accessor:"id"},{Header:"date",accessor:"date"},{Header:"conc_ec",accessor:"conc_ec"},{Header:"conc_ie",accessor:"conc_ie"},{Header:"comment",accessor:"comment"}]}],e.forEach((function(e){r.push({id:e.id,date:e.date,conc_ec:e.conc_ec,conc_ie:e.conc_ie,comment:null===e.comment?"":e.comment})}));break;case"discharges":case"globalIrradiances":case"gInputMeasurements":case"pplantMeasurements":case"rains":n=[{Header:a||"DEFINE ME",columns:[{Header:"id",accessor:"id"},{Header:"date",accessor:"date"},{Header:"value",accessor:"value"},{Header:"comment",accessor:"comment"}]}],e.forEach((function(e){r.push({id:e.id,date:e.date,value:e.value,comment:null===e.comment?"":e.comment})}));break;case"predictions":n=[{Header:a||"DEFINE ME",columns:[{Header:"id",accessor:"id"},{Header:"date",accessor:"date"},{Header:"prediction",accessor:"prediction"},{Header:"percentile 2.5",accessor:"percentile2_5"},{Header:"percentile 50",accessor:"percentile50"},{Header:"percentile 90",accessor:"percentile90"},{Header:"percentile 95",accessor:"percentile95"},{Header:"percentile 97.5",accessor:"percentile 97_5"},{Header:"credibleInterval 2.5",accessor:"credibleInterval 2.5"},{Header:"credibleInterval 97.5",accessor:"credibleInterval 97.5"}]}],e.forEach((function(e){r.push({id:e.id,date:e.date,prediction:e.prediction,percentile2_5:null===e.percentile2_5?"":e.percentile2_5,percentile50:null===e.percentile50?"":e.percentile50,percentile90:null===e.percentile90?"":e.percentile90,percentile95:null===e.percentile95?"":e.percentile95,percentile97_5:null===e.percentile97_5?"":e.percentile97_5,credibleInterval2_5:null===e.credibleInterval2_5?"":e.credibleInterval2_5,credibleInterval97_5:null===e.credibleInterval97_5?"":e.credibleInterval97_5})}));break;case"genericInputs":case"purificationPlants":n=[{Header:a||"DEFINE ME",columns:[{Header:"id",accessor:"id"},{Header:"name",accessor:"name"},{Header:"url",accessor:"url"}]}],e.forEach((function(e){r.push({id:e.id,name:e.name,url:e.url})}));break;default:throw new Error("Ne default resourceType for MeasurementEditor defined")}return[r,n]}(a,i,c),Z=Object(m.a)(Q,2),J=Z[0],Y=Z[1],X=Object(r.useState)(!1),$=Object(m.a)(X,2),ee=$[0],te=$[1],ae=Object(r.useState)(!1),ne=Object(m.a)(ae,2),re=ne[0],le=ne[1],ie=Object(r.useState)(!1),ce=Object(m.a)(ie,2),se=ce[0],oe=ce[1],ue=Object(r.useState)(!1),de=Object(m.a)(ue,2),me=de[0],pe=de[1],ge=Object(r.useState)(void 0),be=Object(m.a)(ge,2),ve=be[0],ye=be[1],we=Object(r.useState)(void 0),ke=Object(m.a)(we,2),Se=ke[0],Ne=ke[1],Te=Object(r.useState)(!1),Ce=Object(m.a)(Te,2),De=Ce[0],xe=Ce[1],_e=l.a.useMemo((function(){return Y}),[]),Fe=l.a.useMemo((function(){return J}),[]),ze=Object(cn.c)({columns:_e,data:Fe},cn.b,cn.a,(function(e){e.flatColumns.push((function(e){return[{id:"selection",Header:function(e){var t=e.getToggleAllRowsSelectedProps;return l.a.createElement("div",null,l.a.createElement(sn,t()))},Cell:function(e){var t=e.row;return l.a.createElement("div",null,l.a.createElement(sn,t.getToggleRowSelectedProps()))}}].concat(Object(j.a)(e))}))})),Re=ze.getTableProps,Me=ze.getTableBodyProps,Be=ze.headerGroups,Ue=ze.rows,Le=ze.prepareRow,He=ze.selectedFlatRows,Ve=ze.state.selectedRowIds,We=B(),Ge=We.user,qe=We.getTokenSilently,Ke=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,r,l,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,qe();case 3:a=e.sent,r="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(Ge.pgapiData.id,"/").concat(v.bathingspots,"/").concat(s),l="",e.t0=i,e.next="gInputMeasurements"===e.t0?9:"pplantMeasurements"===e.t0?11:13;break;case 9:return l="".concat(r,"/").concat(v.genericInputs,"/").concat(o,"/").concat(v.measurements),e.abrupt("break",15);case 11:return l="".concat(r,"/").concat(v.purificationPlants,"/").concat(o,"/").concat(v.measurements),e.abrupt("break",15);case 13:return l="".concat(r,"/").concat(i),e.abrupt("break",15);case 15:c=p({method:"DELETE",type:n.START_API_REQUEST,token:a,url:l,resource:i,body:{ids:t}}),Xe(k,c),h(!1),e.next=24;break;case 20:throw e.prev=20,e.t1=e.catch(0),console.error(e.t1),e.t1;case 24:case"end":return e.stop()}}),e,null,[[0,20]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,De&&l.a.createElement(on,{isActive:De,handleConfirmClick:function(){var e=He.map((function(e){return e.original.id}));Ke(e).catch((function(e){console.error(e)}))},handleCancelClick:function(){xe(!1)}}),me&&void 0!==ve&&l.a.createElement(hn,{userId:Ge.pgapiData.id,spotId:s,dataType:ve,resourceType:i,title:function(){switch(ve){case"discharges":return"Durchfluss Messungen";case"globalIrradiances":return"Globalstrahlung Messungen";case"measurements":return"E.C./I.C. Messungen";default:return"\xaf\\_(\u30c4)_/\xaf"}}(),handleSubmitClose:function(){h(!1)},handleCancelClick:function(){pe(!1)}}),se&&l.a.createElement(pn,{reqType:"PUT",userId:Ge.pgapiData.id,spotId:s,resourceType:i,linkType:q,initialValues:g,handleSubmitClose:function(){h(!1)},handleCancelClick:function(){oe(!1)}}),ee&&l.a.createElement(un,{userId:Ge.pgapiData.id,spotId:s,subItemId:o,resourceType:i,reqType:H,handleCancelClick:function(){te(!1)},intitalValues:Se,handleSubmitClose:function(){h(!1)}}),function(){switch(i){case"rains":case"models":case"predictions":return l.a.createElement(nt,null,l.a.createElement("div",{className:"content"},l.a.createElement("p",{className:"is-warning"},"Diese Werte werden vom Vorhersage System generiert und sollten nicht manuell bearbeitet werden.")));default:return null}}(),!0===re&&void 0!==o&&l.a.createElement(mn,{userId:Ge.pgapiData.id,spotId:s,subItemId:o,resourceType:i,handleSubmitClose:function(){h(!1)},handleCancelClick:function(){le(!1)}}),!1===ee&&!1===re&&!1===se&&!1===me&&l.a.createElement(l.a.Fragment,null," ",l.a.createElement(nt,null,l.a.createElement("div",{className:"buttons buttons__--size"},function(){switch(i){case"predictions":case"models":case"rains":var e,t,a;switch(i){case"rains":t=l.a.createElement(Oe,null),e="Regen Laden",a="calibrate";break;case"models":t=l.a.createElement(je,null),e="Modelierung",a="model";break;case"predictions":t=l.a.createElement(Ie,null),e="Vorhersage",a="predict"}return l.a.createElement(Rt,{cssId:a,handleClick:E,text:e,additionalClassNames:"model"===N.processing||"predict"===N.processing||"calibrate"===N.processing?"is-loading":""},t);case"discharges":case"measurements":case"globalIrradiances":return l.a.createElement(l.a.Fragment,null,l.a.createElement(Rt,{text:"Daten hochladen",additionalClassNames:"is-primary",handleClick:function(){ye(i),pe(!0)}},l.a.createElement(fe,null)),l.a.createElement(Rt,{text:"URL Bearbeiten",additionalClassNames:"",handleClick:function(){switch(oe(!0),i){case"discharges":K("dischargesUrl");break;case"measurements":K("measurementsUrl");break;case"globalIrradiances":K("globalIrradianceUrl")}}},l.a.createElement(Ee,null)));case"genericInputs":case"purificationPlants":return l.a.createElement(Rt,{text:"".concat("genericInputs"===i?"Gener. Werte":"Kl\xe4rwerk"," hinzuf\xfcgen"),additionalClassNames:"is-primary",handleClick:function(){te(!0),V("POST"),Ne(void 0)}},l.a.createElement(Pe,null));case"gInputMeasurements":case"pplantMeasurements":return l.a.createElement(l.a.Fragment,null,l.a.createElement(Rt,{text:"Daten hochladen",handleClick:function(){le(!0)}},l.a.createElement(fe,null)),l.a.createElement(Rt,{text:"URL/Name Bearbeiten",handleClick:function(){switch(i){case"gInputMeasurements":Ne({name:A?A.name:"Error getting name",url:null===A||void 0===A?void 0:A.url});break;case"pplantMeasurements":Ne({name:R?R.name:"Error getting name",url:null===R||void 0===R?void 0:R.url})}V("PUT"),te(!0)}}," ",l.a.createElement(Ee,null)," "));default:return null}}(),l.a.createElement(Rt,{handleClick:t,text:"Abbrechen"},l.a.createElement(he,null)),l.a.createElement(gn.CSVLink,{data:a,filename:void 0!==T?"".concat(T.name,"-").concat(i,".csv"):"".concat(i,".csv"),className:"button is-small is-badge-small"},l.a.createElement("span",{className:"icon is-small"},l.a.createElement(fe,null)),l.a.createElement("span",null,"Export")),l.a.createElement(Rt,{text:"Auswahl l\xf6schen",additionalClassNames:"is-warning",handleClick:function(e){e.preventDefault(),0!==Object.keys(Ve).length?xe(!0):alert("Es ist nichts zum l\xf6schen ausgew\xe4hlt")}},l.a.createElement(Ae,null)))),l.a.createElement(nt,{columnClassName:"is-10 table__data-view--scroll"},l.a.createElement("table",Object.assign({},Re(),{className:"table"}),l.a.createElement("thead",null,Be.map((function(e){return l.a.createElement("tr",e.getHeaderGroupProps(),e.headers.map((function(e){return l.a.createElement("th",e.getHeaderProps(e.getSortByToggleProps()),e.render("Header"),l.a.createElement("span",null,e.isSorted?e.isSortedDesc?" \u2193":" \u2191":""))})))}))),l.a.createElement("tbody",Me(),Ue.map((function(e,t){return Le(e),l.a.createElement("tr",e.getRowProps(),e.cells.map((function(e){return l.a.createElement("td",e.getCellProps(),e.render("Cell"))})))})))))))},fn=[{title:"Badestelle",url:"",resource:"bathingspots"},{title:"Vorhersage",resource:"predictions",url:""},{title:"Modelle",resource:"models",url:""},{title:"Regenradar",resource:"rains",url:""},{title:"Mikrobiologie",resource:"measurements",url:""},{title:"Durchfluss",resource:"discharges",url:""},{title:"Globalstrahlung",resource:"globalIrradiances",url:""}],bn="".concat(z,"/").concat(y.v1,"/public/").concat(v.bathingspots),vn=function(e){var t=e.spotId,a=e.genericInputs,n=e.purificationPlants,r=fn.map((function(e){switch(e.resource){case"bathingspots":e.url="".concat(bn,"/").concat(t);break;default:e.url="".concat(bn,"/").concat(t,"/").concat(e.resource)}return e}));if(a){var i=a.map((function(e){return{title:e.name,url:"".concat(bn,"/").concat(t,"/").concat(v.genericInputs,"/").concat(e.id,"/").concat(v.measurements),resource:"genericInputs"}}));r.push.apply(r,Object(j.a)(i))}if(n){var c=n.map((function(e){return{title:e.name,url:"".concat(bn,"/").concat(t,"/").concat(v.purificationPlants,"/").concat(e.id,"/").concat(v.measurements),resource:"purificationPlants"}}));r.push.apply(r,Object(j.a)(c))}return l.a.createElement(l.a.Fragment,null,l.a.createElement(ta,null,l.a.createElement(aa,null,r.map((function(e,t){return l.a.createElement(ra,{key:t,th:e.title,url:e.url,content:e.url})})))))},yn=function(e){var t=e.match,a=B(),i=a.user,c=a.isAuthenticated,s=a.getTokenSilently,o=ht(),h=Object(m.a)(o,2),g=h[0],E=h[1],f=Ye(),b=Object(m.a)(f,2),w=b[0],j=b[1],I=Ct(),T=Object(m.a)(I,2)[1],C=zt(),D=Object(m.a)(C,2)[1],x=bt(),A=Object(r.useState)(!1),_=Object(m.a)(A,2),P=_[0],F=_[1],R=Object(r.useState)(!1),M=Object(m.a)(R,2),U=M[0],L=M[1],H=Object(r.useState)(!1),V=Object(m.a)(H,2),W=V[0],G=V[1],q=Object(r.useState)(void 0),K=Object(m.a)(q,2),Q=K[0],Z=K[1],J=Object(r.useState)(!1),Y=Object(m.a)(J,2),X=Y[0],$=Y[1],ee=Object(r.useState)(!1),te=Object(m.a)(ee,2),ae=te[0],ne=te[1],re=Object(r.useState)(!0),le=Object(m.a)(re,2),ie=le[0],ce=le[1],se=Object(r.useState)([]),oe=Object(m.a)(se,2),ue=oe[0],de=oe[1],me=Object(r.useState)(void 0),pe=Object(m.a)(me,2),he=pe[0],ge=pe[1],Ee=Object(r.useState)(!1),fe=Object(m.a)(Ee,2),be=fe[0],ve=fe[1],ye=Object(r.useState)(),we=Object(m.a)(ye,2),ke=we[0],Se=we[1],Ne=Object(r.useState)(),Oe=Object(m.a)(Ne,2),je=Oe[0],Ie=Oe[1],Te=Object(r.useState)(void 0),Ce=Object(m.a)(Te,2),De=Ce[0],xe=Ce[1],Ae=Object(r.useState)(void 0),_e=Object(m.a)(Ae,2),Pe=_e[0],Fe=_e[1],ze=Object(r.useState)(void 0),Re=Object(m.a)(ze,2),Me=Re[0],Be=Re[1],Ue=Object(r.useState)(void 0),Le=Object(m.a)(Ue,2),He=Le[0],Ve=Le[1],We=Object(r.useState)(void 0),Ge=Object(m.a)(We,2),qe=Ge[0],Ke=Ge[1],Qe=Object(r.useRef)(null),Ze=O(Qe),Je=function(e){e&&e.preventDefault(),L(!U)},$e=function(e){e&&e.preventDefault(),G(!W)},et=function(e){var t;null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e),$(!X)},lt=function(e){var t;null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e),ne(!ae)},ct=function(e){var t;null===e||void 0===e||null===(t=e.preventDefault)||void 0===t||t.call(e),ce(!ie)},st=function(e){e&&e.preventDefault(),ve(!be)},ot=function(e){if(void 0!==Me)switch(e.currentTarget.id){case"sleep":case"predict":case"model":case"calibrate":var t;t={spot_id:Me.id,user_id:i.pgapiData.id},"sleep"===e.currentTarget.id&&(t={seconds:5});var a={type:"START_OCPU_REQUEST",payload:{url:"/middlelayer/".concat(e.currentTarget.id),processingType:e.currentTarget.id,config:{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)}}};mt(E,a);break;default:throw new Error("Target for button not defined")}};return Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s();case 3:t=e.sent,Ie(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[s,Ie]),Object(r.useEffect)((function(){Me&&D({type:"SET_SPOT",payload:Me})}),[Me,D]),Object(r.useEffect)((function(){g.responses.forEach((function(e){void 0!==e.success&&void 0!==e.message&&T({type:"ADD_MESSAGE",payload:{message:String(e.message),type:!0===e.success?"normal":"error"}})}))}),[g.responses,T]),Object(r.useEffect)((function(){void 0!==w.error&&T({type:"ADD_MESSAGE",payload:{message:String(w.error.message),type:"error"}})}),[w.error,T]),Object(r.useEffect)((function(){var e=k.a.get("flusshygiene"),t="";if(void 0!==e){var a=decodeURI(e),n=/:(.*?)\./.exec(a);null!==n&&(t=n[1])}x.events.length>0&&x.events.forEach((function(e){t===e.sessionID&&(e.hasOwnProperty("event")&&"response"===e.event&&e.hasOwnProperty("payload")&&e.payload.hasOwnProperty("message")&&(Array.isArray(e.payload.message)?e.payload.message.forEach((function(e){T({type:"ADD_MESSAGE",payload:{message:e,type:/error/gim.test(e)?"error":"normal"}})})):T({type:"ADD_MESSAGE",payload:{message:e.payload.message,type:/error/gim.test(e.payload.message)?"error":"normal"}})))}))}),[x,T]),Object(r.useEffect)((function(){var e,t;void 0!==w.error&&T({type:"ADD_MESSAGE",payload:{message:JSON.stringify(null===(e=w.error)||void 0===e||null===(t=e.error)||void 0===t?void 0:t.message),type:"error"}})}),[w.error,T]),Object(r.useEffect)((function(){if(void 0!==je&&void 0!==i.pgapiData){var e="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(i.pgapiData.id,"/").concat(v.bathingspots,"/").concat(t.params.id),a=[];a.push(p({body:{},token:je,method:"GET",url:e,type:n.START_API_REQUEST,resource:"bathingspot"})),a.length>0&&a.forEach((function(e){Xe(j,e)}))}}),[je,j,t.params.id,i.pgapiData,w.reload,x]),Object(r.useEffect)((function(){if(void 0!==je&&void 0!==i.pgapiData){var e="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(i.pgapiData.id,"/").concat(v.bathingspots,"/").concat(t.params.id),a=[];a.push(p({body:{},token:je,method:"GET",url:"".concat(e,"/").concat(v.measurements),type:n.START_API_REQUEST,resource:"measurements"})),a.push(p({body:{},token:je,method:"GET",url:"".concat(e,"/").concat(v.models),type:n.START_API_REQUEST,resource:"models"})),a.push(p({body:{},token:je,method:"GET",url:"".concat(e,"/").concat(v.predictions),type:n.START_API_REQUEST,resource:"predictions"})),a.push(p({body:{},token:je,method:"GET",url:"".concat(e,"/").concat(v.globalIrradiances),type:n.START_API_REQUEST,resource:"globalIrradiances"})),a.push(p({body:{},token:je,method:"GET",url:"".concat(e,"/").concat(v.discharges),type:n.START_API_REQUEST,resource:"discharges"})),a.push(p({body:{},token:je,method:"GET",url:"".concat(e,"/").concat(v.rains),type:n.START_API_REQUEST,resource:"rains"})),a.push(p({body:{},token:je,method:"GET",url:"".concat(e,"/").concat(v.purificationPlants),type:n.START_API_REQUEST,resource:"purificationPlants"})),a.push(p({body:{},token:je,method:"GET",url:"".concat(e,"/").concat(v.genericInputs),type:n.START_API_REQUEST,resource:"genericInputs"})),a.length>0&&a.forEach((function(e){Xe(j,e)}))}}),[Me,i.pgapiData,t.params.id,je,j,w.reload]),Object(r.useEffect)((function(){void 0!==Me&&void 0!==Me.purificationPlants&&Ve(Me.purificationPlants.length)}),[Me,w.reloadSubItems]),Object(r.useEffect)((function(){if(void 0!==je&&void 0!==Me&&void 0!==i.pgapiData&&void 0!==Me.purificationPlants){var e="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(i.pgapiData.id,"/").concat(v.bathingspots,"/").concat(t.params.id),a=[];Me.purificationPlants.forEach((function(t){a.push(p({body:{},token:je,method:"GET",url:"".concat(e,"/").concat(v.purificationPlants,"/").concat(t.id,"/").concat(v.measurements),type:n.START_API_REQUEST,resource:"pplantMeasurements"}))})),a.length>0&&a.forEach((function(e){Xe(j,e)}))}}),[He,i.pgapiData,j,t.params.id,je,Me,w.reload,w.reloadSubItems]),Object(r.useEffect)((function(){void 0!==Me&&void 0!==Me.genericInputs&&Ke(Me.genericInputs.length)}),[Me,w.reloadSubItems]),Object(r.useEffect)((function(){if(void 0!==je&&void 0!==Me&&void 0!==i.pgapiData&&void 0!==Me.genericInputs){var e="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(i.pgapiData.id,"/").concat(v.bathingspots,"/").concat(t.params.id),a=[];Me.genericInputs.forEach((function(t){a.push(p({body:{},token:je,method:"GET",url:"".concat(e,"/").concat(v.genericInputs,"/").concat(t.id,"/").concat(v.measurements),type:n.START_API_REQUEST,resource:"gInputMeasurements"}))})),a.length>0&&a.forEach((function(e){Xe(j,e)}))}}),[qe,i.pgapiData,j,t.params.id,je,Me,w.reload,w.reloadSubItems]),Object(r.useEffect)((function(){if(void 0!==w){var e=w.spots.filter((function(e){return e.id===parseInt(t.params.id,10)}));e.length>0&&Be(e[0])}}),[w,t.params.id]),Object(r.useEffect)((function(){void 0!==Me&&Me.id===parseInt(t.params.id,10)&&F(!0)}),[F,Me,t.params.id]),Object(r.useEffect)((function(){if(void 0!==Me&&void 0!==Me.models){var e=Me.models.sort((function(e,t){return new Date(e.updatedAt)-new Date(t.updatedAt)})),t=e[e.length-1];Se(t)}}),[Me,null===Me||void 0===Me?void 0:Me.models]),l.a.createElement(l.a.Fragment,null,l.a.createElement(tt,{isActive:be,clickHandler:st}),function(){if(!0===ie&&void 0!==Me&&void 0!==ue&&void 0!==De)return l.a.createElement(En,{spotApiEndpoints:Me.apiEndpoints,setEditMode:ce,spotId:Me.id,resourceType:De,handleCloseClick:ct,inData:ue,headerTitle:he,subItemId:Pe,handleCalibratePredictClick:ot,setDataEditMode:function(){ce(!1),G(!0)}});if(!0===U&&void 0!==Me)return l.a.createElement(nt,null,!0===P&&!0===U&&l.a.createElement(at,{initialSpot:Me,handleEditModeClick:Je,handleInfoShowModeClick:st}));var e,t,a,n,r,i;if(!0===W&&void 0!==Me)return l.a.createElement(nt,null,l.a.createElement(en,{uploadType:Q,initialValues:{measurements:[],measurementsUrl:null!==(e=null===(t=Me.apiEndpoints)||void 0===t?void 0:t.measurementsUrl)&&void 0!==e?e:"",globalIrradiance:[],globalIrradianceUrl:null!==(a=null===(n=Me.apiEndpoints)||void 0===n?void 0:n.globalIrradianceUrl)&&void 0!==a?a:"",discharges:[],dischargesUrl:null!==(r=null===(i=Me.apiEndpoints)||void 0===i?void 0:i.dischargesUrl)&&void 0!==r?r:""},handleInfoClick:st,handeCloseClick:$e,spotId:Me.id}));if(!0===X&&void 0!==Me){var s={collection:Me.purificationPlants?Me.purificationPlants:[{name:"",url:""}]};return l.a.createElement(nt,null,l.a.createElement(rn,{validationSchema:$a,resourceType:v.purificationPlants,uploadBoxResourceType:"pplantMeasurements",title:"Kl\xe4rwerke",initialValues:s,handeCloseClick:et,handleInfoClick:st,spotId:Me.id}))}if(!0===ae&&void 0!==Me){var o={collection:Me.genericInputs?Me.genericInputs:[{name:"",url:""}]};return l.a.createElement(nt,null,l.a.createElement(rn,{validationSchema:$a,resourceType:v.genericInputs,uploadBoxResourceType:"gInputMeasurements",title:"Generische Messwete",initialValues:o,handeCloseClick:lt,handleInfoClick:st,spotId:Me.id}))}return l.a.createElement(l.a.Fragment,null,!0===w.loading&&void 0===Me&&l.a.createElement(nt,null,l.a.createElement("h1",null," ","Aktualisiere Badestellen Daten",l.a.createElement(S,null))),void 0!==Me&&l.a.createElement(nt,null,l.a.createElement(N,{name:Me.name,nameLong:Me.nameLong,water:Me.water,district:Me.district,isLoading:w.loading})),ba(),!0===c&&l.a.createElement(nt,null,l.a.createElement(Mt,{handlePPEditModeClick:et,handleBasisEditModeClick:Je,handleInfoShowModeClick:st,handleCalibratePredictClick:ot,handleDataEditModeClick:$e,handleGIEditModeClock:lt,ocpuState:g})),void 0!==Me&&l.a.createElement(rt,null,l.a.createElement(fa,{editButtonText:"Daten bearbeiten",title:{title:"Kalibrierung Vorhersagemodelle",iconType:"IconCalc"},hasData:Me.models&&Me.models.length>0,handleEditClick:function(){de(Me.models),ce(!0),xe("models"),ge("Kalibrierung Vorhersagemodelle")},Table:function(){return function(e){var t;if(void 0===e)return l.a.createElement(ta,null,l.a.createElement(aa,null,l.a.createElement(na,{th:"k. A.",tds:[""]})));try{t=JSON.parse(void 0!==e.comment?e.comment:"")}catch(a){t={}}return l.a.createElement(ta,null,l.a.createElement(aa,null,l.a.createElement(na,{th:"ID:",tds:[e.id]}),l.a.createElement(na,{th:"Generiert am:",tds:["".concat(new Date(e.updatedAt).toLocaleDateString("de-DE",{day:"numeric",month:"short",weekday:"short",year:"numeric"}))]}),l.a.createElement(na,{th:"Formel",tds:[void 0===t.formula||0===t.formula.length?"k. A.":t.formula]}),l.a.createElement(na,{th:"Anzahl der Datenpunkte",tds:["".concat(t.n_obs?t.n_obs:"k. A.")]}),l.a.createElement(na,{th:"Bestimmtheitsma\xdf (R\xb2)",tds:["".concat(t.R2?t.R2:"k. A.")]})))}(ke)}}),l.a.createElement(fa,{editButtonText:"Daten bearbeiten",title:{title:"Vorhersage",iconType:"IconComment"},hasData:Me.predictions&&Me.predictions.length>0,handleEditClick:function(){de(Me.predictions),ce(!0),xe("predictions"),ge("Vorhersage")},Table:function(){return ia(Me)}})),l.a.createElement(rt,null,void 0!==Me&&l.a.createElement(fa,{editButtonText:"Daten bearbeiten",title:{title:"Eingangsdaten: Mikrobiologie",iconType:"IconCSV"},hasData:Me.measurements&&Me.measurements.length>0,Table:function(){return function(e){var t;return void 0!==e&&void 0!==e.measurements&&e.measurements.length>0?l.a.createElement(pa,{measurements:e.measurements,hasPrediction:e.hasPrediction,hasAutoData:void 0!==(null===(t=e.apiEndpoints)||void 0===t?void 0:t.measurementsUrl)}):l.a.createElement(ta,null,l.a.createElement(aa,null,l.a.createElement(na,{th:"k. A.",tds:[""]})))}(Me)},handleEditClick:function(){var e;de(Me.measurements),ce(!0),xe("measurements"),ge("Eingangsdaten: Mikrobiologie || ".concat(ua(void 0!==(null===(e=Me.apiEndpoints)||void 0===e?void 0:e.measurementsUrl)))),Z("measurements")}}),void 0!==Me&&l.a.createElement(fa,{editButtonText:"Daten bearbeiten",title:{title:"Eingangsdaten: Regenradar",iconType:"IconRain"},hasData:Me.rains&&Me.rains.length>0,Table:function(){return oa(Me)},handleEditClick:function(){de(Me.rains),ce(!0),xe("rains"),ge("Eingangsdaten: Regenradar")}})),l.a.createElement(rt,null,void 0!==Me&&l.a.createElement(fa,{editButtonText:"Daten bearbeiten",title:{title:"Eingangsdaten: Globalstrahlung",iconType:"IconCSV"},hasData:Me.globalIrradiances&&Me.globalIrradiances.length>0,handleEditClick:function(){var e;de(Me.globalIrradiances),ce(!0),xe("globalIrradiances"),ge("Eingangsdaten: Globalstrahlung || ".concat(ua(void 0!==(null===(e=Me.apiEndpoints)||void 0===e?void 0:e.globalIrradianceUrl)))),Z("globalIrradiances")},Table:function(){var e;return l.a.createElement(tn,{unit:"W/m\xb2",measurements:Me.globalIrradiances,hasAutoData:void 0!==(null===(e=Me.apiEndpoints)||void 0===e?void 0:e.globalIrradianceUrl)})}}),void 0!==Me&&l.a.createElement(fa,{editButtonText:"Daten bearbeiten",title:{title:"Eingangsdaten: Durchfluss",iconType:"IconCSV"},hasData:Me.discharges&&Me.discharges.length>0,handleEditClick:function(){var e;de(Me.discharges),ce(!0),xe("discharges"),ge("Eingangsdaten: Durchfluss || ".concat(ua(void 0!==(null===(e=Me.apiEndpoints)||void 0===e?void 0:e.dischargesUrl)))),Z("discharges")},Table:function(){var e;return l.a.createElement(tn,{unit:" m\xb3/s",measurements:Me.discharges,hasAutoData:void 0!==(null===(e=Me.apiEndpoints)||void 0===e?void 0:e.dischargesUrl)})}})),void 0!==Me&&l.a.createElement(rt,null,l.a.createElement(fa,{editButtonText:"Kl\xe4rwerke anlegen",title:{title:"Eingangsdaten: Kl\xe4rwerk",iconType:"IconIndustry"},hasData:Me.purificationPlants&&Me.purificationPlants.length>0,handleEditClick:function(){de(Me.purificationPlants),ce(!0),xe("purificationPlants"),ge("Eingangsdaten: Kl\xe4rwerk")},Table:function(){return l.a.createElement(ln,{editButtonText:"Editieren",setData:de,setTitle:ge,setSubItemId:Fe,handleEditClick:function(e){null===e||void 0===e||e.preventDefault(),ce(!0),xe("pplantMeasurements")},items:Me.purificationPlants})}}),l.a.createElement(fa,{title:{title:"Eingangsdaten: Generisch",iconType:"IconCSV"},editButtonText:"Generische Daten anlegen",hasData:Me.genericInputs&&Me.genericInputs.length>0,handleEditClick:function(){de(Me.genericInputs),ce(!0),xe("genericInputs"),ge("Generische Messwerte")},Table:function(){return l.a.createElement(ln,{editButtonText:"Editieren",setData:de,setTitle:ge,setSubItemId:Fe,handleEditClick:function(e){null===e||void 0===e||e.preventDefault(),ce(!0),xe("gInputMeasurements")},items:Me.genericInputs})}})),Me&&ba(),Me&&l.a.createElement(nt,null,l.a.createElement("h3",{className:"is-title is-3"},"\xd6ffentlicher Zugriff"),!1===Me.isPublic?l.a.createElement("div",{className:"content"}," ",l.a.createElement("p",null,l.a.createElement("em",null,'Der \xf6ffentlicher Lesezugriff ist deaktiviert. Um die Daten \xf6ffentlich einsehbar zu machen, aktivieren Sie diesen in den "Basis Daten".'))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"F\xfcr den Zugriff auf diese Daten ist ein limit von 100 Anfragen innerhalb von 5 Minuten gesetzt. Wenn Sie mehr Zugriffe ben\xf6tigen, wenden Sie sich an die Administratoren. Einzelne Datenpunkte k\xf6nnen \xfcber ihre entsprechende ",l.a.createElement("code",null,"id")," abgerufen werden. Zum Beispiel:"),l.a.createElement("pre",null,"".concat(z,"/").concat(y.v1,"/public/").concat(v.bathingspots,"/").concat(Me.id,"/").concat(v.measurements,"/1"),l.a.createElement("code",null))),l.a.createElement(vn,{spotId:Me.id}))),void 0!==ke&&void 0!==ke.plotfiles&&l.a.createElement(it,{plotfiles:ke.plotfiles}),l.a.createElement(nt,null,l.a.createElement("div",{ref:Qe,id:"map__container"},void 0!==Me&&!1===w.loading&&null!==Qe&&l.a.createElement(Xt,{mapDims:Ze,spot:Me}))),l.a.createElement(rt,null,void 0!==Me&&function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"column is-5"},l.a.createElement(Wt,{name:e.name,nameLong:e.nameLong,street:e.street,location:e.location,postalCode:void 0!==e.postalCode&&null!==e.postalCode?"".concat(e.postalCode):"",city:e.city,website:e.website})),l.a.createElement("div",{className:"column is-5"},l.a.createElement(Vt,{image:e.image,nameLong:e.nameLong,name:e.name,imageAuthor:void 0})))}(Me)),l.a.createElement(nt,null,void 0!==Me&&Ht(Me)))}())},wn=a(96),kn=function(e){var t=e.title,a=e.water,n=e.id,r=e.image,i=e.hasPrediction,c=e.isUserLoggedIn;e.spot;return l.a.createElement("div",{className:"card card__profile--pad"},l.a.createElement("div",{className:"card-image"},l.a.createElement("figure",{className:"image is-16by9"},l.a.createElement("img",{src:null===r?"/placeholder16-9.svg":r,alt:""}))),l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"media"},l.a.createElement("div",{className:"media-content"},l.a.createElement("p",{className:"title is-6"},"ID: ",n),l.a.createElement("p",{className:"title is-6"},"Name: ",t," ",!0===i?l.a.createElement("span",{className:"asteriks"}," * "):null),l.a.createElement("p",{className:"title is-6"},"Gew\xe4sser: ",a||"n.a.")))),l.a.createElement("footer",{className:"card-footer"},l.a.createElement(wn.a,{className:"card-footer-item",to:"/".concat(h.bathingspot,"/").concat(n)},"Detail"),function(){if(void 0!==c&&!0===c)return l.a.createElement(wn.a,{className:"card-footer-item",to:"/".concat(h.bathingspot,"/").concat(n)},"Bearbeiten")}()))};kn.displayName="CardTile";var Sn=function(){var e=Object(r.useRef)(null),t=O(e),a=B(),i=a.loading,c=a.user,s=a.isAuthenticated,o=a.getTokenSilently,h=Object(r.useState)(),g=Object(m.a)(h,2),E=g[0],f=g[1],b=Object(r.useState)(!1),w=Object(m.a)(b,2),k=w[0],N=w[1],j=Object(r.useState)(void 0),I=Object(m.a)(j,2),T=I[0],C=I[1],D=Ye(),x=Object(m.a)(D,2),A=x[0],_=x[1];Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o();case 3:t=e.sent,f(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[o,f]),Object(r.useEffect)((function(){C(A.spots)}),[A]),Object(r.useEffect)((function(){void 0!==E&&(void 0!==c.pgapiData&&void 0!==c.pgapiData.id&&function(){var e=Object(d.a)(u.a.mark((function e(){var t,a,r,l,i,s,o,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t="".concat(z,"/").concat(y.v1,"/").concat(v.users,"/").concat(c.pgapiData.id,"/").concat(v.bathingspots),console.log(t),e.next=5,fetch("".concat(t,"/count"),{method:"GET",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(E)},credentials:"include"});case 5:if(!(a=e.sent).ok){e.next=14;break}return e.next=9,a.json();case 9:if(r=e.sent,(l=r.data[0])>50){for(i=[],s=0;s<l;s+=50)o=p({body:{},token:E,url:"".concat(t,"?skip=").concat(s,"&limit=").concat(50),method:"GET",type:n.START_API_REQUEST,resource:"bathingspots"}),i.push(o);i.forEach((function(e){Xe(_,e)}))}else d=p({body:{},token:E,url:t,method:"GET",type:n.START_API_REQUEST,resource:"bathingspots"}),Xe(_,d);e.next=15;break;case 14:throw new Error("Could not get count of spots");case 15:e.next=20;break;case 17:throw e.prev=17,e.t0=e.catch(0),e.t0;case 20:case"end":return e.stop()}}),e,null,[[0,17]])})));return function(){return e.apply(this,arguments)}}()())}),[E,_,c.pgapiData,A.reload]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ot,null,l.a.createElement(nt,null,i?l.a.createElement("div",null,"Loading..."):l.a.createElement(M.Consumer,null,(function(e){var t,a;return l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"card-content"},l.a.createElement("div",{className:"media"},l.a.createElement("div",{className:"media-left"},l.a.createElement("figure",{className:"image is-48x48"},l.a.createElement("img",{src:e.user.picture,alt:"Profile"}))),l.a.createElement("div",{className:"media-content"},l.a.createElement("p",{className:"title is-4"},l.a.createElement("span",null,"Benutzer: "),e.user.nickname),l.a.createElement("p",{className:"subtitle is-6"},l.a.createElement("span",null,"E-Mail: "),e.user.email," ",l.a.createElement("br",null),l.a.createElement("span",null,"API ID: "),null!==(t=null===(a=e.user.pgapiData)||void 0===a?void 0:a.id)&&void 0!==t?t:void 0)))))}))),!0===k&&l.a.createElement(nt,null,l.a.createElement(at,{initialSpot:qt,handleEditModeClick:function(){N(!k)},handleInfoShowModeClick:function(e){e&&e.preventDefault()},newSpot:!0})),!1===k&&l.a.createElement(nt,null,void 0!==s&&!0===s&&l.a.createElement("div",{className:"buttons"},l.a.createElement("button",{className:"button is-small",onClick:function(){N(!0)}},"Neue Badestelle"))),!1===k&&l.a.createElement(l.a.Fragment,null,l.a.createElement(nt,{containerClassName:"user__spots-map"},l.a.createElement("div",{ref:e,id:"map__container"},void 0===T&&l.a.createElement(S,null),void 0!==T&&l.a.createElement(Yt,{width:t.width,height:t.height,data:T}))),l.a.createElement(nt,{containerClassName:"user__spots"},l.a.createElement("div",{className:"tile is-ancestor"},l.a.createElement("div",{style:{flexWrap:"wrap"},className:"tile is-parent"},void 0===T&&l.a.createElement(S,null),void 0!==T&&T.map((function(e,t){return l.a.createElement("div",{key:t,className:"tile is-child is-3"},l.a.createElement(kn,{title:e.name,water:e.water,id:e.id,image:e.image,hasPrediction:e.hasPrediction,isUserLoggedIn:!1,key:t,spot:e}))}))))))))},Nn=a(167),On=function(e){var t=e.component,a=e.path,n=Object(I.a)(e,["component","path"]),i=B(),c=i.isAuthenticated,s=i.loginWithRedirect;Object(r.useEffect)((function(){(function(){var e=Object(d.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c){e.next=3;break}return e.next=3,s({appState:{targetUrl:a}});case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[c,s,a]);return l.a.createElement(Ot,null,l.a.createElement(Nn.b,Object.assign({path:a,render:function(e){return!0===c?l.a.createElement(t,e):null}},n)))};On.displayName="PrivateRoute";var jn=On,In=function(){return l.a.createElement("div",{className:"container info"},l.a.createElement("div",{className:"columns  is-centered"},l.a.createElement("div",{className:"column is-10"},l.a.createElement("h1",{className:"title is-1"},"Beschreibung Vorhersagemodell"),l.a.createElement("p",null,"Die Badegew\xe4sserqualit\xe4t wird regelm\xe4\xdfig durch das Landesamt f\xfcr Gesundheit und Soziales \xfcberwacht und zeigt die gute Qualit\xe4t in den Berliner Seen, die den B\xfcrger zum Baden einl\xe4dt."),l.a.createElement("p",null,"Einige Badestellen im n\xf6rdlichen Bereich der Unterhavel (Grunewaldturm und Kleine Badewiese) werden, wenn es regnet, vom Berliner Stadtgebiet beeinflusst. Wie wir es von der Wettervorhersage kennen, regnet es \xf6rtlich und zeitlich sehr unterschiedlich. Auch die Flie\xdfgeschwindigkeit in Spree und Havel kann sich innerhalb kurzer Zeit stark ver\xe4ndern. Mit einer Verschlechterung der Badegew\xe4sserqualit\xe4t ist dann zu rechnen, wenn es stark geregnet hat, es zu Einleitungen aus dem Stadtgebiet kommt, und die Flie\xdfgeschwindigkeit im Fluss hoch ist. Dieser Zusammenhang wurde im Forschungsprojekt FLUSSHYGIENE \xfcber zwei Jahre sehr genau untersucht und kann nun genutzt werden um die Badegew\xe4sserqualit\xe4t vorherzusagen."),l.a.createElement("p",null,"Zu diesem Zweck wurde aus den gewonnenen Messdaten ein statistisches Modell entwickelt, dass die Badegew\xe4sserqualit\xe4t f\xfcr jeden Tag bewertet. Durch sehr gute Ergebnisse w\xe4hrend der FLUSSHYGIENE-Projektphase, wird das Modell nun f\xfcr den dauerhaften Einsatz getestet. Hierf\xfcr \xfcbermitteln die Berliner Wasserbetriebe (BWB) jeden Tag die gemessenen Daten zu Regen, Mischwasser\xfcberl\xe4ufen aus der Kanalisation sowie die Zu- und Ablaufdaten vom Kl\xe4rwerk Ruhleben. Die Senatsverwaltung f\xfcr Umwelt, Verkehr und Klimaschutz (SenUVK) \xfcbermittelt die t\xe4glichen Daten \xfcber den gemessenen Durchfluss, also wie viel Wasser im Fluss pro Sekunde abflie\xdft. Die Daten werden automatisch eingelesen, aufbereitet und mit Hilfe des statistischen Modells ausgewertet. Am Ende steht jeden Morgen eine Prognose \xfcber die Wasserqualit\xe4t, die an diesem Tag zu erwarten ist."),l.a.createElement("h2",{className:"title is-2"},"Hinweise:"),l.a.createElement("p",null,"Das Baden in nat\xfcrlichen Gew\xe4ssern ist nie zu 100% risikofrei. Auch der Schiffs- und Bootsverkehr in der Unterhavel kann zu Belastungen f\xfchren, die durch das Modell nicht vorhergesagt werden."))))};In.displayName="Info";var Tn=In,Cn=function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"hero is-primary"},l.a.createElement("div",{className:"hero-body"},l.a.createElement(nt,null,l.a.createElement("h1",{className:"is-title is-1"},"Herzlich Willkommen,"),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"auf dieser Webplattform stehen dem Nutzer zwei wesentliche Erzeugnisse des Forschungsprojekts"," ",l.a.createElement("strong",{style:{color:"white"}},"Flusshygiene")," zu Verf\xfcgung. Das Projekt"," ",l.a.createElement("strong",{style:{color:"white"}},"Flusshygiene")," ","befasste sich drei Jahre mit der Thematik des Flussbadens in Deutschland. Das Flussbaden wird im Allgemeinen immer beliebter und vielerorts werden Fl\xfcsse bereits heute zum Baden genutzt. Dennoch gibt es an Fl\xfcssen spezielle Gefahren, wie starke Str\xf6mungen, die Schifffahrt sowie eine oft schwankende Wasserqualit\xe4t, die beim Flussbaden ber\xfccksichtigt werden m\xfcssen, damit die Gesundheit von Badenden nicht \xfcberm\xe4\xdfig gef\xe4hrdet wird."))))),l.a.createElement(nt,null,l.a.createElement("h3",{className:"is-title is-3"},"Tool zur Erstbewertung neuer Badegew\xe4sser"),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"Um eine Einsch\xe4tzung \xfcber die Eignung eines neuen Badegew\xe4sserstandortes durchf\xfchren zu k\xf6nnen, wurde im Projekt"," ",l.a.createElement("strong",null,"Flusshygiene")," ein checklistenbasiertes Bewertungsinstrument neuer, potenzieller Badegew\xe4sserstandorte entwickelt. Dieser soll dem Nutzer eine erste Einsch\xe4tzung erm\xf6glichen, ob die Er\xf6ffnung eines Badegew\xe4sser an einem bestimmten Standort wahrscheinlich ist. ",l.a.createElement("br",null),l.a.createElement(wn.a,{to:"/".concat(h.questionnaire)},"zur Standortbewertung"))),l.a.createElement("h3",{className:"is-title is-3"},"Tool zum Aufbau von Fr\xfchwarnsystem"),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"Im Projekt ",l.a.createElement("strong",null,"Flusshygiene")," wurde ein neuer Ansatz zum Aufbau von Fr\xfchwarnsystemen entwickelt, der den Ansatz der Langzeitbewertung der EG-Badegew\xe4sserrichtlinie auf t\xe4gliche Vorhersagen \xfcbertr\xe4gt. Ein solcher Ansatz fehlte bisher und eine Bewertung der Badegew\xe4sserqualit\xe4t fand bisher ausschlie\xdflich r\xfcckblickend statt. Der Ansatz kann an allen Typen von Badegew\xe4sser angewendet werden."),l.a.createElement("p",null,"Die im Projekt entwickelte Methodik, basiert auf statistischen Modellierungsans\xe4tzen und im Projekt entwickelten Vorhersage- und Modelvalidierungskriterien. Die wesentlichen Schritte des Modellaufbaus und der Validierung wurden auf dieser Webplattform automatisiert, sodass die Methodik nun zust\xe4ndigen Beh\xf6rden sowie Betreibern von Badegew\xe4ssern zur Verf\xfcgung steht. ",l.a.createElement("br",null)))),l.a.createElement(nt,null,l.a.createElement("h3",{className:"is-title is-3"},"Gef\xf6rdert Durch")),l.a.createElement(rt,null,l.a.createElement("div",{className:"column is-4"},l.a.createElement("figure",{className:"image is-16by9"},l.a.createElement("a",{href:"https://bmbf.nawam-rewam.de/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:"/nawam.png",alt:"logo Nachhaltiges Wassermanagement"})))),l.a.createElement("div",{className:"column is-4"},l.a.createElement("figure",{className:"image is-16by9"},l.a.createElement("a",{href:"https://www.bmbf.de/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:"/bmbf.png",alt:"logo Bundesministerium f\xfcr Bildung und Forschung"}))))),l.a.createElement(nt,null,l.a.createElement("h3",{className:"is-title is-3"},"Entwickelt im Projekt")),l.a.createElement(rt,null,l.a.createElement("div",{className:"column is-4"},l.a.createElement("figure",{className:"image is-16by9"},l.a.createElement("a",{href:"https://www.kompetenz-wasser.de/de/project/flusshygiene/",target:"_blank",rel:"noopener noreferrer"},l.a.createElement("img",{src:"/flusshygiene.png",alt:"logo Flusshygiene"}))))))};Cn.displayName="Home";var Dn=Cn,xn=function(e){var t=e.isModal;return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt,{columnClassName:"is-10"},l.a.createElement("h1",{className:"is-title is-1"},"Einleitung"),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,l.a.createElement("strong",null,"Tool zur Anfangsbewertung von Standorten zur Einrichtung von Flussbadestellen")),l.a.createElement("p",null,"Willkommen!"),l.a.createElement("p",null,"Mit diesem Tool k\xf6nnen Sie anhand von Fragen, die bei der Einrichtung einer neuen Flussbadestelle zu beachten sind, Ihren gew\xfcnschten Standort auf seine Eignung \xfcberpr\xfcfen. Hierzu werden Sie durch thematisch sortierte Multiple-Choice-Fragen geleitet."," "),l.a.createElement("p",null,"Auf Grundlage Ihrer Antworten erhalten Sie dann"),l.a.createElement("ul",null,l.a.createElement("li",null,"eine erste Einsch\xe4tzung zur Umsetzungswahrscheinlichkeit Ihres Flussbadestellen-Vorhabens f\xfcr den spezifischen Standort,"),l.a.createElement("li",null,"Hintergrundinformationen und hilfreiche Links,"),l.a.createElement("li",null,"Empfehlungen f\xfcr wichtige n\xe4chste Schritte, um kritische Punkte zu kl\xe4ren."," ")),l.a.createElement("p",null,"Einige Antwortoptionen enthalten sogenannte K.O.-Kriterien, die die Einrichtung einer Flussbadestelle am angegebenen Standort faktisch unm\xf6glich machen. In diesem Fall wird ein Abbruch des Vorhabens empfohlen."),l.a.createElement("p",null,"Die Kriterien sind thematisch (Wasser- und Landseitig) sowie nach ihrer Relevanz geordnet, K.O.-Kriterien werden dabei jeweils zuerst abgefragt. Alle Kriterien sind nach dem Aufwand gegebenenfalls notwendiger Gegenma\xdfnahmen gewichtet. Diese Gewichtung flie\xdft sp\xe4ter in die Endbewertung ein."),l.a.createElement("p",null,l.a.createElement("strong",null,"Empfehlungen f\xfcr eine Ortsbegehung")),l.a.createElement("p",null,"Sicherlich haben Sie, bevor Sie diese Anfangsbewertung f\xfcr Ihr Vorhaben durchf\xfchren, den gew\xfcnschten Standort bereits besucht. Dennoch empfiehlt es sich vor der Beantwortung der Fragen noch einmal eine gezielte Ortsbegehung durchzuf\xfchren und auf relevante Punkte f\xfcr die Durchf\xfchrung der Standortpr\xfcfung zu achten."," "),l.a.createElement("p",null,l.a.createElement("a",{href:"/ortsbegehung-leitfaden.pdf",target:"_blank"},"Hier")," ","finden Sie eine Liste von Punkten, auf die Sie mit Blick auf die sp\xe4tere Standortbewertung im speziellen achten sollten, und mit denen Sie einige Fragen sp\xe4ter leichter beantworten k\xf6nnen."))),void 0===t||!1===t&&l.a.createElement(nt,{columnClassName:"is-8"},l.a.createElement("div",{className:"buttons"},l.a.createElement(wn.a,{to:"/".concat(h.questionnaire,"/1"),className:"button is-primary"},"Standortbewertung beginnen!"))))},An=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(xn,{isModal:!1}))},_n=a(306),Pn=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(a){return}},Fn=function(e,t){try{var a=JSON.stringify(t);localStorage.setItem(e,a)}catch(n){console.error(n)}},zn=[],Rn=[],Mn="";Object(d.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(_n.getQuestions)();case 2:t=e.sent,zn=Object(j.a)(t),void 0===(a=Pn("standortbewertung"))?(Rn=new Array(zn.length),Mn=""):(Rn=void 0===a.answers?new Array(zn.length):a.answers,Mn=void 0===a.title?"":a.title);case 6:case"end":return e.stop()}}),e)})))();var Bn=Object(r.createContext)(void 0),Un=Object(r.createContext)(void 0),Ln=function(e,t){switch(t.type){case"SET_ANSWER":var a=t,n=a.payload.index,r=a.payload.answer,l=Object(j.a)(e.answers);return l[n]=r,Fn("standortbewertung",{answers:l}),Object(Y.a)(Object(Y.a)({},e),{},{answers:l});case"REMOVE_ANSWERS":return function(e){try{localStorage.removeItem(e)}catch(t){console.error(t)}}("standortbewertung"),Object(Y.a)(Object(Y.a)({},e),{},{answers:[new Array(e.questions)]});case"SET_TITLE":var i=t;return Fn("standortbewertung",{answers:e.answers,title:i.payload.title}),Object(Y.a)(Object(Y.a)({},e),{},{title:i.payload.title});case"SET_STATE":var c=t.payload.state;return Object(Y.a)({},c);default:throw new Error("Unhandled action type: ".concat(t.type))}},Hn=function(e){var t=e.children,a=Object(r.useReducer)(Ln,{questions:zn,answers:Rn,title:Mn}),n=Object(m.a)(a,2),i=n[0],c=n[1];return l.a.createElement(Bn.Provider,{value:i},l.a.createElement(Un.Provider,{value:c},t))};Hn.displayName="QuestionsProvider";var Vn=function(){var e=Object(r.useContext)(Bn);if(void 0===e)throw new Error("useQuestionsState must be used within a QuestionsProvider");return e},Wn=function(){var e=Object(r.useContext)(Un);if(void 0===e)throw new Error("useQuestionsDispatch must be used within a QuestionsProvider");return e},Gn=function(){return[Vn(),Wn()]},qn=function(e){var t=e.children,a=e.text,n=e.handleChangeEvent;return l.a.createElement(l.a.Fragment,null,l.a.createElement("label",{className:"button is-small"},l.a.createElement("input",{id:"custom-file-upload",type:"file",style:{display:"none"},onChange:n,className:"input__custom-file-upload--hidden"}),l.a.createElement("span",{className:"icon is-small"},l.a.createElement(be,null))," ",a&&l.a.createElement("span",null,a),t))},Kn=function(e){var t=e.handleInfoClick,a=(e.children,e.handleReportClick),n=e.handleResetClick,r=e.handleUploadClick;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"buttons buttons__--size"},l.a.createElement(Rt,{dataTestId:"qtoolbar-i-button",cssId:"info",handleClick:t,text:"Info"},l.a.createElement(pe,null)),l.a.createElement(Rt,{type:"button",cssId:"save",handleClick:a,text:"Zum Report"},l.a.createElement(Re,null)),l.a.createElement(Rt,{type:"button",cssId:"reset-answers",handleClick:n,text:"Formular zur\xfccksetzen"},l.a.createElement(me,null)),l.a.createElement(qn,{handleChangeEvent:r,text:"Formular hochladen"})))},Qn=function(e){var t=e.currentPage,a=e.index,n=e.onChange,r=e.className,i=void 0===r?"":r,c=e.cssId;return l.a.createElement("li",null,l.a.createElement(wn.a,{to:"/".concat(h.questionnaire,"/").concat(a),className:"pagination-link ".concat(i," ").concat((t===a||1===a&&!t)&&"is-current"),id:c,"aria-label":"Goto page ".concat(a),"aria-current":a===t&&"page",onClick:function(e){return n(e,a)}},a))};Qn.displayName="Page";var Zn=function(){return l.a.createElement("li",null,l.a.createElement("span",{className:"pagination-ellipsis"},"\u2026"))};Zn.displayName="Ellipses";var Jn=function(e){var t=e.pages,a=e.currentPage,n=void 0===a?0:a,r=e.visibleRadius,i=void 0===r?1:r,c=e.className,s=void 0===c?"":c,o=e.isRounded,u=void 0!==o&&o,d=e.isSmall,m=void 0!==d&&d,p=e.isMedium,g=void 0!==p&&p,E=e.isLarge,f=void 0!==E&&E,b=e.isCentered,v=void 0!==b&&b,y=e.isRight,w=void 0===y||y,k=e.prevClassName,S=void 0===k?"":k,N=e.nextClassName,O=void 0===N?"":N,j=e.linkClassName,I=void 0===j?"":j,T=e.listClassName,C=void 0===T?"":T,D=e.onChange,x=e.showNumbers,A=function(e,t,a){var n=[],r=t-e,l=t+e;r<1&&(l=(r=1)+2*e),l>a&&(r=a-2*e,l=a),2*e+1>a&&(r=1,l=a);for(var i=r;i<=l;i++)n.push(i);return n}(i,n,t),_=[],P=[u&&"is-rounded",m&&"is-small",g&&"is-medium",f&&"is-large",v&&"is-centered",w&&"is-right"].filter(Boolean);return A[0]>=2&&(_.push(l.a.createElement(Qn,{key:"page-1",index:1,cssId:"page-1",currentPage:n,onChange:D})),2!==A[0]&&_.push(l.a.createElement(Zn,{key:"ellipses-1"}))),A.map((function(e){return _.push(l.a.createElement(Qn,{key:"page-".concat(e),cssId:"page-".concat(e),index:e,currentPage:n,onChange:D}))})),n<=t-i-1&&A.length<t&&(n<t-i-1&&_.push(l.a.createElement(Zn,{key:"ellipses-2"})),_.push(l.a.createElement(Qn,{key:"page-".concat(t),className:I,index:t,cssId:"page-".concat(t),currentPage:n,onChange:D}))),l.a.createElement("div",{className:"pagination-container pagination ".concat(P.join(" ")," ").concat(s),role:"navigation","aria-label":"pagination"},l.a.createElement(wn.a,{to:n-1===0?"/".concat(h.questionnaire,"/1"):"/".concat(h.questionnaire,"/").concat(n-1),id:"bwd",className:"pagination-previous nav ".concat(S),onClick:function(e){return D(e,n-1)}},l.a.createElement(ve,null)),l.a.createElement(wn.a,{to:n+1>t?"/".concat(h.questionnaire,"/").concat(t):"/".concat(h.questionnaire,"/").concat(n+1),id:"fwd",className:"pagination-next nav ".concat(O),onClick:function(e){return D(e,n+1)}},l.a.createElement(ye,null)),!0===x&&l.a.createElement("ul",{className:"pagination-list ".concat(C)},_))};Jn.displayName="Pagination";var Yn=function(e){return null===e?"":e.replace(/<(.*?)>/g,'<a href="$1" target="_blank" rel="noopener noreferrer"><em>[Link]</em></a>')},Xn=function(e){var t=e.selectedAnswer,a=e.formikValues,n=e.aAddInfo,r=void 0,i=void 0,c=!1;return void 0!==t&&(!0===a.answersIds.includes(t.id)&&(r=ie(t.colorText)),void 0!==t.qType&&(i=ce(t.qType,t.colorText))),n&&/K\.O\./.test(n)&&(c=!0),n&&!0===c?l.a.createElement("div",{className:"message is-danger"},l.a.createElement("div",{className:"message-header"},l.a.createElement("div",{className:"content"},l.a.createElement("span",null,r),l.a.createElement("span",null," "),l.a.createElement("span",null,i),l.a.createElement("span",null," "),"K.O.-Kriterium")),l.a.createElement("div",{className:"message-body",dangerouslySetInnerHTML:{__html:void 0!==n?n.replace(/k.o.-kriterium:\s/i,""):""}})):n?l.a.createElement("div",{className:"message"},l.a.createElement("div",{className:"message-body is-dark"},l.a.createElement("p",null,l.a.createElement("span",null,r),l.a.createElement("span",null," "),l.a.createElement("span",null,i),l.a.createElement("span",null," "),l.a.createElement("span",{dangerouslySetInnerHTML:{__html:void 0!==n?n:""}})))):null},$n=a(269),er=a(404),tr=a(411),ar=function(e){Object($n.a)(a,e);var t=Object(er.a)(a);function a(e){var n;return Object(vt.a)(this,a),(n=t.call(this,e)).name="UploadError",n}return a}(Object(tr.a)(Error)),nr=function(e){var t=e.qid,a=Object(r.useState)(""),n=Object(m.a)(a,2),i=n[0],c=n[1],s=Object(r.useState)(""),o=Object(m.a)(s,2),u=o[0],d=o[1],p=Object(r.useState)(""),g=Object(m.a)(p,2),E=g[0],f=g[1],b=Object(r.useState)(""),v=Object(m.a)(b,2),y=v[0],w=v[1],k=Object(r.useState)([]),S=Object(m.a)(k,2),N=S[0],O=S[1],I=Object(r.useState)(),C=Object(m.a)(I,2),D=C[0],x=C[1],A=Object(r.useState)(),_=Object(m.a)(A,2),P=_[0],F=_[1],z=Gn(),R=Object(m.a)(z,2),M=R[0],B=R[1],U=Object(r.useState)(!1),L=Object(m.a)(U,2),H=L[0],V=L[1],W=Object(r.useState)([]),G=Object(m.a)(W,2),q=G[0],K=G[1],Q=Object(r.useState)(""),Z=Object(m.a)(Q,2),J=Z[0],Y=Z[1],X=Object(r.useState)(!1),$=Object(m.a)(X,2),ee=$[0],te=$[1],ae=Object(r.useState)(!1),ne=Object(m.a)(ae,2),re=ne[0],le=ne[1],ie=Ct(),ce=Object(m.a)(ie,2)[1];Object(r.useEffect)((function(){Y((function(e){return void 0!==M.title?M.title:""}))}),[]),Object(r.useEffect)((function(){if(void 0!==M.questions&&!(M.questions.length-1<t)){c(M.questions[t].default[1][1]),d(Yn(M.questions[t].default[1][3])),f(M.questions[t].default[1][4]),w(Yn(M.questions[t].default[1][5]));for(var e=M.questions[t].default,a=[],n=1;n<e.length;n++)if(null!==e[n][6]){var r={additionalText:Yn(e[n][7]),colorText:e[n][9],text:e[n][6],id:"".concat(t,"-a").concat(n-1,"-w").concat(e[1][0],"-p").concat(e[n][10]),weight:e[1][0],possibility:e[n][10],qType:null!==e[n][11]?e[n][11].toLowerCase():void 0,reportAddInfo:Yn(e[n][8])};a.push(r)}return O(a),F(void 0),V(!0),function(){se()}}}),[M.questions,t,M.answers]),Object(r.useEffect)((function(){if(0!==N.length){var e,t=Object(an.a)(N);try{for(t.s();!(e=t.n()).done;){var a=e.value;!0===M.answers.includes(a.id)&&(K([a.id]),F(a.additionalText),x(a))}}catch(n){t.e(n)}finally{t.f()}return function(){se()}}}),[M.answers,N]);var se=function(){x(void 0),F(void 0),K([])},oe=function(e){if(!(null===e.currentTarget.files||e.currentTarget.files.length<1)){var t=e.currentTarget.files[0];if("application/json"===t.type){var a=new FileReader;a.readAsText(t,"UTF-8"),a.onerror=function(e){ce({type:"ADD_MESSAGE",payload:{message:'Datei "'.concat(t.name,'" konnte nicht gelesen werden.'),type:"error"}})},a.onload=function(e){try{var a,n=JSON.parse(null===(a=e.target)||void 0===a?void 0:a.result);if(void 0===n.contextState)throw new ar('Die Eigenschaft "contextState" existiert nicht in '.concat(t.name,"."));if(void 0===n.contextState.questions)throw new ar('Die Eigenschaft "contextState.questions" existiert nicht in '.concat(t.name,"."));if(void 0===n.contextState.answers)throw new ar('Die Eigenschaft "contextState.answers" existiert nicht in '.concat(t.name,"."));if(void 0===n.contextState.title)throw new ar('Die Eigenschaft "contextState.title" existiert nicht in '.concat(t.name,"."));var r={questions:Object(j.a)(n.contextState.questions),answers:Object(j.a)(n.contextState.answers),title:n.contextState.title};B({type:"SET_STATE",payload:{state:r}})}catch(l){l instanceof SyntaxError?ce({type:"ADD_MESSAGE",payload:{message:"Kein valides JSON",type:"error"}}):ce({type:"ADD_MESSAGE",payload:{message:l.message,type:"error"}})}}}else ce({type:"ADD_MESSAGE",payload:{message:'Datei "'.concat(t.name,'" ist keine .json Datei.'),type:"error"}})}},ue=function(e){le(!1)},de=function(e){e.preventDefault(),te((function(e){return!e}))},me=function(e,a){if(e.answersIds.length>0){var n=e.answersIds[0].split("-")[0];parseInt(n,10)===t&&(B({type:"SET_ANSWER",payload:{index:t,answer:void 0===e.answersIds[0]?null:e.answersIds[0]}}),a())}};return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"modal ".concat(ee?"is-active":""),onClick:de},l.a.createElement("div",{className:"modal-background"}),l.a.createElement("div",{className:"modal-content",onClick:de},l.a.createElement("button",{onClick:de,className:"modal-close is-large","aria-label":"close"}),l.a.createElement("div",{className:"box",onClick:de},l.a.createElement(xn,{isModal:!0})))),!0===H&&l.a.createElement(T.e,{initialValues:{answersIds:q,answer:void 0,questionnaireTitle:J},enableReinitialize:!0,onSubmit:function(e,a){var n=a.setSubmitting,r=a.resetForm;B({type:"SET_TITLE",payload:{title:e.questionnaireTitle}}),B({type:"SET_ANSWER",payload:{index:t,answer:void 0===e.answersIds[0]?null:e.answersIds[0]}}),n(!1),r()}},(function(e){var a=e.values,n=e.isSubmitting,r=e.handleChange,c=e.resetForm;return l.a.createElement(l.a.Fragment,null,re&&l.a.createElement(on,{isActive:re,handleConfirmClick:function(e){!function(e,t){B({type:"REMOVE_ANSWERS"}),se(),null===t||void 0===t||t(),le(!1)}(0,c)},handleCancelClick:ue}),l.a.createElement(T.d,null,l.a.createElement(nt,null,l.a.createElement(Kn,{isSubmitting:n,handleInfoClick:function(e){de(e)},handleReportClick:function(e){me(a,c),Qt.push("/".concat(h.questionnaire,"/report"))},handleResetClick:function(e){le(!0)},handleUploadClick:oe})),l.a.createElement(nt,{containerClassName:"container__--padding-top"},l.a.createElement("div",{className:"buttons"},l.a.createElement(Jn,{pages:M.questions.length-1,currentPage:t,showNumbers:!0,isRounded:!1,isSmall:!0,isCentered:!0,onChange:function(e,t){me(a,c)}}))),l.a.createElement(nt,{containerClassName:"container__--padding-top"},l.a.createElement("div",{className:"field"},l.a.createElement("div",{className:"control"},l.a.createElement("input",{className:"input is-small",type:"text",placeholder:"Geben Sie einen Title ein",name:"title",value:J,onChange:function(e){r(e),Y(e.currentTarget.value),B({type:"SET_TITLE",payload:{title:J}})}})))),l.a.createElement("div",{className:"hero"},l.a.createElement("div",{className:"hero-body"},l.a.createElement(nt,null,l.a.createElement("h1",{className:"is-title"},i),l.a.createElement("h2",{className:"is-subtitle"},E),l.a.createElement("div",{className:"content"},l.a.createElement("p",{className:"has-text-weight-medium is-size-5",id:"qInfo",dangerouslySetInnerHTML:{__html:u}})),l.a.createElement("div",{className:"content"},l.a.createElement("p",{className:"is-italic",id:"qAddInfo",dangerouslySetInnerHTML:{__html:y}}))))),l.a.createElement(nt,null,l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"control"},l.a.createElement(T.c,{name:"answersIds",render:function(e){return l.a.createElement(l.a.Fragment,null,N.map((function(t,n){return l.a.createElement("div",{key:n,className:"field"},l.a.createElement(T.b,{type:"radio",id:"answer--".concat(n),name:"answers",className:"answer",onChange:function(a){r(a),e.replace(0,t.id),F(t.additionalText),x(t)},required:!0,value:t.id,checked:a.answersIds.includes(t.id)}),l.a.createElement("label",{htmlFor:"answer--".concat(n),className:"radio label__answer"},t.text))})))}}))),l.a.createElement(Xn,{selectedAnswer:D,formikValues:a,aAddInfo:P})),l.a.createElement("div",{style:{paddingTop:"2rem"}},l.a.createElement("br",null)),l.a.createElement(nt,null,l.a.createElement(Jn,{showNumbers:!1,pages:M.questions.length-1,currentPage:t,isRounded:!1,isSmall:!0,isCentered:!0,onChange:function(e,t){me(a,c)}}))))})))},rr=a(748),lr=a.n(rr),ir=function(){var e=Gn(),t=Object(m.a)(e,1)[0],a=Object(r.useState)([]),n=Object(m.a)(a,2),i=n[0],c=n[1],s=Object(r.useState)([]),o=Object(m.a)(s,2),u=o[0],d=o[1],p=Object(r.useState)([]),g=Object(m.a)(p,2),E=g[0],f=g[1],b=Object(r.useState)(0),v=Object(m.a)(b,2),y=v[0],w=v[1],k=Object(r.useState)(!1),S=Object(m.a)(k,2),N=S[0],O=S[1],I=Object(r.useState)([]),T=Object(m.a)(I,2),C=T[0],D=T[1];return Object(r.useEffect)((function(){if(void 0!==t.questions&&void 0!==t.questions[0]){for(var e=[],a=[],n=[],r=[],l=1;l<t.questions.length;l++){e.push(t.questions[l].default[1][4]),a.push(Yn(t.questions[l].default[1][5]));for(var i=[],s=1;s<t.questions[l].default.length;s++){var o=t.questions[l].default[s],u=o[6];if(null!==u){var m={text:u,additionalText:Yn(o[7]),colorText:o[9],id:"".concat(l,"-a").concat(s-1,"-w").concat(t.questions[l].default[1][0],"-p").concat(o[10]),weight:t.questions[l].default[1][0],possibility:o[10],qType:null!==o[11]?o[11].toLowerCase():void 0,reportAddInfo:Yn(o[8])};i.push(m),!0===t.answers.includes(m.id)&&r.push(m)}}n.push(i)}d((function(e){return a})),c((function(t){return e})),f((function(e){return n})),D((function(e){return r}))}}),[t.questions,c,t.answers]),Object(r.useEffect)((function(){if(void 0!==t.answers&&0!==t.answers.length){var e=t.answers.filter((function(e){return void 0!==e})),a=Object(j.a)(t.answers);if(a.shift(),!1===a.includes(void 0)&&O(!0),0!==e.length){var n,r=[],l=[],i=Object(an.a)(e);try{for(i.s();!(n=i.n()).done;){var c=n.value;if(void 0!==c&&(null!==c&&"string"===typeof c)){var s=c.split("-"),o=parseInt(s[2].substring(1),10),u=parseFloat(s[3].substring(1));r.push(o*(100*u)),l.push(o)}}}catch(m){i.e(m)}finally{i.f()}var d=r.reduce((function(e,t){return e+t}),0)/l.reduce((function(e,t){return e+t}),0);return w(5*Math.round(d/5)),function(){}}}}),[t.answers]),0===t.questions.length?l.a.createElement(Nn.a,{to:"/".concat(h.questionnaire)}):l.a.createElement(l.a.Fragment,null,l.a.createElement(nt,{columnClassName:"is-8"},l.a.createElement("div",{className:"buttons buttons__--size"},l.a.createElement(Rt,{text:"Zur\xfcck zum Formular",handleClick:function(){Qt.push("/".concat(h.questionnaire,"/1"))}},l.a.createElement(ve,null)),l.a.createElement(wn.a,{className:"button is-small",to:{pathname:"/".concat(h.questionnaire,"-pdfviewer"),state:{questions:i,answers:C,addInfoQuestion:u,title:"Standortbewertung-".concat(t.title),probability:"Umsetzungswahrscheinlichkeit: ".concat(!1===isNaN(y)&&sa(y,0),"%"),allAnswersGiven:N}}},l.a.createElement("span",{className:"icon is-small"}," ",l.a.createElement(ue,null))," ",l.a.createElement("span",null,"PDF Download")),l.a.createElement(Rt,{text:"JSON Download",handleClick:function(e){var a=new Blob([JSON.stringify({contextState:t,answers:E,questions:i})],{type:"text/plain;charset=utf-8"});lr.a.saveAs(a,"standortbewertung-".concat(t.title,".json"))}},l.a.createElement(de,null)))),l.a.createElement(nt,{columnClassName:"is-8"},l.a.createElement("h1",{className:"title is-1"},"Report"),l.a.createElement("h2",{className:"subtitle is-4"},"der aktuellen Standortbewertung"),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"Mit der Beantwortung der Fragen zur Einsch\xe4tzung \xfcber die Eignung eines neuen Badegew\xe4sserstandortes haben Sie einen wichtigen Schritt in Richtung neuer Badestelle unternommen. Gl\xfcckwunsch!"),l.a.createElement("p",null,"Sie haben nun eine \xdcbersicht \xfcber verschiedene wichtige Kriterien ihres anvisierten Standortes und voraussichtlich auch erste konkrete weitere Ansatzpunkte, um durch Recherchen und Gespr\xe4che noch bestehende Wissensl\xfccken zu schlie\xdfen. Au\xdferdem gibt ihnen die ermittelte Umsetzungswahrscheinlichkeit eine Einsch\xe4tzung der Erfolgsaussichten. Damit aus der vorgenommen Ersteinsch\xe4tzung und der dahinterstehenden Idee eines neuen Badegew\xe4ssers jedoch Wirklichkeit werden kann, ist noch einiges zu tun. Was dies in Ihrem Fall ist zeigt Ihnen das folgende Reporting:")),void 0!==t.title&&t.title.length>0&&l.a.createElement("h3",{className:"subtitle is 6"},t.title),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"message ".concat(!1===N?"is-warning":"is-dark")},l.a.createElement("div",{className:"message-body"},l.a.createElement("p",null,l.a.createElement("strong",null,"Achtung es wurden nicht alle Fragen beantwortet!")),l.a.createElement("p",{className:"subtitle ".concat(!1===N?"has-text-grey-light":"")},"Umsetzungswahrscheinlichkeit:"," ",!1===isNaN(y)&&sa(y,2),"%")))),l.a.createElement("div",{className:"content"},l.a.createElement("ol",null,i.map((function(e,a){return l.a.createElement("li",{key:a},l.a.createElement("div",{className:"content report__answer"},l.a.createElement("p",{className:""},l.a.createElement("strong",null,e," ",l.a.createElement(wn.a,{to:"/".concat(h.questionnaire,"/").concat(a+1),title:"Zur\xfcck zur Frage"},l.a.createElement(ke,null)))),function(){if(void 0===t.answers[a+1]||null===t.answers[a+1])return l.a.createElement("p",null,l.a.createElement("em",null,"Noch nicht beantwortet!"));var e=t.answers[a+1].split("-"),n=parseInt(e[1].substring(1),10);return l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement("strong",null,"Ihre Antwort: ")," ",E[a][n].text," "),l.a.createElement("div",{className:"rot"===E[a][n].colorText?"is-danger message":"is-dark message"},l.a.createElement("div",{className:"message-body"},l.a.createElement("span",null,ie(E[a][n].colorText)," ",void 0!==E[a][n].qType&&ce(E[a][n].qType,E[a][n].colorText))," ",l.a.createElement("span",{dangerouslySetInnerHTML:{__html:E[a][n].reportAddInfo}}))))}()))})))),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"Unabh\xe4ngig von den von ihnen gegeben Antworten und den hieraus resultierenden Arbeitsanregungen, ist das Verfassen einer Projektskizze ein wesentlicher erster Schritt, um die Idee eines neuen Badegew\xe4ssers zu konkretisieren und f\xfcr andere anschaulich zu machen. Hierbei kann der Leitfaden:"," ",l.a.createElement("em",null,"Er\xf6ffnung neuer Flussbadestellen \u2013 Praxisleitfaden am Beispiel der Berliner Vorstadtspree"),l.a.createElement("sup",null,l.a.createElement("a",{href:"#footnote-1",id:"footnote-ref-1"},"[1]")),", hervorgegangen aus dem BMBF Forschungsprojekt FLUSSHYGIENE, eine gute Hilfestellung bieten."," "),l.a.createElement("p",null,"Neben der Erstellung einer Projektskizze, sollte m\xf6glichst fr\xfchzeitig, Kontakt mit den Fl\xe4cheneigent\xfcmer_innen aufgenommen werden, die Einbindung einer Badestelle in vorhandene Planungswerke (Landschaftsprogramme, Stadtentwicklungskonzepte, Gew\xe4sserentwicklungskonzepte Tourismuskonzepte, Sportkonzepte, B\xe4derkonzepte u.a.) gepr\xfcft werden und wenn n\xf6tig, die Suche nach politischer Unterst\xfctzung begonnen werden."),l.a.createElement("p",null,"Dar\xfcber hinaus liefert das kurze"," ",l.a.createElement("em",null,"Merkblatt zur Einrichtung neuer Flussbadegew\xe4sser "),"einen b\xfcndigen \xdcberblick \xfcber die wesentlichen Themen und Schritte hin zur Einrichtung eines Badegew\xe4ssers.",l.a.createElement("sup",null,l.a.createElement("a",{href:"#footnote-2",id:"footnote-ref-2"},"[2]"))," "),l.a.createElement("p",null,"Um eine Vorstellung von der Anwendung des Merkblattes zu bekommen wurde dieses beispielhaft auf einen Standort an der Berliner Spree angewandt. Das Ergebnis, die"," ",l.a.createElement("em",null,"Anwendung des Merkblattes zur Einrichtung neuer Flussbadegew\xe4sser - Anwendungsbeispiel Insel der Jugend Berlin",l.a.createElement("sup",null,l.a.createElement("a",{href:"#footnote-3",id:"footnote-ref-3"},"[3]")),","," "),"kann als Anregung dienen."," "),l.a.createElement("p",null,"Wir w\xfcnschen ihnen viel Erfolg bei der Initiierung eines neuen Badegew\xe4ssers!"),l.a.createElement("ol",null,l.a.createElement("li",{id:"footnote-1"},l.a.createElement("p",null," ","Raber, W., B\xf6sche, U., Sch\xf6n, S, (2018): Er\xf6ffnung neuer Flussbadestellen \u2013 Praxisleitfaden am Beispiel der Berliner Vorstadtspree, BMBF Forschungsprojekt FLUSSHYGIENE",l.a.createElement("a",{href:"https://www.inter3.de/fileadmin/user_upload/Downloads/Flyer_usw/Praxisleitfaden_Eroeffnung_neuer_Flussbadestellen-Januar_2019.pdf"},l.a.createElement(ue,null),l.a.createElement("span",null," "),"Praxisleitfaden Er\xf6ffnung neuer Flussbadestellen")," ",l.a.createElement("a",{href:"#footnote-ref-1"},"\u2191"))),l.a.createElement("li",{id:"footnote-2"},l.a.createElement("p",null," ","Raber, W., B\xf6sche, U., Selinka, H.-C., Szewzyk, R. (Hrsg.) (2018): Merkblatt zur Einrichtung neuer Flussbadegew\xe4sser, BMBF-Forschungsprojekt FLUSSHYGIENE "," ",l.a.createElement("a",{href:"#footnote-ref-2"},"\u2191"))),l.a.createElement("li",{id:"footnote-3"},l.a.createElement("p",null," ","Raber, W., B\xf6sche, U., Seis, W. (Hrsg.) (2019): Anwendung des Merkblattes zur Einrichtung neuer Flussbadegew\xe4sser: Anwendungsbeispiel Insel der Jugend Berlin, BMBF-Forschungsprojekt FLUSSHYGIENE "," ",l.a.createElement("a",{href:"#footnote-ref-3"},"\u2191")))))))},cr=function(e){var t=e.numId,a=e.matchId,n=Gn(),r=Object(m.a)(n,1)[0];return!1===isNaN(t)&&t>0&&t<r.questions.length?l.a.createElement(nr,{qid:parseInt(a,10)}):"report"===a?l.a.createElement(ir,null):l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",null,"Ups\u2026"),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"Sie sollten nicht hier landen\u2026 Ich schicke Sie zur\xfcck zum Anfang der Standortbewertung")),l.a.createElement(Nn.a,{to:"/".concat(h.questionnaire)}))},sr=function(e){var t=e.match,a=t.params.id,n=parseInt(a,10);if(!0===isNaN(n)){var r=new Error("Could not parse number from questions id");console.error(r)}if(0===n){Qt.push("/".concat(h.questionnaire,"/1"));var i=new Error("We should never reach the question 0");console.error(i)}return l.a.createElement(Ot,null,l.a.createElement("br",null),l.a.createElement(Hn,null,l.a.createElement(cr,{numId:n,matchId:t.params.id})))};sr.displayName="QA";var or=a(189),ur=a(136),dr=a(191),mr=a.n(dr);function pr(){var e=Object(or.a)(['\n  font-size: 12pt;\n  font-family: "Open Sans Italic";\n  padding-bottom: 13pt;\n']);return pr=function(){return e},e}function hr(){var e=Object(or.a)(["\n  font-size: 12pt;\n  padding-bottom: 13pt;\n"]);return hr=function(){return e},e}function gr(){var e=Object(or.a)(['\n  border-top: 1px dashed gray;\n  text-align: left;\n  font-size: 13pt;\n  font-weight: 600;\n  font-family: "Open Sans Bold";\n  padding-bottom: 15pt;\n']);return gr=function(){return e},e}function Er(){var e=Object(or.a)(['\n  text-align: center;\n  font-size: 16pt;\n  font-weight: 300;\n  font-family: "Open Sans Italic";\n  padding-bottom: 15pt;\n']);return Er=function(){return e},e}function fr(){var e=Object(or.a)(['\n  text-align: center;\n  font-size: 24pt;\n  font-weight: 600;\n  font-family: "Open Sans Bold";\n  padding-bottom: 15pt;\n']);return fr=function(){return e},e}function br(){var e=Object(or.a)(["\n  margin: 5vw;\n  padding: 5vh;\n  flex-grow: 1;\n"]);return br=function(){return e},e}function vr(){var e=Object(or.a)(['\n  flex-direction: "row";\n  // background-color: red;\n']);return vr=function(){return e},e}function yr(){var e=Object(or.a)(['\n  font-family: "Open Sans";\n']);return yr=function(){return e},e}var wr=a(1411),kr=a(1412),Sr=a(1413),Nr=mr.a.Document(yr()),Or=mr.a.Page(vr());ur.Font.register({family:"Open Sans Bold",src:wr,format:"truetype"}),ur.Font.register({family:"Open Sans",src:kr,format:"truetype"}),ur.Font.register({family:"Open Sans Italic",src:Sr,format:"truetype"});var jr=mr.a.View(br()),Ir=mr.a.Text(fr()),Tr=mr.a.Text(Er()),Cr=mr.a.Text(gr()),Dr=mr.a.Text(hr()),xr=mr.a.Text(pr()),Ar=function(e){if(void 0===e||null===e)return l.a.createElement(ur.Text,null);var t=e.split(/<a.*?href="|".*?<\/a>/).map((function(e){return e.startsWith("http")?l.a.createElement(ur.Link,{src:e},"Link"):l.a.createElement(ur.Text,null,e)}));return l.a.createElement(ur.Text,null,t.map((function(e,t){return l.a.createElement(l.a.Fragment,{key:t},e)})))};Ar.displayName="createPDFLinks";var _r=function(e){var t=e.questions,a=e.answers,n=e.addInfoQuestion,r=e.title,i=e.probability,c=e.allAnswersGiven;return l.a.createElement(Nr,null,l.a.createElement(Or,{size:"A4"},l.a.createElement(jr,null,l.a.createElement(Ir,null,r),l.a.createElement(Tr,null,i),!0===c&&l.a.createElement(Tr,null,"Achtung! Es wurden nicht alle Fragen beantwortet"))),void 0!==t&&t.length>0&&t.map((function(e,t){return l.a.createElement(ur.Page,{size:"A4",key:t},l.a.createElement(jr,null,l.a.createElement(Cr,null,t+1,".",e),n&&null!==n[t]||n&&void 0!==n[t]&&l.a.createElement(xr,null,Ar(n[t])),function(){var e=l.a.createElement(Dr,{key:"".concat(t,"not")},"Noch nicht beantwortet");if(a){var n,r=Object(an.a)(a);try{for(r.s();!(n=r.n()).done;){var i=n.value,c=i.id.split("-"),s=parseInt(c[0],10);if(t+1===s){var o=Ar(i.additionalText);e=l.a.createElement(l.a.Fragment,{key:"".concat(t,"yes")},l.a.createElement(Dr,{key:i.id},i.text),l.a.createElement(xr,null,o))}}}catch(u){r.e(u)}finally{r.f()}}return e}()))})))};_r.displayName="ReportPDF";var Pr=function(e){return l.a.createElement(nt,{containerClassName:"container__pdf--fullpage",columnClassName:"pdfviewer__parent"},l.a.createElement(Fr,e.location.state))};Pr.displayName="PDFPage";var Fr=function(e){var t=Object(r.useState)(!1),a=Object(m.a)(t,2),n=a[0],i=a[1];return Object(r.useEffect)((function(){return i(!1),i(!0),function(){return i(!1)}}),[]),l.a.createElement(l.a.Fragment,null,n&&l.a.createElement(ur.PDFViewer,{width:"100%",className:"pdfviewer",style:{height:"100%"}},l.a.createElement(_r,e)))},zr=function(){return l.a.createElement(l.a.Fragment,null,l.a.createElement(nt,null,l.a.createElement("div",{className:"is-hero"},l.a.createElement("h1",{className:"is-title is-1"},"Ups. Diese Seite existiert nicht."),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"Besser Sie gehen nochmal zur\xfcck zum ",l.a.createElement(wn.a,{to:"/"},"Anfang."))))))},Rr=function(e){var t=e.imprintType;return l.a.createElement(nt,{columnClassName:"is-8"},l.a.createElement("div",{className:"content"},"imprint"===t&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"is-title is-1"},"IMPRESSUM"),l.a.createElement("p",null,"Impressum des Webauftritts"," ",l.a.createElement("a",{href:P},F)," ","gem\xe4\xdf dem Gesetz \xfcber rechtliche Rahmenbedingungen f\xfcr den elektronischen Gesch\xe4ftsverkehr (EGG) und dem Teledienstgesetz (TDG)."),l.a.createElement("p",null,l.a.createElement("strong",null,"Kompetenzzentrum Wasser Berlin gGmbH"),l.a.createElement("br",null),"Cicerostr. 24",l.a.createElement("br",null),"10709 Berlin"),l.a.createElement("p",null,"Tel: +49 (0) 30 - 53 653 - 800",l.a.createElement("br",null),"Fax: +49 (0) 30 - 53 653 - 888",l.a.createElement("br",null),"E-Mail:"," ",l.a.createElement("a",{href:"mailto:info@kompetenz-wasser.de"},"info@kompetenz-wasser.de"),l.a.createElement("br",null),"Web:"," ",l.a.createElement("a",{href:"https://www.kompetenz-wasser.de",target:"_blank",rel:"noopener noreferrer"},"www.kompetenz-wasser.de")),l.a.createElement("p",null,"Das Kompetenzzentrum Wasser Berlin ist eine gemeinn\xfctzige GmbH."),l.a.createElement("p",null,l.a.createElement("strong",null,"Gesch\xe4ftsf\xfchrung:\xa0"),"Edith Ro\xdfbach, Regina Gnir\xdf",l.a.createElement("br",null),l.a.createElement("strong",null,"Prokura\xa0"),"Dr. Bodo Weigert, Dr. Pascale Rouault, Dr. Ulf Miehe",l.a.createElement("br",null),l.a.createElement("strong",null,"Vorsitzender des Aufsichtsrats: "),"J\xf6rg Simon"),l.a.createElement("p",null,l.a.createElement("strong",null,"Bank:\xa0"),"Commerzbank AG",l.a.createElement("br",null),l.a.createElement("strong",null,"Konto:\xa0"),"4103933700",l.a.createElement("br",null),l.a.createElement("strong",null,"BLZ:\xa0"),"120 800 00",l.a.createElement("br",null),l.a.createElement("strong",null,"IBAN:"),"\xa0DE42 1208 0000 4103 9337 00",l.a.createElement("br",null),l.a.createElement("strong",null,"SWIFT-BIC:"),"\xa0DRES DE FF 120"),l.a.createElement("p",null,l.a.createElement("strong",null,"Sitz der gGmbH:\xa0"),"Berlin",l.a.createElement("br",null),l.a.createElement("strong",null,"Registergericht: "),"Amtsgericht Berlin-Charlottenburg",l.a.createElement("br",null),l.a.createElement("strong",null,"Handelsregister-Nr.: "),"HRB 84461",l.a.createElement("br",null),l.a.createElement("strong",null,"Umsatzsteuerident.-Nr.: "),"DE 221139990",l.a.createElement("br",null),l.a.createElement("strong",null,"Steuer-Nr.:\xa0"),"27/640/02526"),l.a.createElement("p",null,l.a.createElement("strong",null,"Inhaltlich Verantwortlich gem\xe4\xdf \xa75 TMG:",l.a.createElement("br",null)),"Dr. Bodo Weigert"),l.a.createElement("p",null,l.a.createElement("strong",null,"Webdesign",l.a.createElement("br",null)),"Technologiestiftung Berlin"),l.a.createElement("p",null,l.a.createElement("strong",null,"Webentwicklung",l.a.createElement("br",null)),"Technologiestiftung Berlin"),l.a.createElement("p",null,l.a.createElement("strong",null,"Haftungshinweis",l.a.createElement("br",null)),"Trotz sorgf\xe4ltiger inhaltlicher Kontrolle \xfcbernehmen wir keine Haftung f\xfcr die Inhalte und die Gestaltung externer Links. F\xfcr den Inhalt der verlinkten Seiten inkl. der Unterseiten sind ausschlie\xdflich deren Betreiber verantwortlich."),l.a.createElement("p",null,"Die Seiten unseres Internetauftritts dienen der Information. Alle Angaben wurden sehr sorgf\xe4ltig recherchiert und zusammengestellt und werden st\xe4ndig aktualisiert. Ungeachtet unseres eigenen Interesses an der Richtigkeit, Vollst\xe4ndigkeit und Aktualit\xe4t der Inhalte k\xf6nnen wir daf\xfcr leider keinerlei Haftung, weder ausdr\xfccklich noch stillschweigend, \xfcbernehmen."),l.a.createElement("p",null,"Die Inhalte der Seiten dienen lediglich der allgemeinen Information. Aus diesem Grunde sind die Geltendmachung bzw. der Ersatz von Sch\xe4den, die aus dem Gebrauch der Internet-Seiten und der auf ihnen enthaltenen Informationen direkt oder indirekt resultieren, ausgeschlossen."),l.a.createElement("p",null,"Keine Abmahnung ohne vorherigen Kontakt! Sollte der Inhalt oder die Aufmachung dieser Seiten fremde Rechte Dritter oder gesetzliche Bestimmungen verletzen, so bitten wir um eine entsprechende Nachricht ohne Kostennote. Wir garantieren, dass die zu Recht beanstandeten Passagen unverz\xfcglich entfernt werden, ohne dass von Ihrer Seite die Einschaltung eines Rechtsbeistandes erforderlich ist. Dennoch von Ihnen ohne vorherige Kontaktaufnahme ausgel\xf6ste Kosten werden wir vollumf\xe4nglich zur\xfcckweisen. Vielen Dank f\xfcr Ihr Verst\xe4ndnis."),l.a.createElement("p",null,"\xc4nderungen der Inhalte der Internet-Seiten bleiben jederzeit ausdr\xfccklich vorbehalten."),l.a.createElement("p",null,"Inhalt und Gestaltung der Internet-Seiten sind urheberrechtlich gesch\xfctzt. Eine Vervielf\xe4ltigung der Seiten oder ihrer Inhalte bedarf der vorherigen schriftlichen Zustimmung der KWB gGmbH."),l.a.createElement("p",null,l.a.createElement("strong",null,"Rechtliche Hinweise zum Urheberrecht",l.a.createElement("br",null)),"Das Layout der Website, die verwendeten Grafiken sowie die sonstigen Inhalte der Internetpr\xe4senz"," ",l.a.createElement("a",{href:P},F)," ","sind urheberrechtlich gesch\xfctzt. Alle Rechte vorbehalten."),l.a.createElement("p",null,"Bildrechte:"),l.a.createElement("p",null,"XXXX")),"privacy"===t&&l.a.createElement(l.a.Fragment,null,l.a.createElement("h1",{className:"is-title is-1"},"DATENSCHUTZ"),l.a.createElement("p",null,"Wir nehmen den Schutz Ihrer pers\xf6nlichen Daten sehr ernst und behandeln Ihre personenbezogenen Daten vertraulich und entsprechend den gesetzlichen Datenschutzvorschriften sowie dieser Datenschutzerkl\xe4rung."),l.a.createElement("p",null,l.a.createElement("strong",null,"Verarbeitung personenbezogener Daten")),l.a.createElement("p",null,"Wir erheben und verarbeiten personenbezogene Daten nur, soweit diese f\xfcr die Einladung zu Veranstaltungen der Kompetenzzentrum Wasser Berlin gGmbH (KWB), der allgemeinen Information \xfcber KWB und die Erstellung und den Versand von anlassbezogenen Schreiben des KWB erforderlich sind (Bestandsdaten). Sie k\xf6nnen unsere Seite besuchen, ohne Angaben zu Ihrer Person zu machen. Personenbezogene Daten werden nur erhoben, wenn Sie uns diese im Rahmen Ihrer Veranstaltungsanmeldung oder Registrierung f\xfcr unseren Newsletter freiwillig mitteilen."," "),l.a.createElement("p",null,"Weitere Hinweise nach Artikel 13/14 DSGVO zur Verarbeitung Ihrer personenbezogenen Daten finden Sie in unserer Erkl\xe4rung zum Datenschutz."),l.a.createElement("p",null,"Datenschutzbeauftragter: Tobias Evel; datenschutz@kompetenz-wasser.de"),l.a.createElement("p",null,l.a.createElement("strong",null,"Ihre Rechte")),l.a.createElement("p",null,"Ihnen stehen grunds\xe4tzlich die Rechte auf Auskunft, Berichtigung, L\xf6schung, Einschr\xe4nkung, Daten\xfcbertragbarkeit, Widerruf und Widerspruch zu. Wenn Sie glauben, dass die Verarbeitung Ihrer Daten gegen das Datenschutzrecht verst\xf6\xdft oder Ihre datenschutzrechtlichen Anspr\xfcche in sonst einer Weise verletzt worden sind, k\xf6nnen Sie sich bei der Aufsichtsbeh\xf6rde beschweren. In Berlin ist dies der Berliner Beauftragte f\xfcr Datenschutz und Informationsfreiheit. Bei Fragen zur Erhebung, Verarbeitung oder Nutzung Ihrer personenbezogenen Daten, bei Ausk\xfcnften, Berichtigung, Sperrung oder L\xf6schung von Daten sowie Widerruf erteilter Einwilligungen wenden Sie sich bitte an: datenschutz@kompetenz-wasser.de"),l.a.createElement("p",null,l.a.createElement("strong",null,"Kontakt mit uns")),l.a.createElement("p",null,"Wenn Sie per Formular auf der Website oder per E-Mail-Kontakt mit uns aufnehmen, werden Ihre angegebenen Daten zwecks Bearbeitung der Anfrage sowie in der gesetzlich vorgeschriebenen E-Mail-Archivierung erfasst. Diese Daten geben wir nicht ohne Ihre Einwilligung weiter."),l.a.createElement("p",null,l.a.createElement("strong",null,"Ansprechpartner f\xfcr Datenschutz")),l.a.createElement("p",null,"Bei Fragen zur Erhebung, Verarbeitung oder Nutzung Ihrer personenbezogenen Daten, bei Ausk\xfcnften, Berichtigung, Sperrung oder L\xf6schung von Daten sowie Widerruf erteilter Einwilligungen wenden Sie sich bitte an datenschutz@kompetenz-wasser.de."),l.a.createElement("p",null,l.a.createElement("strong",null,"Datensicherheit")),l.a.createElement("p",null,"Wir sichern unsere Website und sonstigen Systeme durch technische und organisatorische Ma\xdfnahmen gegen Verlust, Zerst\xf6rung, Zugriff, Ver\xe4nderung oder Verbreitung Ihrer Daten durch unbefugte Personen. Alle Daten in unseren Anmelde- und Kontaktformularen verschl\xfcsseln wir mit SSL. Unsere Sicherheitsma\xdfnahmen haben wir gem\xe4\xdf allgemein anerkannten Standards eingerichtet, damit die an uns \xfcbermittelten personenbezogenen Daten sowohl bei der \xdcbertragung als auch nach Erhalt so gut wie m\xf6glich gesch\xfctzt sind. Dennoch ist keine \xdcbertragung \xfcber das Internet und keine Speichermethode hundertprozentig sicher."))))};Rr.displayName="Imprint";var Mr=Za.object().shape({email:Za.string().email("Bitte geben Sie eine valide E-Mail Adresse an.").required("Email ist ein Pflichtfeld."),text:Za.string().min(15,"Bitte schreiben Sie mehr als 15 Zeichen").max(1e3,"Bitte nicht mehr als 1000 Zeichen").required("Text ist ein Pflichtfeld."),name:Za.string().min(3,"Ist Ihr Name nicht l\xe4nger als drei Zeichen?").max(1e3,"Bitte nicht mehr als 1000 Zeichen").required("Name ist ein Pflichtfeld.")}),Br=function(e){var t=e.hdData,a=e.hdText,n=Ct(),i=Object(m.a)(n,2)[1],c=B(),s=c.user,o=c.isAuthenticated,p=c.getTokenSilently,h=zt(),g=Object(m.a)(h,1)[0],E=Object(r.useState)(),f=Object(m.a)(E,2),b=f[0],v=f[1],y=Object(r.useState)({text:a,email:""}),w=Object(m.a)(y,2),k=w[0],S=w[1];Object(r.useEffect)((function(){function e(){return(e=Object(d.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p();case 3:t=e.sent,v(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[p,v]),Object(r.useEffect)((function(){S({data:t?JSON.stringify(t,null,2):"",text:a||"",email:s.email,name:"".concat(s.pgapiData.firstName," ").concat(s.pgapiData.lastName),spotId:g.spot?g.spot.id:void 0,spotName:g.spot?g.spot.name:"",userId:s.pgapiData.id})}),[s.email,s.pgapiData,a,t,g.spot]);var N=function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r,l,c,s,o,d,m,p,h;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.token,n=t.data,r=t.email,l=t.name,c=t.text,s=t.callBack,o=t.spotId,d=t.spotName,m=t.userId,e.prev=1,"/helpdesk/v1/messages",p={method:"POST",headers:{"content-type":"application/json",Authorization:"Bearer ".concat(a)},credentials:"include",body:JSON.stringify({email:r,name:l,text:c,data:n,spotId:o,userId:m,spotName:d})},e.next=6,fetch("/helpdesk/v1/messages",p);case 6:!0===(h=e.sent).ok?(s(!0),i({type:"ADD_MESSAGE",payload:{type:"normal",message:"Ihre E-Mail wurde versand. Ich schicke Sie in 5 Sekunden zur\xfcck zur Startseite."}}),S({}),setTimeout((function(){Qt.push("")}),5e3)):(s(),i({type:"ADD_MESSAGE",payload:{type:"warning",message:"Beim senden der Nachricht ist ein Fehler aufgetreten. ".concat(h.text)}}),console.error("repsonse not ok",h)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),s(),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}();return l.a.createElement(l.a.Fragment,null,l.a.createElement(Ot,null,l.a.createElement(nt,null,o&&s?l.a.createElement(l.a.Fragment,null,l.a.createElement(et,null),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"Oder benutzen Sie das unten stehende Formular.")),l.a.createElement(T.e,{enableReinitialize:!0,validationSchema:Mr,initialValues:k,onSubmit:function(e,t){var a=t.setSubmitting,n=t.resetForm;if(b){var r={token:b,data:e.data,email:e.email?e.email:"",name:e.name?e.name:"",text:e.text?e.text:"",spotId:e.spotId,spotName:e.spotName,userId:e.userId,callBack:function(e){a(!1),e&&n()}};N(r).catch((function(e){throw e}))}}},(function(e){var t=e.isValid,a=e.isSubmitting;return l.a.createElement(T.d,null,l.a.createElement(T.b,{name:"email"},(function(e){var t=e.field,a=e.meta;return l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"email"},"E-Mail *"),l.a.createElement("div",{className:"control"},l.a.createElement("input",Object.assign({type:"email",className:"input ".concat(a.touched&&a.error?"is-danger":""),placeholder:"E-Mail"},t)),a.touched&&a.error&&l.a.createElement("div",{className:"helpdesk__field--error"},a.error)))})),l.a.createElement(T.b,{name:"name"},(function(e){var t=e.field,a=e.meta;return l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"name"},"Ihr Name *"),l.a.createElement("div",{className:"control"},l.a.createElement("input",Object.assign({type:"text",className:"input ".concat(a.touched&&a.error?"is-danger":""),placeholder:"Ihr Name"},t)),a.touched&&a.error&&l.a.createElement("div",{className:"helpdesk__field--error"},a.error)))})),l.a.createElement(T.b,{name:"userId"},(function(e){var t=e.field;return l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"userId"},"Ihre Benutzer ID"),l.a.createElement("div",{className:"control"},l.a.createElement("input",Object.assign({type:"number",className:"input",placeholder:"Ihre UserID"},t))))})),l.a.createElement(T.b,{name:"spotName"},(function(e){var t=e.field;return l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"spotName"},"Name der Badestelle"),l.a.createElement("div",{className:"control"},l.a.createElement("input",Object.assign({type:"text",className:"input",placeholder:"Name der Badestelle"},t))))})),l.a.createElement(T.b,{name:"spotId"},(function(e){var t=e.field;return l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"spotId"},"ID der Badestelle"),l.a.createElement("div",{className:"control"},l.a.createElement("input",Object.assign({type:"number",className:"input",placeholder:"Badestellen ID"},t))))})),l.a.createElement(T.b,{name:"text"},(function(e){var t=e.field,a=e.meta;return l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"text"},"Freier Text *",l.a.createElement("em",null,"(Mindestens 15 Zeichen)")),l.a.createElement("div",{className:"control"},l.a.createElement("textarea",Object.assign({className:"textarea ".concat(a.touched&&a.error?"is-danger":""),placeholder:"Freier Text"},t)),a.touched&&a.error&&l.a.createElement("div",{className:"helpdesk__field--error"},a.error)))})),l.a.createElement(T.b,{name:"data"},(function(e){var t=e.field;return l.a.createElement("div",{className:"field"},l.a.createElement("label",{htmlFor:"text"},"Systemgenerierte Daten"),l.a.createElement("div",{className:"control"},l.a.createElement("textarea",Object.assign({className:"textarea",placeholder:"System Daten"},t))))})),l.a.createElement("div",{className:"buttons"},l.a.createElement(Rt,{additionalClassNames:"".concat(t?"is-primary":"is-outlined"," ").concat(a?"is-loading":""),type:"submit",text:"Senden",isDisabled:!t},l.a.createElement(we,null))))}))):l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"Sie sind nicht authentifiziert."))))))},Ur=l.a.createContext({}),Lr=function(e){return l.a.createElement(M.Consumer,null,(function(t){return l.a.createElement(Dt.Consumer,null,(function(a){return l.a.createElement(Ur.Provider,{value:{authContext:t,helpDeskContext:a}},e.children)}))}))};Lr.displayName="ProvideCombindeContext";var Hr=function(e){return l.a.createElement(Lr,null,l.a.createElement(Vr,e))};Hr.displayName="WrapErrorBoundary";var Vr=function(e){Object($n.a)(a,e);var t=Object(er.a)(a);function a(e){var n;return Object(vt.a)(this,a),(n=t.call(this,e)).state={hasError:!1,error:null,errorInfo:null},n}return Object(yt.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidCatch",value:function(e,t){this.setState({hasError:this.state.hasError,error:e,errorInfo:t}),console.error(e,t)}},{key:"render",value:function(){var e,t=this.context.authContext.isAuthenticated;this.context.helpDeskContext.spot;return this.state.hasError?l.a.createElement(l.a.Fragment,null,l.a.createElement(Ot,null,l.a.createElement(nt,{columnClassName:"is-8"},l.a.createElement("h1",null,"Irgendwas ist schief gelaufen."),l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"Bitte beschreiben sie, so gut es geht, wie der Fehler entstanden ist."))),l.a.createElement(nt,{columnClassName:"is-8"},!0===t?l.a.createElement(Br,{hdData:{error:this.state.error?this.state.error:void 0,componentStack:this.state.errorInfo?null===(e=this.state.errorInfo)||void 0===e?void 0:e.componentStack:this.state.errorInfo}}):l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",{className:"is-2 is-title"},"Error Stack"),l.a.createElement("pre",null,l.a.createElement("code",null,this.state.errorInfo&&this.state.errorInfo.componentStack)),l.a.createElement("h2",{className:"is-2 is-title"},"Error"),l.a.createElement("pre",null,l.a.createElement("code",null,this.state.error&&this.state.error.toString())))),l.a.createElement(nt,{columnClassName:"is-8"},l.a.createElement("div",{className:"content"},l.a.createElement("p",null,"Zur\xfcck ",l.a.createElement("a",{href:"/"},"zum Anfang ")))))):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(l.a.Component);Vr.contextType=Ur,Vr.displayName="ErrorBoundary";var Wr=function(){return B().loading?l.a.createElement("div",{className:"pageloader is-active"},l.a.createElement("h1",{className:"title"},"Authentifizere Benutzer mit Auth Server")):l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,null,l.a.createElement("meta",{charSet:"utf-8"}),l.a.createElement("title",null,"Flusshygiene")),l.a.createElement(Nn.c,{history:Qt},l.a.createElement("main",{id:"wrapper"},l.a.createElement("header",null),l.a.createElement(Nn.d,null,l.a.createElement(Nn.b,{path:"/",exact:!0,component:Dn}),l.a.createElement(jn,{path:"/".concat(h.bathingspot,"/:id"),component:yn}),l.a.createElement(Nn.b,{path:"/info",component:Tn}),l.a.createElement(Nn.b,{path:"/".concat(h.questionnaire,"/:id"),component:sr}),l.a.createElement(Nn.b,{path:"/".concat(h.questionnaire,"-pdfviewer"),component:Pr}),l.a.createElement(Nn.b,{path:"/".concat(h.questionnaire),component:An}),l.a.createElement(jn,{path:"/".concat(h.profile),component:Sn}),l.a.createElement(jn,{path:"/".concat(h.helpdesk),component:Br}),!1,l.a.createElement(Nn.b,{path:"/".concat(h.imprint),render:function(e){return l.a.createElement(Rr,Object.assign({},e,{imprintType:"imprint"}))}}),l.a.createElement(Nn.b,{path:"/".concat(h.privacy),render:function(e){return l.a.createElement(Rr,Object.assign({},e,{imprintType:"privacy"}))}}),l.a.createElement(Nn.b,{component:zr}))),l.a.createElement("footer",{className:"footer"},l.a.createElement("div",{className:"content"},l.a.createElement("p",{style:{color:"white"}},l.a.createElement(wn.a,{style:{color:"white",textDecoration:"underline"},to:"/".concat(h.imprint)},"Impressum")," || ",l.a.createElement(wn.a,{style:{color:"white",textDecoration:"underline"},to:"/".concat(h.privacy)},"Datenschutz"))))))};Wr.displayName="App";var Gr=Wr;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(U,{domain:A,client_id:x,redirect_uri:window.location.origin,audience:D,onRedirectCallback:function(e){window.history.replaceState({},document.title,e&&e.targetUrl?e.targetUrl:window.location.pathname)}},l.a.createElement(_t,null,l.a.createElement(Hr,null,l.a.createElement(Qe,null,l.a.createElement(ut,null,l.a.createElement(ft,null,l.a.createElement(Gr,null))))))),document.getElementById("root")),function(){try{"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}catch(e){console.error("Service worker error for firefox bubbeling up here because of non existing ssl")}}()},306:function(e,t,a){"use strict";a.r(t),a.d(t,"getQuestions",(function(){return s}));var n=a(25),r=a.n(n),l=a(145),i=a(39),c=["Frage-1.1.1.-gew2.json","Frage-2.1.1.-gew4.json","Frage-2.2.1.-gew4.json","Frage-2.3.1.-gew4.json","Frage-2.4.1.-gew4.json","Frage-3.1.1.-gew1.json","Frage-3.2.2.-gew2.json","Frage-3.2.3.-gew4.json","Frage-3.3.2.-gew3.json","Frage-4.1.1.-gew3.json","Frage-4.2.1.-gew3.json","Frage-4.3.1.-gew3.json","Frage-4.4.1.-gew3.json","Frage-5.1.1.-gew3.json","Frage-6.1.1.-gew2.json","Frage-7.1.1.-gew4.json","Frage-8.1.1.-gew4.json","Frage-8.2.1.-gew4.json","Frage-8.3.1.-gew4.json","Frage-8.4.1.-gew4.json","Frage-9.1.1.-gew3.json","Frage-9.2.1.-gew3.json","Frage-10.1.1.-gew2.json","Frage-10.2.1.-gew2.json","Frage-10.3.1.-gew2.json"],s=function(){var e=Object(i.a)(r.a.mark((function e(){var t,n,i,s,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t=[{}],n=Object(l.a)(c),e.prev=3,n.s();case 5:if((i=n.n()).done){e.next=13;break}return s=i.value,e.next=9,a(1226)("./".concat(s)).catch((function(e){console.error(e)}));case 9:o=e.sent,t.push(o);case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),n.e(e.t0);case 18:return e.prev=18,n.f(),e.finish(18);case 21:return e.abrupt("return",t);case 24:throw e.prev=24,e.t1=e.catch(0),e.t1;case 27:case"end":return e.stop()}}),e,null,[[0,24],[3,15,18,21]])})));return function(){return e.apply(this,arguments)}}()},518:function(e,t){},792:function(e,t,a){e.exports=a(1414)}},[[792,26,27]]]);